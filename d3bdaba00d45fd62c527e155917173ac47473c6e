{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e5208c9b_2e3a3de9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 28
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2025-09-05T02:30:10Z",
      "side": 1,
      "message": "Apology for the really late reviews. For documentation purposes, just want to leave some general opinions regarding the unit testing in vboot_reference.\n\n1. IMO cmocka is preferred over the testing framework invented by vboot itself. With cmocka, we wouldn\u0027t need to implement the ugly `ASSERT()` macro and friends. If we\u0027re introducing unit tests to futility, we may consider starting using cmocka.\n2. In the long term we\u0027d like to get rid of `test_mockable`. Right now that depends on the separation of test builds from host utility builds. See previous [discussions](https://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/3744746/comment/35c7d53f_dca080db/).",
      "revId": "d3bdaba00d45fd62c527e155917173ac47473c6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "734b559d_93382b3d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 28
      },
      "lineNbr": 0,
      "author": {
        "id": 1512562
      },
      "writtenOn": "2025-09-05T11:14:25Z",
      "side": 1,
      "message": "Adding cmocka is no small feat. I attempted to rewrite vboot Makefile several times to make it more coreboot/libpayload/depthcharge-like and failed due to the complication of it. I think we can leave these tests as they are right now and refactor them once we rework the Makefile(s) to not be a monolithic mess.\n\nAd. `test_mockable` - This will also require a Makefile rework. In coreboot this is handled by renaming original symbols to add `__real_` prefix. Some symbols are also marked as `__weak` in the pre-include config.",
      "parentUuid": "e5208c9b_2e3a3de9",
      "revId": "d3bdaba00d45fd62c527e155917173ac47473c6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}