{
  "comments": [
    {
      "key": {
        "uuid": "3c7d68a0_954804ed",
        "filename": "firmware/lib/vboot_common.c",
        "patchSetId": 3
      },
      "lineNbr": 481,
      "author": {
        "id": 1002124
      },
      "writtenOn": "2015-02-04T18:46:33Z",
      "side": 1,
      "message": "Shouldn\u0027t we be checking header_version_major here as well?",
      "revId": "48d4e826a0a9f041db1975c4c4c0ffa18c6ca5c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ccfc448_ccc90f2b",
        "filename": "firmware/lib/vboot_common.c",
        "patchSetId": 3
      },
      "lineNbr": 481,
      "author": {
        "id": 1000058
      },
      "writtenOn": "2015-02-04T20:00:00Z",
      "side": 1,
      "message": "That\u0027s done in VerifyKernelPreamble(), which is called long before this function (see CL 245951).",
      "parentUuid": "3c7d68a0_954804ed",
      "revId": "48d4e826a0a9f041db1975c4c4c0ffa18c6ca5c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ce0c0af_92d9da2b",
        "filename": "firmware/lib/vboot_common.c",
        "patchSetId": 3
      },
      "lineNbr": 481,
      "author": {
        "id": 1002124
      },
      "writtenOn": "2015-02-04T20:07:04Z",
      "side": 1,
      "message": "It seems weird to rely on the ordering of calls, but if that\u0027s the way things are done in vboot_reference so be it.",
      "parentUuid": "1ccfc448_ccc90f2b",
      "revId": "48d4e826a0a9f041db1975c4c4c0ffa18c6ca5c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ccfc448_0f370911",
        "filename": "firmware/lib/vboot_common.c",
        "patchSetId": 3
      },
      "lineNbr": 481,
      "author": {
        "id": 1000058
      },
      "writtenOn": "2015-02-04T20:32:48Z",
      "side": 1,
      "message": "Not really. LoadKernel() does a bunch of checks - verify the header (including the major version), verify the data, verify the rollback counters, etc. before it can decide whether a kernel is valid or not.  The new flags field is a minor change, so LoadKernel() should be backward compatible and use a sane default if it\u0027s not present. If it is present, it needs to handle the flags correctly.",
      "parentUuid": "7ce0c0af_92d9da2b",
      "revId": "48d4e826a0a9f041db1975c4c4c0ffa18c6ca5c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cb9a0a9_07d936f5",
        "filename": "firmware/lib/vboot_common.c",
        "patchSetId": 3
      },
      "lineNbr": 481,
      "author": {
        "id": 1003000
      },
      "writtenOn": "2015-02-04T21:38:00Z",
      "side": 1,
      "message": "Yeah. I was not sure how this is handled in rest of the cases. So I duplicated what VbGetKernelVmlinuzHeader does. \n\nIn the future, when we change Major version number, would we not be using these functions at all? Or would we just change the functions to reflect the new minor version corresponding to the new major version?",
      "parentUuid": "1ccfc448_0f370911",
      "revId": "48d4e826a0a9f041db1975c4c4c0ffa18c6ca5c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ce0c0af_d8d9c17c",
        "filename": "firmware/lib/vboot_common.c",
        "patchSetId": 3
      },
      "lineNbr": 481,
      "author": {
        "id": 1000058
      },
      "writtenOn": "2015-02-04T22:02:05Z",
      "side": 1,
      "message": "Major version changes are completely incompatible with anything before, so anything goes. If the major version differs, whatever we\u0027re looking at is not supported by the current code. The only difference between a non-matching major version and a buffer full of random bytes is that we can print \"Incompatible version\" instead of \"Invalid data\".\n\nMinor version changes should be backwards-compatible, so any structs from earlier minor versions should still work. We should just use sane defaults for any missing fields or values.\n\nWe can\u0027t accept newer minor version structs, of course, since we don\u0027t know what they\u0027ll look like.",
      "parentUuid": "7cb9a0a9_07d936f5",
      "revId": "48d4e826a0a9f041db1975c4c4c0ffa18c6ca5c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c43fc80_4199b48e",
        "filename": "firmware/lib/vboot_common.c",
        "patchSetId": 3
      },
      "lineNbr": 481,
      "author": {
        "id": 1003000
      },
      "writtenOn": "2015-02-04T23:41:03Z",
      "side": 1,
      "message": "Ok. sounds good.",
      "parentUuid": "7ce0c0af_d8d9c17c",
      "revId": "48d4e826a0a9f041db1975c4c4c0ffa18c6ca5c4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}