{
  "comments": [
    {
      "key": {
        "uuid": "aa6b9816_c3ed79d4",
        "filename": "firmware/2lib/2misc.c",
        "patchSetId": 79
      },
      "lineNbr": 165,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-31T22:59:35Z",
      "side": 1,
      "message": "nit: technically there\u0027s no point in checking the old one",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0e196ed7_bd47a7d6",
        "filename": "firmware/2lib/2misc.c",
        "patchSetId": 79
      },
      "lineNbr": 165,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-05T18:32:41Z",
      "side": 1,
      "message": "I suppose not.  It would be considered \"invalid\" to use if it is misaligned, but if we assume the caller only has a void pointer, they won\u0027t be able to use it until they call vb2_reinit() and friends anyways.",
      "parentUuid": "aa6b9816_c3ed79d4",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56385db3_241a5380",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 79
      },
      "lineNbr": 203,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-31T22:59:35Z",
      "side": 1,
      "message": "nit: normally I\u0027d leave the macro you actually want to use without a leading underscore (if you\u0027re worried about naming clashes, could call it VB2_PAD_STRUCT)",
      "range": {
        "startLine": 203,
        "startChar": 8,
        "endLine": 203,
        "endChar": 19
      },
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2732584_541f41e3",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 79
      },
      "lineNbr": 203,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-05T18:32:41Z",
      "side": 1,
      "message": "OK... I thought just using an underscore might be more \"file-specific\".  VB2_PAD_STRUCT feels like it belongs in a different header file.  But I\u0027ll do that here.",
      "parentUuid": "56385db3_241a5380",
      "range": {
        "startLine": 203,
        "startChar": 8,
        "endLine": 203,
        "endChar": 19
      },
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae259903_b2afc998",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 79
      },
      "lineNbr": 225,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-31T22:59:35Z",
      "side": 1,
      "message": "nit: Add a padding word here so the things we\u0027re aligning to 8 below actually start at the right boundary. Might come in handy if we run out of flags too. (Or just make it 64-bit right away.)",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f22d4476_b4e45259",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 79
      },
      "lineNbr": 225,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-05T18:32:41Z",
      "side": 1,
      "message": "Hmm, I like the second solution.",
      "parentUuid": "ae259903_b2afc998",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9398b814_8ed6496d",
        "filename": "tests/vb2_keyblock_fuzzer.c",
        "patchSetId": 79
      },
      "lineNbr": 13,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-31T22:59:35Z",
      "side": 1,
      "message": "nit: could really be a local now",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "624510b7_74c1e469",
        "filename": "tests/vb2_keyblock_fuzzer.c",
        "patchSetId": 79
      },
      "lineNbr": 13,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-05T18:32:41Z",
      "side": 1,
      "message": "Hmm I think we\u0027ve talked about this before (\u003d  My argument is that all tests use file-static variables, and we should be consistent with that, regardless of whether it could be a local.",
      "parentUuid": "9398b814_8ed6496d",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "63cc7110_da308020",
        "filename": "tests/vb2_keyblock_fuzzer.c",
        "patchSetId": 79
      },
      "lineNbr": 87,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-31T22:59:35Z",
      "side": 1,
      "message": "Why remove the error checking? We still wanna make sure this doesn\u0027t fail (e.g. if something about workbuf location/alignment requirements ever changes and we forget to update it here).\n\nI\u0027m particularly worried about \"dumb\" failures like this in fuzzers because if this fails and then vb2_load_fw_keyblock() always returns very early because of some sanity check on the context, the fuzzer still \"succeeds\", it just figures out that nothing it will do to the input data changes the result. And if you don\u0027t look closely at the coverage data, you might never notice.",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91547fa2_e77f331a",
        "filename": "tests/vb2_keyblock_fuzzer.c",
        "patchSetId": 79
      },
      "lineNbr": 87,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-05T18:32:41Z",
      "side": 1,
      "message": "It was unintentional -- I\u0027ll add an assert back in.  Or should it return 1 on failure instead?\n\nEDIT: There is something very wrong with assert().  It seems to ignore any text within the assert(...) call when compiling.  I.e. it will complain that workbuf is an unused variable.  I\u0027ve changed it to return 1 instead... although I\u0027m not even sure this is correct behaviour for a LLVMFuzzerTestOneInput function.  Please advise.\n\nSeems that I can write assert(aoeuaeouaoueaeou); and it will still compile.  I wonder if all of our assert() calls are broken?",
      "parentUuid": "63cc7110_da308020",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa8803eb_801bbd3b",
        "filename": "tests/vb2_keyblock_fuzzer.c",
        "patchSetId": 79
      },
      "lineNbr": 87,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-11-06T00:54:11Z",
      "side": 1,
      "message": "No, returning 1 isn\u0027t correct. You could do\n\n if (!rv)\n   abort();\n\ninstead. But we should probably rather fix assert(). The problem is the part in the Makefile where -DNDEBUG is added to CFLAGS, that disables all assert()s. We probably don\u0027t want that (although it\u0027s only really used in futility update for now). The other option would be to just use VB2_ASSERT() consistently.",
      "parentUuid": "91547fa2_e77f331a",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbd14ef8_8ba32512",
        "filename": "tests/vb2_keyblock_fuzzer.c",
        "patchSetId": 79
      },
      "lineNbr": 87,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-07T10:17:29Z",
      "side": 1,
      "message": "Okay, let\u0027s use abort() here.  VB2_ASSERT() doesn\u0027t work since we mocked out vb2api_abort() in one of the fuzzers.  But I agree that we should fix the assert situation... in a separate CL.",
      "parentUuid": "aa8803eb_801bbd3b",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e286acd_b22d7e67",
        "filename": "tests/vboot_kernel_tests.c",
        "patchSetId": 79
      },
      "lineNbr": 73,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-31T22:59:35Z",
      "side": 1,
      "message": "...in fact, now that I\u0027m looking through this there are a bunch of test workbuffers that don\u0027t get aligned right.",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d380e98_21058d38",
        "filename": "tests/vboot_kernel_tests.c",
        "patchSetId": 79
      },
      "lineNbr": 73,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-05T18:32:41Z",
      "side": 1,
      "message": "Yes.  Maybe we should just take care of that separately.",
      "parentUuid": "3e286acd_b22d7e67",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fc6cc6f_e3669858",
        "filename": "tests/vboot_kernel_tests.c",
        "patchSetId": 79
      },
      "lineNbr": 174,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-31T22:59:35Z",
      "side": 1,
      "message": "Does this not fail? Or does it and the rest of the test just never notices? Should maybe do TEST_TRUE() for all of these just in case. (Same probably counts for stuff like the vb2_nv_init() below as well.)",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e0facca_a32ab475",
        "filename": "tests/vboot_kernel_tests.c",
        "patchSetId": 79
      },
      "lineNbr": 174,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-05T18:32:41Z",
      "side": 1,
      "message": "Do you mean because of misalignment?  Yes, it passes, even with TEST_SUCC.  I guess the compiler just tends to align these static variables without being asked...?\n\nBut anyways, adding TEST_SUCC to all of these.  Can leave vb2_nv_init and friends for another CL.",
      "parentUuid": "3fc6cc6f_e3669858",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a34a6471_04f6dfdd",
        "filename": "tests/vboot_kernel_tests.c",
        "patchSetId": 79
      },
      "lineNbr": 174,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-11-06T00:54:11Z",
      "side": 1,
      "message": "Hmmm... odd. Seems that there are some weird alignment rules in the x86 ABIs for arrays of a certain size, regardless of data type, to allow for SSE optimizations. Arm doesn\u0027t have those but we never run unit tests for Arm.\n\nProbably still a good idea to align them all explicitly (in another patch).",
      "parentUuid": "3e0facca_a32ab475",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d062cd98_ed103bc4",
        "filename": "tests/vboot_kernel_tests.c",
        "patchSetId": 79
      },
      "lineNbr": 174,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-07T10:17:29Z",
      "side": 1,
      "message": "Ack - see CL:1902843.",
      "parentUuid": "a34a6471_04f6dfdd",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eab82e4a_38debd23",
        "filename": "tests/verify_kernel.c",
        "patchSetId": 79
      },
      "lineNbr": 22,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-31T22:59:35Z",
      "side": 1,
      "message": "Alignment?",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2ec2b14_37a770ef",
        "filename": "tests/verify_kernel.c",
        "patchSetId": 79
      },
      "lineNbr": 22,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-11-05T18:32:41Z",
      "side": 1,
      "message": "Moved into another CL.",
      "parentUuid": "eab82e4a_38debd23",
      "revId": "152b329c2d18417e8a9a1776db7ba6b7b4b95031",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}