{
  "comments": [
    {
      "key": {
        "uuid": "12d31a49_1c201f9b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-07-16T05:32:01Z",
      "side": 1,
      "message": "For the errors where we just want to beep, what about just calling vb2ex_beep directly?  I don\u0027t really see a benefit of binding it to the dialog box code.  Also note that we\u0027re already calling vb2ex_beep in developer_mode_action().",
      "revId": "bfaa303c27da6675f07b2689ef67b63276deb3ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "129f2d07_0596f5cd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-16T06:01:45Z",
      "side": 1,
      "message": "From a previous discussion [1], the conclusion is to call vb2ex_beep(), right *after* calling vb2ex_display_ui() in ui_loop, for errors that will be drawn in depthcharge. For beep-only errors, if we directly call vb2ex_beep(), then we have to make sure that error_code will not be set in the same iteration in ui_loop. Otherwise, vb2ex_beep() will be called again in the next iteration, right after vb2ex_display_ui().\n\n[1] https://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/2243196/1/firmware/2lib/2ui_screens.c#59",
      "parentUuid": "12d31a49_1c201f9b",
      "revId": "bfaa303c27da6675f07b2689ef67b63276deb3ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5fbaddc_e50b6f93",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-07-16T06:32:20Z",
      "side": 1,
      "message": "Yeah, that\u0027s a valid concern.  It\u0027d be nice if we could incorporate the developer_mode_action() vb2ex_beep() calls into this model as well, but given that developer_mode_action() just wants to \"make some beep noises\" and isn\u0027t actually caused by any particular error, it seems pretty awkward to use VB2_UI_ERROR_BEEP_ONLY for this case.\n\nI wonder if it\u0027d make sense to split this toggle into two switches instead of just one?  So ui.error_code gets set when we want to show a dialog box, and ui.beep gets set when we want to beep.",
      "parentUuid": "129f2d07_0596f5cd",
      "revId": "bfaa303c27da6675f07b2689ef67b63276deb3ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5be85045_33ade446",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-16T08:00:40Z",
      "side": 1,
      "message": "\u003e I wonder if it\u0027d make sense to split this toggle into two switches instead of just one?\n\nI think I\u0027m okay with either approach. If you prefer this one, let\u0027s go for it. What do you say?",
      "parentUuid": "a5fbaddc_e50b6f93",
      "revId": "bfaa303c27da6675f07b2689ef67b63276deb3ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7459502f_0bbe51ef",
        "filename": "firmware/2lib/2ui.c",
        "patchSetId": 2
      },
      "lineNbr": 336,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-07-16T06:32:20Z",
      "side": 1,
      "message": "How about just unsetting the error here if it is equal to VB2_UI_ERROR_BEEP_ONLY?",
      "range": {
        "startLine": 336,
        "startChar": 4,
        "endLine": 336,
        "endChar": 25
      },
      "revId": "bfaa303c27da6675f07b2689ef67b63276deb3ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}