{
  "comments": [
    {
      "key": {
        "uuid": "7aef3f70_c387c8a1",
        "filename": "scripts/image_signing/make_dev_firmware.sh",
        "patchSetId": 5
      },
      "lineNbr": 228,
      "author": {
        "id": 1135824
      },
      "writtenOn": "2016-12-13T14:34:32Z",
      "side": 1,
      "message": "Hung-Te, this is technically correct, but what\u0027s the recommended way to do so? If I\u0027m not mistaken you\u0027ll have to boot into recovery mode (so the NVRAM spaces aren\u0027t looked) so you can issue the commands to clear the TPM. The easiest way to do this was to let the re-key go through and then boot a recovery image using the dev recovery key. After this change, this is no longer possible (unless people can edit the script I guess...). The other path I know is to modify an official recovery image to give you a shell in recovery+dev mode, but that\u0027s even more obscure... I suppose your answer might be \"factory image\", but I\u0027m not sure that\u0027s a path we\u0027d want or can recommend for general usage? Or am I missing something?",
      "range": {
        "startLine": 228,
        "startChar": 24,
        "endLine": 228,
        "endChar": 52
      },
      "revId": "fefc682bb70d7fd997f4ef0079e8fec0a4937cf7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd6cf3ba_b6e306ee",
        "filename": "scripts/image_signing/make_dev_firmware.sh",
        "patchSetId": 5
      },
      "lineNbr": 228,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2016-12-13T14:43:50Z",
      "side": 1,
      "message": "Hi Mattias\n\n\u003e The easiest way to do this was to let the re-key go through and then boot a recovery image using the dev recovery key\n\n Does that work? I think recovery images should not reset TPM NVSpace.\n\n\u003e I suppose your answer might be \"factory image\", but I\u0027m not sure that\u0027s a path we\u0027d want or can recommend for general usage?\n\nBooting a signed factory shim (i.e., reset shim) is the best solution and I think many developers and partners are using that approach.\n\nWhen I make this change, I was assuming \"booting recovery image won\u0027t work\". If you\u0027re sure current recovery images will reset NV space, I can change this error to warning.",
      "parentUuid": "7aef3f70_c387c8a1",
      "range": {
        "startLine": 228,
        "startChar": 24,
        "endLine": 228,
        "endChar": 52
      },
      "revId": "fefc682bb70d7fd997f4ef0079e8fec0a4937cf7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}