{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d38bd468_63c47612",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1544412
      },
      "writtenOn": "2025-06-13T16:04:54Z",
      "side": 1,
      "message": "verified on Navi (b/423555419).",
      "revId": "93835955d11a2d2541044ef5ab30b48cfd4f2baf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2b09d32_f403aa8b",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 2
      },
      "lineNbr": 88,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-06-17T00:04:51Z",
      "side": 1,
      "message": "I know this is going a bit far for the intent of this patch but I wonder if we shouldn\u0027t take this opportunity to redesign `VbExStreamOpen()` as well. Since we now have an effective way to seek in bytes we don\u0027t really need to pass `start_sector` there anymore, and I don\u0027t know why it ever took `sectors_to_read` in the first place. A stream device (or its underlying implementation) should know on its own where it ends, it shouldn\u0027t need to rely on the caller to tell it that (and in this case the information from the caller is not really trustworthy anyway, it\u0027s just taken from the GPT). As far as I can tell, throughout the various stream implementations this is only used for unnecessary extra range checks â€” code like `simple_stream_read()` shouldn\u0027t need to check if it reads behind the end of the device (which it doesn\u0027t actually know), it should just call `read()` on the underlying implementation and let that return an error if it asked for too much.\n\nIf we reduced the signature of `VbExStreamOpen()` to only take the disk and stream handle, we could finally truly get rid of most of these annoying bytes-to-blocks translations here, and simply seek to `part_start_sector * sector_bytes + offset_from_partition`.\n\n(I know you\u0027d have to edit some of the MTD stuff in depthcharge which you don\u0027t have hardware to test for, but the parts that would be effected by this really look quite simple and straightforward to change.)",
      "revId": "93835955d11a2d2541044ef5ab30b48cfd4f2baf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}