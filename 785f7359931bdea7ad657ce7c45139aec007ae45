{
  "comments": [
    {
      "key": {
        "uuid": "18d9085d_572e1aa1",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 14
      },
      "lineNbr": 123,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-22T10:47:23Z",
      "side": 1,
      "message": "The only reason we expose this function is for testing purposes.  Please put this in 2secdata_private.h or vboot_test.h.",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 123,
        "endChar": 56
      },
      "revId": "785f7359931bdea7ad657ce7c45139aec007ae45",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d119c302_29d42e9f",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 14
      },
      "lineNbr": 123,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-24T20:10:55Z",
      "side": 1,
      "message": "That\u0027ll cause an error in 2secdata_kernel.c because it\u0027s not declared as static.",
      "parentUuid": "18d9085d_572e1aa1",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 123,
        "endChar": 56
      },
      "revId": "785f7359931bdea7ad657ce7c45139aec007ae45",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a5dd129_9c55ce62",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 14
      },
      "lineNbr": 123,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-25T07:30:35Z",
      "side": 1,
      "message": "Not sure what you mean?\n\nTake vb2_check_padding() as an example.  The header is declared in vboot_test.h.  The function itself is in 2rsa.c, which includes vboot_test.h.  Any tests which want to either run the function (vb2_rsa_utility_tests.c) or override the function (vb2_keyblock_fuzzer.c and vb2_preamble_fuzzer.c) also include vboot_test.h.",
      "parentUuid": "d119c302_29d42e9f",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 123,
        "endChar": 56
      },
      "revId": "785f7359931bdea7ad657ce7c45139aec007ae45",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b67c5c1f_1c1a74c7",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 14
      },
      "lineNbr": 123,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-25T17:37:14Z",
      "side": 1,
      "message": "Done.\n\nIn general, I don\u0027t think it\u0027s a good idea to include a test header since it usually contains test-only structs and macros. vboot_test.h looks so far only used for exposing APIs needed by tests. So, I think it\u0027s ok in this case. \n\nHowever, when it grows and somebody may put stuff shared only between tests (e.g. vb2_keyblock_fuzzer.c and vb2_preamble_fuzzer.c) though. Then, the production namespace will be tainted by test declarations.\n\nWe probably should guard it: #ifdef TEST_BUILD #include \u003cvboot_test.h\u003e #endif.",
      "parentUuid": "1a5dd129_9c55ce62",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 123,
        "endChar": 56
      },
      "revId": "785f7359931bdea7ad657ce7c45139aec007ae45",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a14f96d_be50da3a",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 14
      },
      "lineNbr": 123,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-25T23:09:00Z",
      "side": 1,
      "message": "Yes, the intention is to just be a header for APIs that aren\u0027t public but needed by tests. It may not be the best system, it was just good enough for now. Better (but more overhead) would be to have a separate test header per file, e.g. 2secdata_test.h.",
      "parentUuid": "b67c5c1f_1c1a74c7",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 123,
        "endChar": 56
      },
      "revId": "785f7359931bdea7ad657ce7c45139aec007ae45",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}