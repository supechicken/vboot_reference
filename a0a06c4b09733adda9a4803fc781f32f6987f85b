{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ab99df34_a8339ed3",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 78,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-01-07T18:42:44Z",
      "side": 1,
      "message": "Newer version of `vboot_avb_ops_new()` cannot fail.",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f149064_dd96bc00",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 78,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2025-01-29T15:20:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ab99df34_a8339ed3",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c300554e_8b910cb4",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 95,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-01-07T18:42:44Z",
      "side": 1,
      "message": "Doesn\u0027t `!need_verification` imply this?",
      "range": {
        "startLine": 95,
        "startChar": 23,
        "endLine": 95,
        "endChar": 66
      },
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f8e79bfa_89af6cdc",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 95,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2025-01-29T15:20:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c300554e_8b910cb4",
      "range": {
        "startLine": 95,
        "startChar": 23,
        "endLine": 95,
        "endChar": 66
      },
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c00e3d0_59503a0e",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 104,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-01-07T18:42:44Z",
      "side": 1,
      "message": "Shouldn\u0027t you just not rewrite the error and leave it as it is (for the `map()` below) in this case?",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b676f2e_1b21ecfc",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 104,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2025-01-29T15:20:37Z",
      "side": 1,
      "message": "But still I need to ignore some error if we dont need verification. Do you want me to move that logic into `vb2_map_libavb_errors`?",
      "parentUuid": "5c00e3d0_59503a0e",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc0726b8_7b5cf7b8",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 104,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-02-01T02:33:48Z",
      "side": 1,
      "message": "Yes... sorry, I didn\u0027t mean get rid of the whole `switch`. I just meant get rid of the `default:` case.",
      "parentUuid": "7b676f2e_1b21ecfc",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "902e6f25_aa5c4683",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 130,
      "author": {
        "id": 1515687
      },
      "writtenOn": "2025-01-08T10:52:48Z",
      "side": 1,
      "message": "Does checking the VB2_CONTEXT_DEVELOPER_MODE sufficient here to set `green` state?\n\nIIUC, when the firmware is dev-signed, we\u0027d be setting `verifiedbootstate` to `green`.\n\nAs per [libavb integration](https://android.googlesource.com/platform/external/avb/+/refs/heads/main#android-specific-integration):\n```\ngreen: If in LOCKED state and the key used for verification was not set by the end user.\nyellow: If in LOCKED state and the key used for verification was set by the end user.\n```\nI wonder if we\u0027re not falling into `yellow` state for non-MP-signed firmware.\n\nJulius/Jan/Yu-Ping, WDYT?",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8f55448_c09b129b",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 130,
      "author": {
        "id": 1515687
      },
      "writtenOn": "2025-01-08T12:54:34Z",
      "side": 1,
      "message": "I believe Jan already clarified that in b/335901799#comment3, however I\u0027d be grateful if we all could sign-off on that one.",
      "parentUuid": "902e6f25_aa5c4683",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35382fd6_36238e3f",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 130,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-01-08T17:06:48Z",
      "side": 1,
      "message": "Yes, Jan basically summarized what I said there. It doesn\u0027t make sense to try to display firmware verification state in the UI or pass it to the kernel â€” if the firmware is not verified, then it could simply forge all of those measurements anyway. The state reported to Android from AP firmware can only describe kernel verification state, and firmware verification state can only be managed and reported by the GSC (including via remote attestation and DICE certificates, which will contain a measurement for this).",
      "parentUuid": "e8f55448_c09b129b",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "130c7a1e_132d0666",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 140,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-01-07T18:42:44Z",
      "side": 1,
      "message": "I think you can simplify all this to\n```\nint chars \u003d snprintf(params-\u003evboot_cmdline_buffer, params-\u003evboot_cmdline_size,\n                     \"%s %s\u003d%s\", verify_data-\u003ecmdline, VERIFIED_BOOT_PROPERTY_NAME,\n                     need_verification ? PROPERTY_GREEN : PROPERTY_ORANGE);\nif (chars \u003c 0 || chars \u003e\u003d params-\u003evboot_cmdline_size) {\n  VB2_DEBUG(\"ERROR: Command line doesn\u0027t fit provided buffer: %s\\n\",\n            verify_data-\u003ecmdline);\n  return VB2_ERROR_LOAD_PARTITION_WORKBUF; /* is this error really the right one? */\n}\n```\n(Example above would be if you remove the \u0027\u003d\u0027 from the `NAME` constant which seems a bit cleaner.)",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4e644798_4fae9e81",
        "filename": "firmware/2lib/2load_android_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 140,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2025-01-29T15:20:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "130c7a1e_132d0666",
      "revId": "a0a06c4b09733adda9a4803fc781f32f6987f85b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}