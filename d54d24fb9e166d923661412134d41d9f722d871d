{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5d7b9de8_af4d49f3",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-11-28T03:05:10Z",
      "side": 1,
      "message": "+kramasub\n\nWould b/165590952 still be a problem if updating ME in recovery mode?",
      "range": {
        "startLine": 405,
        "startChar": 12,
        "endLine": 405,
        "endChar": 20
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0120ac9_c787425a",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-11-28T11:32:44Z",
      "side": 1,
      "message": "If recovery doesn\u0027t update the ME region, dogfood devices won\u0027t be recoverable without being returned if there\u0027s an incompatibility between ME RO and RW versions.",
      "parentUuid": "5d7b9de8_af4d49f3",
      "range": {
        "startLine": 405,
        "startChar": 12,
        "endLine": 405,
        "endChar": 20
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "259461f3_03f8d1dc",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 1302633
      },
      "writtenOn": "2022-11-28T17:16:18Z",
      "side": 1,
      "message": "When ME region is updated, reboot or shutdown commands dont work most of the times.Factory scripts have been updated to trigger an EC reboot when ME region is updated. In recovery mode, reboot will not work and user has to intervene with Refresh + Power button.",
      "parentUuid": "e0120ac9_c787425a",
      "range": {
        "startLine": 405,
        "startChar": 12,
        "endLine": 405,
        "endChar": 20
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36a6e2ad_1a8108c4",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-11-29T01:08:53Z",
      "side": 1,
      "message": "Okay, since I don\u0027t work on Intel platforms, I\u0027ll leave the decision up to you.",
      "parentUuid": "259461f3_03f8d1dc",
      "range": {
        "startLine": 405,
        "startChar": 12,
        "endLine": 405,
        "endChar": 20
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8bc8f895_c9b119d4",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-11-29T05:58:49Z",
      "side": 1,
      "message": "I think this tradeoff is worthwhile. Recovery (with WP disabled) needing a bit of help to reboot when it\u0027s done is less of an issue than getting stuck with a broken ME RO/RW combination.",
      "parentUuid": "36a6e2ad_1a8108c4",
      "range": {
        "startLine": 405,
        "startChar": 12,
        "endLine": 405,
        "endChar": 20
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71fe254b_2f73e6a8",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 1302633
      },
      "writtenOn": "2022-11-29T16:34:45Z",
      "side": 1,
      "message": "Two things need to be aware of/addressed before taking this tradeoff:\n1) For the devices deployed in the lab WP is disabled. So any lab repair scripts using recovery has to be updated to use the EC reboot. This will impact all the previous generations of Intel devices(Dedede, Volteer, probably Puff) deployed in the lab.\n2) For the dogfood devices, concerned C\u0026F doc should be updated for the benefit of the dogfooders when they are recovering the device.",
      "parentUuid": "8bc8f895_c9b119d4",
      "range": {
        "startLine": 405,
        "startChar": 12,
        "endLine": 405,
        "endChar": 20
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3afc19b9_53cbb39c",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 405,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-11-30T00:41:43Z",
      "side": 1,
      "message": "\u003e Two things need to be aware of/addressed before taking this tradeoff:\n\u003e 1) For the devices deployed in the lab WP is disabled. So any lab repair scripts using recovery has to be updated to use the EC reboot. This will impact all the previous generations of Intel devices(Dedede, Volteer, probably Puff) deployed in the lab.\n\nThey fall back to updating over CCD if necessary. In practice,failing to reboot seems fairly rare in my experience on puff and nissa on recent FW. Further, puff doesn\u0027t even set the quirk in its pinned FW and has seemingly been fine.\n\n\u003e 2) For the dogfood devices, concerned C\u0026F doc should be updated for the benefit of the dogfooders when they are recovering the device.\n\nDogfooders don\u0027t read care and feeding docs. I would expect them to be able to turn things off and on again.\n\nThe trade-off is that since the current archive check is a no-op, any FW updates on from the AP using futility (which is the recommendation) will trigger this quirk, resulting in the ME RO never being updated on DUTs without special care to account for this. I would argue that this is quite high risk for testing with an incorrect and/or inconsistent FW. If you want to try making this quirk better targeted, please do, but it is too broken in its current form.",
      "parentUuid": "71fe254b_2f73e6a8",
      "range": {
        "startLine": 405,
        "startChar": 12,
        "endLine": 405,
        "endChar": 20
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "043a9a27_768ff7d3",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 409,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-11-28T03:05:10Z",
      "side": 1,
      "message": "How about `!\u003d TRY_UPDATE_AUTO` to be even clearer?",
      "range": {
        "startLine": 409,
        "startChar": 21,
        "endLine": 409,
        "endChar": 38
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f616e057_80599cba",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 409,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-11-28T11:32:44Z",
      "side": 1,
      "message": "`TRY_UPDATE_DEFERRED_HOLD` probably should trigger the quirk too since it\u0027s used for autoupdate; `TRY_UPDATE_DEFERRED_APPLY` only switches which RW to try next, so either way is fine for it. Excluding `TRY_UPDATE_OFF` seemed like the simplest option to achieve that coverage.",
      "parentUuid": "043a9a27_768ff7d3",
      "range": {
        "startLine": 409,
        "startChar": 21,
        "endLine": 409,
        "endChar": 38
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8feeedb4_4c9431f2",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 2
      },
      "lineNbr": 409,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-11-29T01:08:53Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f616e057_80599cba",
      "range": {
        "startLine": 409,
        "startChar": 21,
        "endLine": 409,
        "endChar": 38
      },
      "revId": "d54d24fb9e166d923661412134d41d9f722d871d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}