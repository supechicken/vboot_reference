{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5b57d957_7d3a2beb",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 328,
      "author": {
        "id": 1512562
      },
      "writtenOn": "2022-07-05T09:02:09Z",
      "side": 1,
      "message": "In `futility.h` there are definitions of `ERROR()`, `WARN()`, `INFO()`, and `STATUS()`. Should we use them instead of just printing error to `stderr`? Maybe it would be nice to /sed/ everything?",
      "range": {
        "startLine": 328,
        "startChar": 4,
        "endLine": 328,
        "endChar": 47
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1007a662_3696dfd5",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 328,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-07-06T03:26:19Z",
      "side": 1,
      "message": "I guess that depends on whether we want the `ERROR: __func__` prefix.",
      "parentUuid": "5b57d957_7d3a2beb",
      "range": {
        "startLine": 328,
        "startChar": 4,
        "endLine": 328,
        "endChar": 47
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8d7c37b_0f17d0a6",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 328,
      "author": {
        "id": 1512562
      },
      "writtenOn": "2022-07-06T08:22:55Z",
      "side": 1,
      "message": "Hmm. I think, that it would be more consistent, and would make debugging faster.\nIf we do not want tag and function name in the output, then I think we should at least provide `ERROR/WARN/INFO/STATUS_RAW()` macros to get rid of writing `fprintf(stderr,......)` each time. From my point of view, it\u0027s even better, when all messages are printed using macros, because it\u0027s easier to spot them in the code.",
      "parentUuid": "1007a662_3696dfd5",
      "range": {
        "startLine": 328,
        "startChar": 4,
        "endLine": 328,
        "endChar": 47
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea401240_5ba3d951",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 328,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-07-06T08:40:08Z",
      "side": 1,
      "message": "jwerner@/hungte@, what do you think?",
      "parentUuid": "d8d7c37b_0f17d0a6",
      "range": {
        "startLine": 328,
        "startChar": 4,
        "endLine": 328,
        "endChar": 47
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c077a97c_b0ba9e4e",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 328,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2022-07-12T13:57:34Z",
      "side": 1,
      "message": "We already changed all debug functions to VB2_DEBUG, so it\u0027s probably fine to use ERROR() WARN() etc.\n\nSee if Julius has other concerns?",
      "parentUuid": "ea401240_5ba3d951",
      "range": {
        "startLine": 328,
        "startChar": 4,
        "endLine": 328,
        "endChar": 47
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "893ab540_2c5a8195",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 328,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2022-07-12T23:38:23Z",
      "side": 1,
      "message": "Yes, generally those macros should be used instead of raw fprintf, unless you actually need to suppress the prefix (e.g. when using multiple calls to print on the same line, not here). You don\u0027t need to go fix all the existing code, though (unless you want to).",
      "parentUuid": "c077a97c_b0ba9e4e",
      "range": {
        "startLine": 328,
        "startChar": 4,
        "endLine": 328,
        "endChar": 47
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a27427bc_a516784c",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 360,
      "author": {
        "id": 1512562
      },
      "writtenOn": "2022-07-05T09:02:09Z",
      "side": 1,
      "message": "I\u0027m wondering if we should require caller to provide path with directory slash (/) character. Then it would be easier to use `--keyset` for more cases, e.g.:\n- `--keyset \"${DEVKEYS}/recovery_\"`\n- `--keyset \"${DEVKEYS}/installer_\"`\n- `--keyset \"${DEVKEYS}/minios_\"`\nOr path deduction could be more complicated(?). We could first load `%skernel.keyblock`, and if it fails, then try to load `%s/kernel.keyblock`.\nWhat do you think?",
      "range": {
        "startLine": 360,
        "startChar": 23,
        "endLine": 360,
        "endChar": 41
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a474615_c177bc8e",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 360,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-07-06T03:26:19Z",
      "side": 1,
      "message": "Hmmm... good question. I\u0027m fine with either approach, but slightly prefer the simpler one.",
      "parentUuid": "a27427bc_a516784c",
      "range": {
        "startLine": 360,
        "startChar": 23,
        "endLine": 360,
        "endChar": 41
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c598769_a2e41e2d",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 360,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2022-07-12T13:57:34Z",
      "side": 1,
      "message": "I think most people would not want to add \u0027/\u0027 for directories.\n\nIf you really want to support keyset with prefixes, try stat(), and add / if that is a folder.",
      "parentUuid": "9a474615_c177bc8e",
      "range": {
        "startLine": 360,
        "startChar": 23,
        "endLine": 360,
        "endChar": 41
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c9cd804_df8b3ab4",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 360,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2022-07-12T23:38:23Z",
      "side": 1,
      "message": "No, definitely don\u0027t require the slash please. If you want to enable using it like that, I like the stat() idea.",
      "parentUuid": "7c598769_a2e41e2d",
      "range": {
        "startLine": 360,
        "startChar": 23,
        "endLine": 360,
        "endChar": 41
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0dfe7c5f_5254933c",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 373,
      "author": {
        "id": 1512562
      },
      "writtenOn": "2022-07-05T09:02:09Z",
      "side": 1,
      "message": "`FILE_TYPE_KERN_PREAMBLE` signing implementation requires only private key, when `FILE_TYPE_RAW_KERNEL` requires both: private key and keyblock. Does anyone know about any occurences, where `FILE_TYPE_KERN_PREAMBLE` is used without keyblock? In tests always both are used. Should be make keyblock param mandatory?",
      "range": {
        "startLine": 373,
        "startChar": 1,
        "endLine": 373,
        "endChar": 30
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0dbad06_6ed9ebe1",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 2
      },
      "lineNbr": 373,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2022-07-12T23:38:23Z",
      "side": 1,
      "message": "Does it actually work when you call it like that? I don\u0027t think you can sign a kernel without a keyblock. Someone probably just forgot to check for that correctly in the option parsing but I assume it would still fail at some later point anyway.",
      "parentUuid": "0dfe7c5f_5254933c",
      "range": {
        "startLine": 373,
        "startChar": 1,
        "endLine": 373,
        "endChar": 30
      },
      "revId": "83ac105d41ba3525903a7a3f5707c65ef5de5a80",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}