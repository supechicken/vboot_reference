{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7813f439_dd9ce13c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-20T08:56:21Z",
      "side": 1,
      "message": "baseboard-dedede",
      "range": {
        "startLine": 11,
        "startChar": 39,
        "endLine": 11,
        "endChar": 45
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc5eb4f6_207cf29e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1479892
      },
      "writtenOn": "2024-09-20T09:52:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7813f439_dd9ce13c",
      "range": {
        "startLine": 11,
        "startChar": 39,
        "endLine": 11,
        "endChar": 45
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "80e44123_b9081db1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1487622
      },
      "writtenOn": "2024-09-20T00:42:25Z",
      "side": 1,
      "message": "+Subrata since this is related to b/359655788",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b8a9bbf3_900ec1a7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-09-20T08:45:23Z",
      "side": 1,
      "message": "Will we have lots of platform-specific hacks in the future?\n\nI wonder if this should be moved to something inside cbfstool, or the host/lib/cbfstool.c to make sure other callsites can get the same platform data easily, not just the updater.",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a28b11a0_4855a036",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-20T09:35:41Z",
      "side": 1,
      "message": "CB:69710 landed in chromium as CL:4040731 in 15255 and we\u0027ve cherry-picked it for nissa. Intel boards without that patch are (ignoring boards older than hatch): hatch, puff, dedede, volteer, brya. Unless we somehow start manufacturing old models of these boards, I don\u0027t think there\u0027s a high chance to have many hacks here in future. For new models we can always cherry-pick CL:4040731 to their firmware branches.\n\nOn the other hand, why would other call sites need to get the data?",
      "parentUuid": "b8a9bbf3_900ec1a7",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "60151c4e_86735e52",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1479892
      },
      "writtenOn": "2024-09-20T09:52:03Z",
      "side": 1,
      "message": "RMA U-disk factory_install.sh will call \"firmware --force --mode\u003dfactory_install --quirks\u003dunlock_csme\" to flash unlocked firmware in CL:5208375.",
      "parentUuid": "a28b11a0_4855a036",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19f27375_f56fbd20",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-20T13:03:57Z",
      "side": 1,
      "message": "@phoebewang@chromium.org Would CL:5208375 have any impact on the factory flow of awasuki (dedede)? I don\u0027t see that CL being cherry-picked to dedede\u0027s factory branch though.",
      "parentUuid": "60151c4e_86735e52",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "062b5289_92ed2545",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-09-20T13:08:29Z",
      "side": 1,
      "message": "\u003e On the other hand, why would other call sites need to get the data?\n\nWell, it\u0027s a simple call to get the platform, so anyone calling cbfstool will encounter the same problem. Examples:\n\n- https://source.chromium.org/chromium/infra/infra_superproject/+/main:infra/go/src/infra/cros/recovery/internal/components/cros/firmware/v3_programmer.go?q\u003dCONFIG_IFD_CHIPSET\u0026ss\u003dchromium\n\n- src/platform/dev/src/go.chromium.org/chromiumos/test/provision/v2/cros-fw-provision/service/firmwareservice.go\n\nBut if it\u0027s for known old platforms then yes we may have the hacks.",
      "parentUuid": "19f27375_f56fbd20",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "616e31fb_144a3020",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-20T13:24:17Z",
      "side": 1,
      "message": "That\u0027s really bad. We shouldn\u0027t have any duplicate hacks in the lab code for `unlock_csme`. What the lab needs is actually \"trying to unlock CSME if futility supports it for the running device\". Right now the lab needs the hack because `futility --quirks unlock_csme` would fail on unsupported devices. Therefore, I think the correct solution to this problem is to add (or replace `unlock_csme` with) `--quirks try_unlock_csme`, which would be a no-op on unsupported Intel devices.",
      "parentUuid": "062b5289_92ed2545",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af49a7f3_c3505ea9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1302633
      },
      "writtenOn": "2024-09-20T17:03:27Z",
      "side": 1,
      "message": "Awasuki is a new model and as mentioned by yupingso@, CL:4040731 can be cherry-picked.\n\nBut I am trying to understand the point of this unlock_csme quirk.\n* For all the existing/older dedede models, pre-flashed FW has CSME locked down, ME starts in Production Mode on first factory boot and x86(futility or ifdtool) cannot unlock ME. x86 has read-only access to the SI_DESC \u0026 SI_ME regions after that point.\n* For all the newer models, ME is unlocked and is not preserved either in FMAP. So x86 can go ahead and update the SI_DESC/SI_ME regions.\n\nSo it is not clear what we are trying to unlock with this quirk.",
      "parentUuid": "616e31fb_144a3020",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "060c6594_84e44821",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1509762
      },
      "writtenOn": "2024-09-23T09:40:22Z",
      "side": 1,
      "message": "Re @yupingso@chromium.org\nIIUC, Dedede uses the factory shim from ToT and uses the test image from the factory branch.\nTherefore, CL:5208375 will impact them. According to the code logic in the factory shim,\n- In pre-PVT, ME will not be locked so futility will be invoked with quirks `unlock_csme`.\n- In PVT, since dedede does not follow flexible EOM, ME will be locked in the first boot. Therefore, futility won\u0027t be invoked with `unlock_csme`.",
      "parentUuid": "af49a7f3_c3505ea9",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ea1a4600_9a01bc81",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1479892
      },
      "writtenOn": "2024-09-25T08:29:26Z",
      "side": 1,
      "message": "Test on newest dedede factory R89-13683.584.0:\n./chromeos-firmwareupdate --force --mode\u003dfactory_install --quirks\u003dunlock_csme\nERROR: setup_config_quirks: Unknown quirk: unlock_csme\n\nIt seems that the factory image futility does not support unlock_csme, so there is no need to cherry-pick CL:5208375 to the factory branch.\n\nAnyway, this patch can solve the RMA installation process. Can we merge this patch?",
      "parentUuid": "060c6594_84e44821",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "343f8efb_d6765f9a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-25T12:16:08Z",
      "side": 1,
      "message": "Can we cherry pick CL:4040731 to dedede firmware branch to resolve the problem? @phoebewang@chromium.org A follow up question: Does CL:5208375 affect RMA process for existing dedede models, or only the new model Awasuki?",
      "parentUuid": "ea1a4600_9a01bc81",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83b65a60_ed862383",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1302633
      },
      "writtenOn": "2024-09-26T03:40:47Z",
      "side": 1,
      "message": "CL:4040731 can be cherry-picked. For now it is hitting merge conflict. Some dependencies may need to be cherry-picked too.\n\nRegarding CL:5208375, for all existing dedede models CSME is locked down and hence unlock_csme quirk will not be applied. Since CSME is unlocked in Awasuki, unlock_csme quirk will be applied.",
      "parentUuid": "343f8efb_d6765f9a",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff51a45e_65d342b3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-30T02:05:17Z",
      "side": 1,
      "message": "\u003e Regarding CL:5208375\n\nThanks. So we don\u0027t need this patch. CL:4040731 should solve the issue.",
      "parentUuid": "83b65a60_ed862383",
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f8061f2_e1581f44",
        "filename": "futility/platform_csme.c",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-20T08:56:21Z",
      "side": 1,
      "message": "`firmware branches without CB:69710`",
      "range": {
        "startLine": 137,
        "startChar": 65,
        "endLine": 137,
        "endChar": 79
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "def1f036_065bc3f0",
        "filename": "futility/platform_csme.c",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 1479892
      },
      "writtenOn": "2024-09-20T09:52:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5f8061f2_e1581f44",
      "range": {
        "startLine": 137,
        "startChar": 65,
        "endLine": 137,
        "endChar": 79
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1df31a2a_cd02c96e",
        "filename": "futility/platform_csme.c",
        "patchSetId": 1
      },
      "lineNbr": 139,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-20T08:56:21Z",
      "side": 1,
      "message": "`the board name`",
      "range": {
        "startLine": 139,
        "startChar": 16,
        "endLine": 139,
        "endChar": 23
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f0e56980_e5004d9a",
        "filename": "futility/platform_csme.c",
        "patchSetId": 1
      },
      "lineNbr": 139,
      "author": {
        "id": 1479892
      },
      "writtenOn": "2024-09-20T09:52:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1df31a2a_cd02c96e",
      "range": {
        "startLine": 139,
        "startChar": 16,
        "endLine": 139,
        "endChar": 23
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b19ac91d_c33d2192",
        "filename": "futility/platform_csme.c",
        "patchSetId": 1
      },
      "lineNbr": 165,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-20T08:56:21Z",
      "side": 1,
      "message": "```\nif (!ifd_path)\n    return NULL;\n\nconst struct match {\n    const char *pattern;\n    const char *platform;\n} matches[] \u003d {\n    { \"/baseboard-dedede/\", \"jsl\" },\n    { \"/nissa/\", \"adl\" },\n};\n\nfor (int i \u003d 0; i \u003c ARRAY_SIZE(matches); i++) {\n    const struct match *m \u003d \u0026matches[i];\n    if (strstr(ifd_path, m-\u003epattern)) {\n        VB2_DEBUG(\"Use platform \u0027%s\u0027 since descriptor path contains \u0027%s\u0027\\n\",\n                  m-\u003eplatform, m-\u003epattern);\n        ASPRINTF(\u0026platform, m-\u003eplatform);\n    }\n}\n```",
      "range": {
        "startLine": 155,
        "startChar": 1,
        "endLine": 165,
        "endChar": 2
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "33ad6041_149d29a3",
        "filename": "futility/platform_csme.c",
        "patchSetId": 1
      },
      "lineNbr": 165,
      "author": {
        "id": 1479892
      },
      "writtenOn": "2024-09-20T09:52:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b19ac91d_c33d2192",
      "range": {
        "startLine": 155,
        "startChar": 1,
        "endLine": 165,
        "endChar": 2
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "435b0c90_6f693ba2",
        "filename": "futility/platform_csme.c",
        "patchSetId": 1
      },
      "lineNbr": 168,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-09-20T08:56:21Z",
      "side": 1,
      "message": "`free(ifd_path);`",
      "range": {
        "startLine": 167,
        "startChar": 1,
        "endLine": 168,
        "endChar": 17
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4385914a_7de68b91",
        "filename": "futility/platform_csme.c",
        "patchSetId": 1
      },
      "lineNbr": 168,
      "author": {
        "id": 1479892
      },
      "writtenOn": "2024-09-20T09:52:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "435b0c90_6f693ba2",
      "range": {
        "startLine": 167,
        "startChar": 1,
        "endLine": 168,
        "endChar": 17
      },
      "revId": "d96707f9515b742672d443b3c975994c2942494a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}