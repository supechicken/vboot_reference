{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c9c5ef26_3579f4c5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3487009
      },
      "writtenOn": "2024-10-30T14:21:38Z",
      "side": 1,
      "message": "Automatically set CQ+1 by AutoRunner. See go/chromeos-cqw:auto-runner-doc for details. \nReport Bugs/Feedback: go/cros-auto-runner-bug. \n",
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4283fc78_18fe073f",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1512562
      },
      "writtenOn": "2024-10-30T14:25:36Z",
      "side": 1,
      "message": "Why is this necessary? Shouldn\u0027t it be on the `/vendor` partition like the rest of `vboot` tools? Or is it needed by some `/system` project which does not want to use SELinux `system_executes_vendor_violators` attribute?",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e0e9486_d4aedcc8",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1390635
      },
      "writtenOn": "2024-10-30T14:29:49Z",
      "side": 1,
      "message": "Correct. I\u0027m attempting to use it from `ec_crash_collector` (which is on /system) to get the bios version. \n\nI assume `system_executes_vendor_violators` should be avoided, but I\u0027m fine adding this exception that\u0027s preferred.",
      "parentUuid": "4283fc78_18fe073f",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "257bb526_806afcae",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1512562
      },
      "writtenOn": "2024-10-30T14:34:11Z",
      "side": 1,
      "message": "I have no issue with having `crossystem` in `/system/bin`, however this is a vendor binary and should be on `/vendor`. I\u0027d ask Android folks about this as I\u0027m not knowledgeable enough to be the judge here.",
      "parentUuid": "8e0e9486_d4aedcc8",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6edee13c_06a6bab3",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1004789
      },
      "writtenOn": "2024-10-30T15:56:36Z",
      "side": 1,
      "message": "\u003e I assume system_executes_vendor_violators should be avoided, but I\u0027m fine adding this exception that\u0027s preferred.\n\ni don\u0027t think that\u0027s what will happen --- stuff on /system will run the /system/bin copy while stuff on /vendor will run the /vendor/bin copy.\n\nit\u0027s not that uncommon to have binaries in both bins --- look at toybox and mksh and so on (and feel free to copy \u0026 paste from their .bp files; that\u0027s how everything works around here :-) ).",
      "parentUuid": "257bb526_806afcae",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4543616a_c423c538",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1512562
      },
      "writtenOn": "2024-10-30T16:02:14Z",
      "side": 1,
      "message": "\u003e stuff on /system will run the /system/bin copy while stuff on /vendor will run the /vendor/bin copy.\n\nOh, good to know. Are there any resources I could look into on stuff like that?\n\n\u003e it\u0027s not that uncommon to have binaries in both bins\n\nOk, then I do not have any issues with marking this as `vendor_available` as long as both will be present. ;-)",
      "parentUuid": "6edee13c_06a6bab3",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e637d494_5798dfbc",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1004789
      },
      "writtenOn": "2024-10-30T17:28:34Z",
      "side": 1,
      "message": "\u003e Oh, good to know. Are there any resources I could look into on stuff like that?\n\ni don\u0027t know of any docs, but +jiyong might...",
      "parentUuid": "4543616a_c423c538",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c989bf5f_61db25af",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1506471
      },
      "writtenOn": "2024-10-31T01:07:47Z",
      "side": 1,
      "message": "We seldom have two copies of the same binary in /system and /vendor. \n\nHi Jakub, I find it hard to understand the below. Could you elaborate?\n\n\u003e however this is a vendor binary and should be on /vendor\n\nAre you saying it is specific to the underlying hardware? (ex: partners have to implement it differently depending on which hardware they use)\n\nAnother question is how is this binary used from its clients? Do they just fork/exec this and consume its stdout?",
      "parentUuid": "e637d494_5798dfbc",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97f9b441_e4df68fe",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1512562
      },
      "writtenOn": "2024-10-31T10:33:04Z",
      "side": 1,
      "message": "Hi Jiyong,\n\n\u003e Are you saying it is specific to the underlying hardware? (ex: partners have to implement it differently depending on which hardware they use)\n\nNo, there is only arch-dependent implementation difference for ARM and x86. There is no point in extending `crossystem` by partners. I just assumed that `/system` should contain only binaries which are common to the Android ecosystem and not just to vendor/partner. And also looking at that all vboot (and related like flashrom, cbfstool etc.) binaries are in `/vendor` right now I assumed it\u0027s the preferred configuration. However, as I said, I\u0027m not knowledgeable enough in this topics to decisively dictate how it should be done, so thank you Elliott and Jiyong for your insights. :D\n\n\u003e Another question is how is this binary used from its clients? Do they just fork/exec this and consume its stdout?\n\nSome projects `exec*()` it and collect stdout/err, some use it as a static (.a) library.",
      "parentUuid": "c989bf5f_61db25af",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c869e0f8_5f0d36e7",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1004789
      },
      "writtenOn": "2024-10-31T13:22:13Z",
      "side": 1,
      "message": "i think the interesting question is \"who\u0027s calling?\". if you have callers (which includes \"the shell\") from /system, then you need to be in system; if you have callers from /vendor, then you need to be in vendor. this means you can sometimes legitimately need to be in both (like the toybox and mksh examples i gave earlier), but it is rare (as jiyong points out).\n\ni misunderstood your earlier \"this is a vendor binary\" to mean \"this needs to be run by code /vendor\". re-reading it looks like you\u0027ve only ever admitted to needing to be called by code on /system (in which case too you should be on the system partition).\n\n\"vendor binaries\" in the Android sense of \"you need to go in /vendor/bin\" is better read as \"this is not google code\". your code is google code, and will be on all your devices, so i think you only need to be in /system.\n\nif you\u0027re just trying to avoid being on all phones too, say, then just stay out of the the shell-and-utilities list of \"everyone gets these tools\" binaries. make sure you\u0027re only added to the system image by something that\u0027s only for your products.",
      "parentUuid": "97f9b441_e4df68fe",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e295fc06_db1e5c6a",
        "filename": "Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 408,
      "author": {
        "id": 1506471
      },
      "writtenOn": "2024-11-01T01:26:39Z",
      "side": 1,
      "message": "Thanks Jakub for the answers; very helpful. I am sorry if all these system/vendor distinctions have confused you. In the end, all that matters is updatability. That\u0027s the whole purpose of the system/vendor separation. It\u0027s NOT about code ownership, hiding proprietary code, or anything else. We need to make sure that device makers can upgrade to the new system partition without having to touch/upgrade the vendor part. Please use your best judge under this \"requirement\".\n\n------------\n\nIf we have crossystem both in system and vendor, it means we could have two different implementations of crossystem on the device. The one in the system partition is new and the one in the vendor partition could be (years) old. Whether this discrepancy is okay or not depends on the very nature of crossystem. If such a case is not desirable for you, you need to keep it only in one place. And of course, having two copies is bad for syshealth as well.\n\nWhen you are going to have one copy of it, where to put it is actually a second-order issue. What matters more is how will you provide stable interface to your clients. If you put the binary in the system partition, you\u0027d need provide a stable interface for your clients in the vendor partition. If you put it in the vendor partition, the interface towards system should be stable.\n\nIn either case, the interface of crossystem is the cmdline parameters and the exact output from stdout/err. As you know, these types of interfaces are hard to keep in a backwards compatible manner; you need to be very careful when extending it.\n\nSo, in Android, we don\u0027t recommend using cmdline/stdout as a cross-domain interface. A more common approach is making it a system service and let your clients talk to it over AIDL, instead of fork/exec\u0027ing it. AIDL helps you keep the protocol backwards compatible.",
      "parentUuid": "c869e0f8_5f0d36e7",
      "range": {
        "startLine": 408,
        "startChar": 4,
        "endLine": 408,
        "endChar": 27
      },
      "revId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "Submit requirement for the \u0027Code-Review\u0027 label"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1 AND -label:Code-Review\u003dMIN"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1 AND -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1","label:Code-Review=MIN"]}
      },
      "patchSetCommitId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "No-Unresolved-Comments",
        "description": {
          "value": "Changes that have unresolved comments are not submittable. Unless overridden with Unresolved-Comment-Reason: \u003creason\u003e line in change message."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "has:unresolved"
          }
        },
        "submittabilityExpression": {
          "expressionString": "-has:unresolved"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "message:\"^.*Unresolved-Comment-Reason:.*\""
          }
        },
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"has:unresolved"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["has:unresolved"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-has:unresolved"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"message:\"^.*Unresolved-Comment-Reason:.*\""},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "patchSetCommitId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval. Using a trusted device is required, see go/gerrit-onboarding#review-enforcement."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforced_gerrit"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforcement-satisfied_gerrit"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {
        "value": true
      }
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI or human verified the change"
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "-branch:refs/meta/config"
          }
        },
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-branch:refs/meta/config"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["branch:refs/meta/config"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "091e23ca7716a667701cc5281f9889aa48ce8967",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}