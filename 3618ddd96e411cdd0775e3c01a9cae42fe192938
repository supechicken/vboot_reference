{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0f8f1828_3b094c15",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-11T03:38:32Z",
      "side": 1,
      "message": "nit: `I`",
      "range": {
        "startLine": 7,
        "startChar": 5,
        "endLine": 7,
        "endChar": 6
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0948c03c_6acfe738",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 192,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-11T03:38:32Z",
      "side": 1,
      "message": "`GptGetUniqueFromName(...)`\n\nThen `ret` can be removed.",
      "range": {
        "startLine": 192,
        "startChar": 5,
        "endLine": 192,
        "endChar": 8
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c1bf433_3eeb6c44",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-11T03:38:32Z",
      "side": 1,
      "message": "There\u0027s already `GuidToStr`.",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cf7e707_cb89a0c3",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-10-11T10:17:03Z",
      "side": 1,
      "message": "I tried to use it, but libpayload does not contain that symbol. I thought about copy GuidToStr function, but it seems to be a little to much for just one function. What do you think?",
      "parentUuid": "3c1bf433_3eeb6c44",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8cc23919_0255618c",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-11T22:58:43Z",
      "side": 1,
      "message": "Duplicate code is not good. We can move `GuidToStr` (and `StrToGuid` for consistency) declaration from vboot_host.h to gpt_misc.h, and move implementation to cgptlib.c. Vboot\u0027s UTILLIB is also linked with FWLIB, so that way the functions can be shared between both firmware and the cgpt tool.\n\nPlease do the refactoring (i.e. moving the functions) in a separate CL prior to this one. Thanks.",
      "parentUuid": "4cf7e707_cb89a0c3",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2083c840_56e84e38",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-10-14T09:49:20Z",
      "side": 1,
      "message": "It seems that `UTF8ToUTF16` from cgpt_common.c and `UTF8ToUCS2` from cgptlib_internal.c have the same functionality. What do you think of moving `UTF8ToUTF16` and `UTF16ToUTF8\u0027 to cgptlib as well? And maybe change the return value to size of converted string?",
      "parentUuid": "8cc23919_0255618c",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d5e7519_30183928",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-14T12:02:21Z",
      "side": 1,
      "message": "Sure, we should have done that. However, from Julius\u0027 [comment](https://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650810/3/firmware/lib/cgptlib/include/cgptlib_internal.h#185), he thinks we don\u0027t even need `UTF8ToUCS2` for avb. So, maybe we can move only `GuidToStr`/`StrToGuid` for now, and we\u0027ll see if we can get rid of `UTF8ToUCS2`.",
      "parentUuid": "2083c840_56e84e38",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e2e2c25_96cf65de",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-10-14T12:05:48Z",
      "side": 1,
      "message": "Yes, that makes more sense",
      "parentUuid": "1d5e7519_30183928",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41a47782_f3e9014c",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-10-15T08:24:47Z",
      "side": 1,
      "message": "Yu-Ping, there is a problem with porting `StrToGuid()` to firmware due to the fact that there is no `sscanf()` in FW libs. Do you know maybe how it can be workarounded?",
      "parentUuid": "9e2e2c25_96cf65de",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a22dd795_6aea9128",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-15T09:06:15Z",
      "side": 1,
      "message": "As it seems non-trivial to implement `sscanf` in FW, how about implementing the parsing by ourselves? Something like:\n\n```\nint hex2int(const char *str, size_t maxlen)\n{\n    const char *end \u003d str + maxlen;\n    int res \u003d 0;\n    while (str \u003c end \u0026\u0026 *str) {\n        int digit \u003d (int)*str - \u00270\u0027;\n        if (digit \u003c 0 || digit \u003e 9)\n            return -1;\n        res \u003d (res \u003c\u003c 4) + digit;\n        str++;\n    }\n    return res;\n}\n```",
      "parentUuid": "41a47782_f3e9014c",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1dc7b409_8f2b8503",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-10-15T09:29:49Z",
      "side": 1,
      "message": "Sure, we can do it. But it makes me wonder if it really makes sense to put all this code into FW, just to avoid duplication of one `snprintf()`.",
      "parentUuid": "a22dd795_6aea9128",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8bd93a54_02d15d1c",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 4
      },
      "lineNbr": 200,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-15T09:32:51Z",
      "side": 1,
      "message": "Doesn\u0027t seem worth it to me. For the `snprintf` call arguments here, I\u0027d still prefer using field names like `le32toh(guid.u.Uuid.time_low)` instead of `guid.u.raw`.",
      "parentUuid": "1dc7b409_8f2b8503",
      "range": {
        "startLine": 195,
        "startChar": 1,
        "endLine": 200,
        "endChar": 66
      },
      "revId": "3618ddd96e411cdd0775e3c01a9cae42fe192938",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}