{
  "comments": [
    {
      "key": {
        "uuid": "b486420a_7bfa12db",
        "filename": "host/arch/x86/lib/crossystem_arch.c",
        "patchSetId": 2
      },
      "lineNbr": 199,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-06-03T09:42:06Z",
      "side": 0,
      "message": "Do we have any non-AUE devices which don\u0027t set this value?  Maybe we can just get rid of this conditional?  Looks like we started setting the flag in 2015 with http://review.coreboot.org/8655.\n\nSame goes for the ARM CL.",
      "range": {
        "startLine": 199,
        "startChar": 18,
        "endLine": 199,
        "endChar": 43
      },
      "revId": "c54c0cd27e995444e2f1014ee60abef7eb04bdee",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "687fce80_6aaf3110",
        "filename": "host/arch/x86/lib/crossystem_arch.c",
        "patchSetId": 2
      },
      "lineNbr": 199,
      "author": {
        "id": 1330845
      },
      "writtenOn": "2020-06-03T15:00:20Z",
      "side": 0,
      "message": "Yeah, there\u0027s still plenty of devices (non-AUE) which don\u0027t have this flag. E.g., samus (there\u0027s many more tho).",
      "parentUuid": "b486420a_7bfa12db",
      "range": {
        "startLine": 199,
        "startChar": 18,
        "endLine": 199,
        "endChar": 43
      },
      "revId": "c54c0cd27e995444e2f1014ee60abef7eb04bdee",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "034918c3_c10fc7cb",
        "filename": "host/arch/x86/lib/crossystem_arch.c",
        "patchSetId": 2
      },
      "lineNbr": 199,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-06-09T03:18:31Z",
      "side": 0,
      "message": "Hmm, okay.  Actually, I\u0027m a little confused at why this even works.  Do our newer X86 devices even have nvdata in CMOS?  This function exits with failure before the mosys/flashrom call executes if VbCmosWrite fails.\n\nWould it be so bad to call vb2_write_nv_storage_flashrom() regardless of whether the device has the VBOOT2 flag set?  We aren\u0027t checking the return value of that function anyways.  (Or maybe it\u0027d be really slow?)",
      "parentUuid": "687fce80_6aaf3110",
      "range": {
        "startLine": 199,
        "startChar": 18,
        "endLine": 199,
        "endChar": 43
      },
      "revId": "c54c0cd27e995444e2f1014ee60abef7eb04bdee",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "84d79b5b_eb77a5d7",
        "filename": "host/arch/x86/lib/crossystem_arch.c",
        "patchSetId": 2
      },
      "lineNbr": 199,
      "author": {
        "id": 1330845
      },
      "writtenOn": "2020-06-09T03:53:56Z",
      "side": 0,
      "message": "On newer x86 devices, we store in both CMOS and SPI flash. The SPI flash is a backup copy.\n\nOn older x86 devices, there is no region even assigned to NVDATA in the AP SPI flash. Here is on the samus on my desk:\n\nlocalhost ~ # flashrom -i RW_NVRAM:/tmp/nvdata.bin -r                                                                                                                                                                                                                                            \nflashrom v0.9.9  : 556e4784 : Jun 06 2020 12:46:10 UTC on Linux 4.14.183-15611-g57b3504c783e (x86_64)\nflashrom v0.9.9  : 556e4784 : Jun 06 2020 12:46:10 UTC on Linux 4.14.183-15611-g57b3504c783e (x86_64)\nCalibrating delay loop... OK.\ncoreboot table found at 0x7ce3a000.\nFound chipset \"Intel Broadwell U Premium\". Enabling flash write... SPI Configuration is locked down.\nOK.\nInvalid entry specified: RW_NVRAM\nFAILED\n\nSo I think we should keep the behavior as-is.",
      "parentUuid": "034918c3_c10fc7cb",
      "range": {
        "startLine": 199,
        "startChar": 18,
        "endLine": 199,
        "endChar": 43
      },
      "revId": "c54c0cd27e995444e2f1014ee60abef7eb04bdee",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}