{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d7059dfb_8f5a2200",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 3
      },
      "lineNbr": 318,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2025-02-03T12:49:40Z",
      "side": 1,
      "message": "Should be load_bytes. No need to read more than necessary.",
      "revId": "cfa8c0ea1c17a44f345c0f0be68ee2308fa3498c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ce4b3bf_62290ad8",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 3
      },
      "lineNbr": 323,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2025-02-03T12:49:40Z",
      "side": 1,
      "message": "Print both sizes.",
      "revId": "cfa8c0ea1c17a44f345c0f0be68ee2308fa3498c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d25502d7_c389baae",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 3
      },
      "lineNbr": 323,
      "author": {
        "id": 1525062
      },
      "writtenOn": "2025-02-03T14:05:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1ce4b3bf_62290ad8",
      "revId": "cfa8c0ea1c17a44f345c0f0be68ee2308fa3498c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1dcc002a_30e5c66c",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 3
      },
      "lineNbr": 330,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2025-02-03T12:49:40Z",
      "side": 1,
      "message": "No need to read that many bytes. Use load_bytes. Need to check if this function supports arbitrary number of bytes.",
      "revId": "cfa8c0ea1c17a44f345c0f0be68ee2308fa3498c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1259510e_46e25cd4",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 3
      },
      "lineNbr": 330,
      "author": {
        "id": 1525062
      },
      "writtenOn": "2025-02-03T14:05:01Z",
      "side": 1,
      "message": "The function requires the size to be LBA aligned (\u003d512). I am not sure if we can guarantee that.\n\npvmfw partition is described with bootimg header (apart from AVB headers) and the `kernel_size` that describes its size is page aligned (\u003d4096). However I don\u0027t know if that enforces this alignment to AVB structures as well.",
      "parentUuid": "1dcc002a_30e5c66c",
      "revId": "cfa8c0ea1c17a44f345c0f0be68ee2308fa3498c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7573acc2_6afe995f",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 3
      },
      "lineNbr": 330,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2025-02-03T16:14:10Z",
      "side": 1,
      "message": "\u003e The function requires the size to be LBA aligned (\u003d512).\n\nThere\u0027s already b/331881159 filed for that. Before that\u0027s fixed, we\u0027ll need to align-up `load_bytes` to `gpt-\u003esector_bytes` here. Something like\n\n```\n/* TODO(b/331881159): Support unaligned reads. */\naligned_load_bytes \u003d ALIGN_UP(load_bytes, gpt-\u003esector_bytes);\n...\nif (aligned_load_bytes \u003e part_bytes) {\n    error...\n}\nif (aligned_load_bytes \u003e params-\u003epvmfw_buffer_size) {\n    error...\n}\n...\nVbExStreamRead(... aligned_load_bytes ...)\n...\nparams-\u003epvmfw_size \u003d load_bytes;\n```",
      "parentUuid": "1259510e_46e25cd4",
      "revId": "cfa8c0ea1c17a44f345c0f0be68ee2308fa3498c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}