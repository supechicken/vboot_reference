{
  "comments": [
    {
      "key": {
        "uuid": "1bc69199_1c3113d6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2020-09-10T00:16:59Z",
      "side": 1,
      "message": "I\u0027m seeing this implementation in coreboot:\n\n                /*\n                 * Won\u0027t be able to overwrite, need to use the next blob,\n                 * let\u0027s see if it is available.\n                 */\n                new_blob_offset \u003d nvdata_blob_offset + sizeof(nvdata_cache);\n                if (new_blob_offset \u003e\u003d nvdata_area_descriptor.size) {\n                        printf(\"nvdata block is used up. \"\n                               \"deleting it to start over\\n\");\n                        if (erase_nvdata() !\u003d VB2_SUCCESS)\n                                return VB2_ERROR_NV_WRITE;\n                        new_blob_offset \u003d 0;\n                }\n                nvdata_blob_offset \u003d new_blob_offset;\n\nAnd it does like last entry can\u0027t be filled?",
      "revId": "57146917007909a560224a74a64735ad098f0d8d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "49cfd307_00a201ef",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2020-09-10T00:18:29Z",
      "side": 1,
      "message": "but I do agree with you the mosys code fooled you (also me)...",
      "revId": "57146917007909a560224a74a64735ad098f0d8d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "887eeed1_f3072e6c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2020-09-10T00:21:19Z",
      "side": 1,
      "message": "sorry this implementation is depthcharge. The coreboot version is\n\n        /* See if we can overwrite the current blob with the new one */\n        for (i \u003d 0; i \u003c BLOB_SIZE; i++) {\n                if (!can_overwrite(ctx-\u003ecache[i], vbnv_copy[i])) {\n                        /* unable to overwrite. need to use the next blob */\n                        new_offset +\u003d BLOB_SIZE;\n                        if (new_offset \u003e ctx-\u003etop_offset) {\n                                if (erase_nvram())\n                                        return;  /* error */\n                                new_offset \u003d 0;\n                        }\n                        break;\n                }\n        }",
      "parentUuid": "1bc69199_1c3113d6",
      "revId": "57146917007909a560224a74a64735ad098f0d8d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c7648dac_b08945e2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1330845
      },
      "writtenOn": "2020-09-10T00:22:52Z",
      "side": 1,
      "message": "Looks like coreboot impl will allow the last entry to be written then, and that\u0027s likely how we are reaching this state?",
      "parentUuid": "887eeed1_f3072e6c",
      "revId": "57146917007909a560224a74a64735ad098f0d8d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b20b4f4c_e866fb34",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2020-09-10T00:25:07Z",
      "side": 1,
      "message": "(coreboot) ctx-\u003etop_offset \u003d region_device_sz(rdev) - BLOB_SIZE;\n\nSo in coreboot, last entry can be used.\n\n(depthcharge) will not use last entry.",
      "parentUuid": "887eeed1_f3072e6c",
      "revId": "57146917007909a560224a74a64735ad098f0d8d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}