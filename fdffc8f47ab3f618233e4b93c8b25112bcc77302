{
  "comments": [
    {
      "key": {
        "uuid": "cf79c3a5_fb88c4f3",
        "filename": "firmware/lib20/api_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-05T00:10:34Z",
      "side": 1,
      "message": "Well, now this is weird again, now you have it here but you took it away from vb2_kernel_setup() which runs earlier. Either take it away everywhere and say that we rely on it already being initialized in persistent context, or put it at the earliest possible place.",
      "revId": "fdffc8f47ab3f618233e4b93c8b25112bcc77302",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "895fce56_db1cdd8c",
        "filename": "firmware/lib20/api_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-05T09:47:42Z",
      "side": 1,
      "message": "vb2_kernel_setup() currently doesn\u0027t access anything in nvstorage -- is that still a concern?  Or should I put a note that it should not access nvstorage?\n\nThe function is gradually shrinking and I think the only thing that will be left is initializing LKP and kparams outputs.",
      "parentUuid": "cf79c3a5_fb88c4f3",
      "revId": "fdffc8f47ab3f618233e4b93c8b25112bcc77302",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a54ab15_6027d9ce",
        "filename": "firmware/lib20/api_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-05T20:49:46Z",
      "side": 1,
      "message": "vb2_kernel_setup() can fail, goto VbSelectAndLoadKernel_exit, call vb2_commit_data(), get a secdata write error from depthcharge and call vb2api_fail() which accesses nvdata. I think it\u0027s generally best to really make vb2_nv_init() the very first thing to run (like it is in vb2api_fw_phase1()) to avoid having to think about the code flow so much. A vb2api_fail() call is easy to add somewhere without fully realizing the consequences for nvdata.\n\nThat said, like I mentioned, I\u0027m fine with not calling this at all in kernel verification. I just think calling it here is weird.",
      "parentUuid": "895fce56_db1cdd8c",
      "revId": "fdffc8f47ab3f618233e4b93c8b25112bcc77302",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "736cb102_a49726e7",
        "filename": "firmware/lib20/api_kernel.c",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-06T03:22:36Z",
      "side": 1,
      "message": "Argh, thanks for catching me from doing something stupid here.  How about we move it directly up to the start of VBSLK with a TODO to remove after adding asserts to getters/setters?",
      "parentUuid": "3a54ab15_6027d9ce",
      "revId": "fdffc8f47ab3f618233e4b93c8b25112bcc77302",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "474aaf7d_36fc265f",
        "filename": "tests/vb20_api_kernel_tests.c",
        "patchSetId": 8
      },
      "lineNbr": 237,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-05T00:10:34Z",
      "side": 1,
      "message": "nit: could take this out and just use sd-\u003epreamble_offset now, it doesn\u0027t change anymore",
      "revId": "fdffc8f47ab3f618233e4b93c8b25112bcc77302",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6efa0e8_68e0cebd",
        "filename": "tests/vb20_api_kernel_tests.c",
        "patchSetId": 8
      },
      "lineNbr": 237,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-05T09:47:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "474aaf7d_36fc265f",
      "revId": "fdffc8f47ab3f618233e4b93c8b25112bcc77302",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e72d41c8_af475f2b",
        "filename": "tests/vboot_api_kernel4_tests.c",
        "patchSetId": 8
      },
      "lineNbr": 244,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-05T00:10:34Z",
      "side": 1,
      "message": "Please add tests to make sure SLK fails when phase1 fails here now.",
      "revId": "fdffc8f47ab3f618233e4b93c8b25112bcc77302",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82fed33d_ccbb523d",
        "filename": "tests/vboot_api_kernel4_tests.c",
        "patchSetId": 8
      },
      "lineNbr": 244,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-05T09:47:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e72d41c8_af475f2b",
      "revId": "fdffc8f47ab3f618233e4b93c8b25112bcc77302",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}