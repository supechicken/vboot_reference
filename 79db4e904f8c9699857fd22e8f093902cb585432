{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "464e1bdb_8567e0e3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2025-08-12T06:02:03Z",
      "side": 1,
      "message": "I somehow feel such hashes should be implemented as part of the verity data so we won\u0027t need to hack with uuencode in kernel command line, but that\u0027s probably beyond the scope of a reviewer.",
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0eff8f60_ea6ead4f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2025-08-12T07:52:36Z",
      "side": 1,
      "message": "Yeah, the option you mentioned would also work.\n\nUltimately, the goal is to copy the data with verification checking. There\u0027s no need for real-time mounting, booting, or using artifacts in the partition.\n\nSo, this digest, which is a checksum, seems like a good enough solution.\n\nUnless we want to go down in the number of bytes for the checksum, but SHA256 seems like the right choice.",
      "parentUuid": "464e1bdb_8567e0e3",
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f12f70bb_aff3d1e1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-08-12T21:02:18Z",
      "side": 1,
      "message": "If we wanted to use verity on the miniOS partitions we\u0027d have to add a whole verity block to that partition that contains the Merkle tree with all the block hashes, and I\u0027m not actually sure if that\u0027s easily possible when the rest of that partition is just a ChromeOS kernel (or whatever the hell we decide to do for Android), not an ext4. Doing all that only for the one time where the recovery installer copies the entire partition from A/B seems excessive (the entire point of verity is to allow verification even when the blocks are randomly accessed, not just in neat sequential order). This solution matches what we had already been for KERN-B the whole time and seems appropriate for what we need here.",
      "parentUuid": "0eff8f60_ea6ead4f",
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f19e946_bc4df95f",
        "filename": "scripts/image_signing/sign_official_build.sh",
        "patchSetId": 10
      },
      "lineNbr": 1038,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2025-08-12T06:02:03Z",
      "side": 1,
      "message": "I think the regex is wrong because you forgot to add \u0027:\u0027 and \u0027,\u0027.",
      "range": {
        "startLine": 1038,
        "startChar": 32,
        "endLine": 1038,
        "endChar": 44
      },
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1caf66d2_3feaafa2",
        "filename": "scripts/image_signing/sign_official_build.sh",
        "patchSetId": 10
      },
      "lineNbr": 1038,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2025-08-12T07:44:46Z",
      "side": 1,
      "message": "Fix applied. (Thanks for catching this mistake)",
      "parentUuid": "9f19e946_bc4df95f",
      "range": {
        "startLine": 1038,
        "startChar": 32,
        "endLine": 1038,
        "endChar": 44
      },
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6052e4e_a9dcf8e5",
        "filename": "scripts/image_signing/sign_official_build.sh",
        "patchSetId": 10
      },
      "lineNbr": 1056,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2025-08-12T06:02:03Z",
      "side": 1,
      "message": "One SHA256sum is 64 bytes. The `xxd -r+base64` is 44 bytes.\n\nI wonder if all these compression is necessary, because we are saving only (64-44)*2 \u003d 40 bytes, with the cost of not able to decode easily without base64. and extra parsing (:, for each entry and then base64).\n\nBut I\u0027ll leave that for you to decide if you already have a design proposal and signed off by the owner.",
      "range": {
        "startLine": 1056,
        "startChar": 53,
        "endLine": 1056,
        "endChar": 59
      },
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "297794de_fbb692d5",
        "filename": "scripts/image_signing/sign_official_build.sh",
        "patchSetId": 10
      },
      "lineNbr": 1056,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2025-08-12T07:44:46Z",
      "side": 1,
      "message": "Yeah, I think @jwerner@chromium.org mentioned the same thing on another build time effort that this is parallel work for.\n\nIn the runtime environments we work in, we already have the necessary tooling to unwind this.\n\nAlso, once we set it up, it\u0027s likely a forget + leave as it is setup.\n\n---\n\nThere are no design proposals.\nJust some discussions on the tracker + reason for this happening.\n\nTime is tight, but if you want to see a 1 pager, can make it happen, but it seems small enough of a design to not warrant one.",
      "parentUuid": "a6052e4e_a9dcf8e5",
      "range": {
        "startLine": 1056,
        "startChar": 53,
        "endLine": 1056,
        "endChar": 59
      },
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a34f2080_fbcf494b",
        "filename": "scripts/image_signing/sign_official_build.sh",
        "patchSetId": 10
      },
      "lineNbr": 1056,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2025-08-12T09:11:23Z",
      "side": 1,
      "message": "\u003e Also, once we set it up, it\u0027s likely a forget + leave as it is setup.\n\nAnything landed in the signer, we must keep it forward compatible for 10+ years, even if we dropped the design on ToT (the factory/fw/release branches will still need it). That\u0027s why I want to see a clear design of discussion for new features.\n\nUnderstood adding to verity may need a long time so a kernel command line hash is probably what we can have in minimal development time. I\u0027m fine if Julius can agree with this.",
      "parentUuid": "297794de_fbb692d5",
      "range": {
        "startLine": 1056,
        "startChar": 53,
        "endLine": 1056,
        "endChar": 59
      },
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4504191d_0adfd1b3",
        "filename": "scripts/image_signing/sign_official_build.sh",
        "patchSetId": 10
      },
      "lineNbr": 1056,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-08-12T20:53:05Z",
      "side": 1,
      "message": "I think this one is probably fine, I\u0027m just glad we were able to talk Jae out of the gzip thing. ðŸ˜„ At the end of the day, there\u0027s no real \"default\" format for printing hashes, hex digits and base64 are equally valid choices, it\u0027s just that `sha256sum` uses hex digits (but that\u0027s a choice in that utility, not the SHA256 algorithm itself). Base64 is a very widespread encoding, it can be converted back to hash digits with just `base64` and `od` (both very standard utilities basically available everywhere, including busybox and toybox), and when it comes to reading hashes it\u0027s not really any more or less readable than hex digits (because you don\u0027t care about the specific bit sequence of a hash, you usually just want to compare if two are equal), so I don\u0027t think we\u0027re painting ourselves into a corner with this one.",
      "parentUuid": "a34f2080_fbcf494b",
      "range": {
        "startLine": 1056,
        "startChar": 53,
        "endLine": 1056,
        "endChar": 59
      },
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27fe77dc_b18a26e9",
        "filename": "scripts/image_signing/sign_official_build.sh",
        "patchSetId": 10
      },
      "lineNbr": 1082,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2025-08-12T06:02:03Z",
      "side": 1,
      "message": "same here - you need \u0027:\u0027 and \u0027,\u0027.",
      "range": {
        "startLine": 1082,
        "startChar": 31,
        "endLine": 1082,
        "endChar": 45
      },
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d9d86a83_72e13512",
        "filename": "scripts/image_signing/sign_official_build.sh",
        "patchSetId": 10
      },
      "lineNbr": 1082,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2025-08-12T07:44:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "27fe77dc_b18a26e9",
      "range": {
        "startLine": 1082,
        "startChar": 31,
        "endLine": 1082,
        "endChar": 45
      },
      "revId": "79db4e904f8c9699857fd22e8f093902cb585432",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}