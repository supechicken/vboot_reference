{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2670002c_d062670d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-05-22T09:50:39Z",
      "side": 1,
      "message": "I still feel this is not the best approach but considering the effort of refactoring, let\u0027s proceed with this for now.",
      "revId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c0dcb92_dfd91582",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-05-22T11:19:35Z",
      "side": 1,
      "message": "Hmmm... What do you think is the correct way of doing this?",
      "parentUuid": "2670002c_d062670d",
      "revId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3b45ac0e_3663f7cb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-05-22T14:38:28Z",
      "side": 1,
      "message": "IMHO,\n- the struct firmware_image should remain as a \"basic\" data that contains only what every firmware-like image should have. it should not have tags like \u0027is_ec\u0027. What if we need to deal with PD, SH or something else again in future?\n\n- The code can identify if the firmware image is for EC by other logic, for example looking at FMAP section names, or checking the programmer (compare with EC programmer)\n\n- also, the additional fields only makes sense for CrOS should be outside the firmware_image. they can be part of the manifest, but not firmware_image.",
      "parentUuid": "4c0dcb92_dfd91582",
      "revId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "baab70ed_a2c3271f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-05-23T00:46:31Z",
      "side": 1,
      "message": "I totally agree with the 1st and 3rd points.\n\nIt\u0027s easy to remove the \u0027is_ec\u0027 field. See CL:5561604. I think that will make the code slightly better.\n\n\u003e The code can identify if the firmware image is for EC by other logic, for example looking at FMAP section names, or checking the programmer (compare with EC programmer)\n\nAs I explained in the other CL, checking the programmer doesn\u0027t work when we\u0027re loading an image from a file (and that\u0027s why we need to split `load_firmware_image` into 2 functions). Checking the FMAP also doesn\u0027t seem reliable, if we want futility to support *all* types of images (for example ancient images without FW_MAIN_A, or AP images with only one RW section, which is supported by coreboot).\n\nWait... maybe there\u0027s an even simpler solution. `parse_firmware_image()` doesn\u0027t need to know the image type. It can parse `ecrw_version_a` whenever FW_MAIN_A is present, regardless what the image is, so that FW_MAIN_A becomes totally optional (even for AP images). What do you think?",
      "parentUuid": "3b45ac0e_3663f7cb",
      "revId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "135ab3c2_2dfcbe8b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-05-23T01:57:02Z",
      "side": 1,
      "message": "\u003e It can parse ecrw_version_a whenever FW_MAIN_A is present, regardless what the image is, so that FW_MAIN_A becomes totally optional (even for AP images).\n\nSounds like a good approach. I hope the ECs won\u0027t try to add that section name in the future.",
      "parentUuid": "baab70ed_a2c3271f",
      "revId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "efdb71de_6569e01a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-05-23T02:00:32Z",
      "side": 1,
      "message": "\u003e As I explained in the other CL, checking the programmer doesn\u0027t work when we\u0027re loading an image from a file \n\nI think that\u0027s the problem caused by Edward\u0027s \"refactoring\" to mess up the programmers.\n\nPreviously, the programmers are always only \u0027where to write\u0027, and reading/writing from file (e.g. emulation) is a separate config so the programmer is a trusted source for \"where this image should write to\".",
      "parentUuid": "135ab3c2_2dfcbe8b",
      "revId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f35a7565_a9fc49ea",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-05-23T02:53:14Z",
      "side": 1,
      "message": "\u003e Sounds like a good approach.\n\nDone in CL:5561607 and CL:5561604.\n\n\u003e I think that\u0027s the problem caused by ...\n\nWe probably need to find some time to fix that up in the future.",
      "parentUuid": "efdb71de_6569e01a",
      "revId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "Submit requirement for the \u0027Code-Review\u0027 label"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1 AND -label:Code-Review\u003dMIN"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1 AND -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1","label:Code-Review=MIN"]}
      },
      "patchSetCommitId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforced_gerrit"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforcement-satisfied_gerrit"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {
        "value": true
      }
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI or human verified the change"
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "-branch:refs/meta/config"
          }
        },
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-branch:refs/meta/config"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["branch:refs/meta/config"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "4de4f624f45f0abafa9dd68cbad2d8c5e0ea4c3e",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}