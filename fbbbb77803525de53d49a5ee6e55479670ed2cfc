{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0d9d2576_f9437a09",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "basically nits.  overall process/flow/idea looks fine.",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26d600f2_44ede8ac",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 6,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "this belongs in the usage output so people can run --help or similar to see it without having to open the file and read code",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe542df8_27db2416",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 6,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "26d600f2_44ede8ac",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d79caa2_c93085a6",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "put this into a usage function",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22bb33b8_77759186",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1d79caa2_c93085a6",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef50f3df_b692ab5c",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "this \u0026 $# checking should be in the top of the main func",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4fa40848_91c3ce31",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef50f3df_b692ab5c",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6351811_77adf136",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "this is bash, so always use `[[` and never `[`",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b92e2d04_8a290453",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a6351811_77adf136",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dfca4f28_9590fc72",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "common.sh provides output helpers.  you can use `die` for echo+return.",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "25bae01c_bf10c113",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dfca4f28_9590fc72",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57472c9f_dde3b37d",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "delete blank echos",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f28962b5_b4661820",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "57472c9f_dde3b37d",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df11cf80_015022bd",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "use `info` for these",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "26e7a865_e3c60ded",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "df11cf80_015022bd",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e01aba2c_dfd2e6a5",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "add `local ext`",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d44019aa_cfc689ed",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 45,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e01aba2c_dfd2e6a5",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c0b00426_9f832466",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "prob should use `-n` with all these `mv` calls to be safe, even with your `[[ -f .. ]]` check above.",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77caea16_efdc5220",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "I\u0027ve seen this in other scripts, but is this really a good idea? As far as I can tell, `mv --no-clobber` doesn\u0027t return a non-zero exit status if the file already exists, it just silently doesn\u0027t do anything. So if some of these files already exist and others don\u0027t, then having --no-clobber throughout the script would just look like it succeeds but result in a corrupted keyset where some files don\u0027t match the others. I think overwriting and at least creating a new good state would be preferable in that case.\n\nOn the signer, we would be creating a copy of the keyset and working on the copy for this anyway, right (that seems to be the way the version increment wrapper script works).",
      "parentUuid": "c0b00426_9f832466",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bbac56a0_6bda3aec",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T19:32:00Z",
      "side": 1,
      "message": "thanks, i wasn\u0027t aware that `-n` did that.  i agree we don\u0027t want that behavior.\n\ni guess putting the lock at the start (look for first file created) rather than the end (look for the last file created) is prob fine.  trying to write anything smarter is difficult in shell :/.",
      "parentUuid": "77caea16_efdc5220",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab0d9340_679a85b9",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-01-26T06:43:04Z",
      "side": 1,
      "message": "add `local k`",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "45f946a0_938a4fa7",
        "filename": "scripts/keygeneration/replace_recovery_key.sh",
        "patchSetId": 2
      },
      "lineNbr": 52,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-01-26T19:27:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ab0d9340_679a85b9",
      "revId": "fbbbb77803525de53d49a5ee6e55479670ed2cfc",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}