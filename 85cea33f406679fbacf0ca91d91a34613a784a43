{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "df4c0cb7_cc23929e",
        "filename": "Makefile",
        "patchSetId": 12
      },
      "lineNbr": 290,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "Generally the HAVE_... stuff is only for libraries that are actually optional (and then it must still be able to build if they\u0027re not available). For NSS I think we can just assume that everyone has it (like we do for OpenSSL), so we can just tie this into CRYPTO_LIBS.",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75f04814_cab2b766",
        "filename": "Makefile",
        "patchSetId": 12
      },
      "lineNbr": 290,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-20T11:19:13Z",
      "side": 1,
      "message": "In my first thought, since the pkcs11 support is not needed always for everyone building the vboot_reference, I think we\u0027d better make the dependencies of pkcs11 optional. If the case that the NSS doesn\u0027t present is negligible, it makes sense to make it mandatory.\n\nBut just to confirm, in the case that there are actually someone without NSS, is it okay to let them not able to build the vboot_reference? \n(And since you mentioned it, I found I forgot to add proper guards for things using NSS. But if it is mandatory, there is no need to add the guards)",
      "parentUuid": "df4c0cb7_cc23929e",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c704ce1d_3531ba0c",
        "filename": "Makefile",
        "patchSetId": 12
      },
      "lineNbr": 290,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-22T05:15:23Z",
      "side": 1,
      "message": "Isn\u0027t nss installed by default on pretty much every Linux distribution? Maybe I\u0027m misremembering how this works (haven\u0027t set up my own Linux system in a while) but I thought this was one of these old super-ubiquitous things that everyone had?\n\nMaking things optional has both advantages and disadvantages. It incurs a real maintenance overhead as we\u0027ve already learned the hard way with flashrom. If that\u0027s the only option to keep our wide userbase happy, sure, but if this is a library everyone already has anyway (like openssl which is also a hard depedency), it would be better not to need the extra complication.",
      "parentUuid": "75f04814_cab2b766",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a0c83de_12128a96",
        "filename": "Makefile",
        "patchSetId": 12
      },
      "lineNbr": 290,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-26T16:25:51Z",
      "side": 1,
      "message": "IIUC, the nss header we use is not installed by default, zuan@ might have more information about this.\n(I also updated the code with the HAVE_NSS guard, which make any function call in host_p11.h just fails if HAVE_NSS is not defined)",
      "parentUuid": "c704ce1d_3531ba0c",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7e479b3_4c506a75",
        "filename": "Makefile",
        "patchSetId": 12
      },
      "lineNbr": 290,
      "author": {
        "id": 1314760
      },
      "writtenOn": "2023-09-26T20:21:54Z",
      "side": 1,
      "message": "I discussed with Julius over GVC and the conclusion is that:\n- We\u0027ll want to make NSS a compulsory dependency of vboot_reference.\n- This is to avoid having many different possible builds of vboot_reference that can break in various different ways.\n- We\u0027ll add comments/error messages to let the users know what needs to be installed (libnss3-dev) if the dependency is not found.\n- If somebody complains about this compulsory dependency, we can re-evaluate this decision.",
      "parentUuid": "6a0c83de_12128a96",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c51d83e_1759f445",
        "filename": "host/lib/host_key2.c",
        "patchSetId": 12
      },
      "lineNbr": 40,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "Please avoid using `bool` as return type to signify success or error for \"action\" functions. You could instead just use `vb2_error_t` with `VB2_SUCCESS` and `VB2_ERROR_UNKNOWN`. We generally try to follow Linux style on return values (and most other things): https://www.kernel.org/doc/html/v4.10/process/coding-style.html#function-return-values-and-names",
      "range": {
        "startLine": 40,
        "startChar": 7,
        "endLine": 40,
        "endChar": 11
      },
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f52a14c_b75add0b",
        "filename": "host/lib/host_key2.c",
        "patchSetId": 12
      },
      "lineNbr": 40,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6c51d83e_1759f445",
      "range": {
        "startLine": 40,
        "startChar": 7,
        "endLine": 40,
        "endChar": 11
      },
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9635df7_1f8fcbc7",
        "filename": "host/lib/host_key2.c",
        "patchSetId": 12
      },
      "lineNbr": 73,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "nit: consider\n```\nchar *p11_lib, *p11_label;\nint p11_slot_id;\nif (sscanf(key_info, \"pkcs11:%m[^:]:%i:%m[^:]\",\n           \u0026lib_path, \u0026p11_slot_id, \u0026key_label) !\u003d 3) {\n  ...parsing error...\n}\n```\nwhich is a bit simpler.",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d72500b3_21fff9a7",
        "filename": "host/lib/host_key2.c",
        "patchSetId": 12
      },
      "lineNbr": 73,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e9635df7_1f8fcbc7",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c170af04_60174014",
        "filename": "host/lib/host_key2.c",
        "patchSetId": 12
      },
      "lineNbr": 120,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "nit: `const char ...[]` should usually be `static const char ...[]`",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "163f1105_de9f93ba",
        "filename": "host/lib/host_key2.c",
        "patchSetId": 12
      },
      "lineNbr": 120,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c170af04_60174014",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "795773b4_6e6c9bcc",
        "filename": "host/lib/host_key2.c",
        "patchSetId": 12
      },
      "lineNbr": 123,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "nit: This works but it\u0027s maybe a bit... verbose? Maybe consider this approach instead to collapse the local cases together\n```\nchar *colon \u003d strchr(key_info, \u0027:\u0027);\nif (colon) {\n  if (!strncmp(key_info, \"pkcs11:\", colon - key_info)) {\n    ...read_p11...\n  } else if (!strncmp(key_info, \"local:\", colon - key_info)) {\n    key_info \u003d colon + 1;\n  }\n}\n...read_local...\n```",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc6ef9e3_730432c7",
        "filename": "host/lib/host_key2.c",
        "patchSetId": 12
      },
      "lineNbr": 123,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "795773b4_6e6c9bcc",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e045c7ec_0553af8d",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 23,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "Function pointer declarations are hard enough to read as is, so I think you should declare each of these variables on their own line.",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "94a15363_dc1c73c1",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 23,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e045c7ec_0553af8d",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f85eb87a_d83a6bab",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 36,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "nit: unnecessary cast",
      "range": {
        "startLine": 36,
        "startChar": 3,
        "endLine": 36,
        "endChar": 37
      },
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7f3e4b3d_c23e03f5",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 36,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f85eb87a_d83a6bab",
      "range": {
        "startLine": 36,
        "startChar": 3,
        "endLine": 36,
        "endChar": 37
      },
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ce2873c_0ae090ec",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 48,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "Same comment about return values throughout this function.",
      "range": {
        "startLine": 48,
        "startChar": 7,
        "endLine": 48,
        "endChar": 11
      },
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "04e85016_815eaa66",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 48,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9ce2873c_0ae090ec",
      "range": {
        "startLine": 48,
        "startChar": 7,
        "endLine": 48,
        "endChar": 11
      },
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff36c699_335896cd",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 72,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "This should be stored in the `hash_alg` field of the vb2_private_key struct.",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf330e2a_cbf31121",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 72,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-20T11:19:13Z",
      "side": 1,
      "message": "Do you think we should have `hash_alg` as an union of `CK_MECHANISM_TYPE` and `enum vb2_hash_algorithm`?",
      "parentUuid": "ff36c699_335896cd",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c15e58b1_2f09673e",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 72,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T18:58:11Z",
      "side": 1,
      "message": "Or maybe just mapping `CK_MECHANISM_TYPE` to the `enum vb2_hash_algorithm`?",
      "parentUuid": "bf330e2a_cbf31121",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7b8f065_a181528b",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 72,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-22T05:15:23Z",
      "side": 1,
      "message": "It should just be an `enum vb2_hash_algorithm`. You should translate the openssl value into that when you first write to it.",
      "parentUuid": "c15e58b1_2f09673e",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "215b7a41_154be73c",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 72,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-22T19:23:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d7b8f065_a181528b",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8dab361f_cc2447c0",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 74,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "While vboot supports SHA224 and SHA384 for standalone hashing, they\u0027re not currently supported for RSA signing, so they shouldn\u0027t count as \"valid\" here.",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c049992d_edd6a59e",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 74,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-22T19:23:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8dab361f_cc2447c0",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee46906a_fc73dd74",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 80,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "This seems a bit brittle, especially since we also support exponent 3 which we count as a different algorithm but has the same signature sizes as the default exponent (0x10001). You can see some similar code in host/lib21/host_key.c:vb2_rsa_sig_alg(). It would be good to factor out the relevant part from that into a separate function (e.g. in host/lib/crypto.c) that takes a signature size and an exponent and returns a vb2_signature_algorithm, and then use that both in lib21/host_key.c and here.\n\nI also don\u0027t think you should store signature_size in p11_key, instead you should pull the whole vb2_private_key into this file and then have pkcs11_get_key() fill out the right sig_alg in there directly based on CKA_MODULUS and CKA_PUBLIC_EXPONENT.",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e8b525a7_d9ba74a2",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 80,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T18:58:11Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "ee46906a_fc73dd74",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0553c2e0_e0afa2aa",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 99,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "nit: I guess we don\u0027t technically need that for now(?), but it might be nice to save the name of the loaded library in another static variable and then not return an error (just return without doing anything) if it tries to load the same library again, in case we ever add a case that uses two keys in the same futility invocation.",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ecb8f98c_fbd755f0",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 99,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0553c2e0_e0afa2aa",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d866f97_bfa31a6e",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 141,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "cleaner: `ARRAY_SIZE(attributes)`",
      "range": {
        "startLine": 141,
        "startChar": 48,
        "endLine": 141,
        "endChar": 49
      },
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c24ac43_d909ae5c",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 141,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9d866f97_bfa31a6e",
      "range": {
        "startLine": 141,
        "startChar": 48,
        "endLine": 141,
        "endChar": 49
      },
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2290944_e48d9c41",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 142,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "nit: does it make sense to print `label` here, because most of the time this fails would probably be because the user mistyped the label on the command line?",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "359e2e7c_c12fd52d",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 142,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T11:07:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f2290944_e48d9c41",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95986f5e_cbb974ed",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 190,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "Isn\u0027t this already stored in p11_key anyway? (And we should change that so that this takes the whole vb2_private_key and can use vb2_rsa_sig_size(key-\u003esig_alg) to determine this.",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0887a8de_058d5e3c",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 190,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T18:58:11Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "95986f5e_cbb974ed",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5dfb594f_fd2a10c3",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 201,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-09-16T00:54:11Z",
      "side": 1,
      "message": "It seems very odd that this needs to be called twice? Will that not lead to the signer actually calculating the signature twice? We already know the signature size to begin with, there should be no way in which it could not match what the signer wants here (and your code here is not verifying the result returned from the first call anyway), so why can\u0027t we just sign into our buffer to begin with?",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "72a644db_c931d09c",
        "filename": "host/lib/host_p11.c",
        "patchSetId": 12
      },
      "lineNbr": 201,
      "author": {
        "id": 1391582
      },
      "writtenOn": "2023-09-21T18:58:11Z",
      "side": 1,
      "message": "Thanks for finding this. The first C_sign is the code I forgot to remove.",
      "parentUuid": "5dfb594f_fd2a10c3",
      "revId": "85cea33f406679fbacf0ca91d91a34613a784a43",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}