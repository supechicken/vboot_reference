{
  "comments": [
    {
      "key": {
        "uuid": "815c1f7f_eed51e80",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-22T23:39:15Z",
      "side": 1,
      "message": "Why is this a separate entry point rather than integrated into SelectAndLoadKernel?",
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f2bf79c_e9b62d35",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2019-11-01T00:27:14Z",
      "side": 1,
      "message": "First, I wanted a clear separation to avoid creating obscure corner cases. The timing ec is updated is very different. \n\nSecond, It will be easier to maintain and debug the two entry points separately and deprecate one when the switch-over completes. Those who are not familiar with one or the other logic can still (relatively comfortably) work on the code.",
      "parentUuid": "815c1f7f_eed51e80",
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9de5ae1b_1e1612dd",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-11-01T01:12:36Z",
      "side": 1,
      "message": "Sorry, I don\u0027t understand/agree with this one at all. VbSelectAndLoadKernel() is literally all of vboot kernel implementation. Replacing the whole thing is replacing all of that, and reimplementing everything in there, and causing maintenance headaches whenever anything in there changes.\n\nThis feature is related to EC software sync, it should be integrated into EC software sync code (and other parts where applicable). In fact, we\u0027re currently moving EC software sync from here into a separate API that will be called by coreboot directly, that\u0027s another good reason to integrated it in a smaller scope function, because otherwise that migration will break everything you do here.",
      "parentUuid": "2f2bf79c_e9b62d35",
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e993571_e32cc1f2",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2019-11-01T20:27:05Z",
      "side": 1,
      "message": "I can probably fit VbSelectAndLoadKernel2 in VbSelectAndLoadKernel and ec_sync_all.",
      "parentUuid": "9de5ae1b_1e1612dd",
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ded37539_9581e861",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 406,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-22T23:39:15Z",
      "side": 1,
      "message": "I don\u0027t understand why this and NO_BOOT_MODE are separate flags. As I understand your doc, \"NO_RECOVERY\" just means \"NO_BOOT + RECOVERY\". So then we should represent that with those two flags rather than having three.",
      "range": {
        "startLine": 406,
        "startChar": 25,
        "endLine": 406,
        "endChar": 53
      },
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6614afc_18e3d6bd",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 406,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2019-11-01T00:27:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ded37539_9581e861",
      "range": {
        "startLine": 406,
        "startChar": 25,
        "endLine": 406,
        "endChar": 53
      },
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f9a41bfa_fa7b26be",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 413,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-22T23:39:15Z",
      "side": 1,
      "message": "I think you need to separate the UI stuff from the software sync stuff here, and integrate the software sync stuff into the existing software sync code (in ec_sync.c). Note that there\u0027s currently a bunch of work by Tim and Joel going on in that area (e.g. CL:1867314). When they move software sync into romstage, most of this will not run as part of SelectAndLoadKernel() anymore.",
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9bca064e_e36477c6",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 413,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2019-11-01T00:27:14Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f9a41bfa_fa7b26be",
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95289229_ad26aa57",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 415,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-22T23:39:15Z",
      "side": 1,
      "message": "Like I mentioned in the design doc, I think it would be advantageous to treat this as a special TPM NVRAM space (or maybe even make it part of the kernel space). In that case, vboot should treat it like the other \"secdata\" -- there should be an array in vb2_context that\u0027s filled out by coreboot before first calling into vboot, and if vboot changes it will eventually be written back.",
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "448cd8f9_8bb965be",
        "filename": "firmware/lib/vboot_api_kernel.c",
        "patchSetId": 1
      },
      "lineNbr": 415,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2019-11-01T00:27:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "95289229_ad26aa57",
      "revId": "776a1b75ae706142004e5f1df9e5cbf0c4a6bbe2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}