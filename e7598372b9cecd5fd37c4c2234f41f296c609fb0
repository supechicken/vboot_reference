{
  "comments": [
    {
      "key": {
        "uuid": "33fe29a5_4bee550c",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 15,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "I have no idea if it really makes a difference... but should we consider making this an inline function?",
      "range": {
        "startLine": 15,
        "startChar": 6,
        "endLine": 15,
        "endChar": 7
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "918d96b1_e8c2d01b",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 15,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-20T21:39:46Z",
      "side": 1,
      "message": "The compiler may be already expanding it inline because it\u0027s small. Either way, I don\u0027t think it makes any noticeable difference. \n\nI would rather keep it there so that we can use the short name and keep the scope as small as possible.",
      "parentUuid": "33fe29a5_4bee550c",
      "range": {
        "startLine": 15,
        "startChar": 6,
        "endLine": 15,
        "endChar": 7
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bcbc9088_518bad6c",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 15,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-21T05:09:17Z",
      "side": 1,
      "message": "Seems like we do have other \"static inline\" functions in vboot_reference, if scope is the worry.  Could you still add \"inline\" here please?",
      "parentUuid": "918d96b1_e8c2d01b",
      "range": {
        "startLine": 15,
        "startChar": 6,
        "endLine": 15,
        "endChar": 7
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56ca0a0d_76d4c3a9",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 92,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "caller",
      "range": {
        "startLine": 92,
        "startChar": 57,
        "endLine": 92,
        "endChar": 61
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08bd5542_476f81f3",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 92,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "In vboot_reference, for \"short comments\", we leave the * out on the second line:\n\n  /* first line\n     second line */",
      "range": {
        "startLine": 92,
        "startChar": 0,
        "endLine": 92,
        "endChar": 66
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4c90763_28b0b14b",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 138,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Seems kind of weird to find the one value that will make it through the _check function without causing any errors...\nI can\u0027t remember exactly what we did for secdata_fwmp, but would it make sense to allow 0 here to just ignore checking the size?\njwerner I seem to remember you having an opinion about this back when we were doing reviews...",
      "range": {
        "startLine": 138,
        "startChar": 1,
        "endLine": 138,
        "endChar": 44
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b56978b2_612bb9e3",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 138,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-19T02:34:00Z",
      "side": 1,
      "message": "We\u0027re passing the value of the \u0027struct_size\u0027 member for FWMP. Don\u0027t really care about it either way, I think. This seems somewhat cleaner in that it doesn\u0027t access struct members before the initial sanity/CRC checks are done. (It\u0027s not really a random value either, it\u0027s just the size of the available space we\u0027re parsing in the context. Using sizeof(ctx-\u003esecdata_kernel) would also work.)\n\nAnother option would be to allow passing NULL to check() to skip all the size checking/backreporting stuff.",
      "parentUuid": "c4c90763_28b0b14b",
      "range": {
        "startLine": 138,
        "startChar": 1,
        "endLine": 138,
        "endChar": 44
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "48ab5855_228ad385",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 166,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Seems kind of weird to cast to a void pointer when you know it will not end up being a void pointer...\n\nOr is this a generally acceptable C pattern?",
      "range": {
        "startLine": 166,
        "startChar": 5,
        "endLine": 166,
        "endChar": 13
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87d73c61_2eecb6fd",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 166,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-19T02:34:00Z",
      "side": 1,
      "message": "Might be a matter of taste, but I frequently use this to save space. Why write a long 20+ character type name in the cast if you can already see the same type name on the left of the declaration? (This is only for a declaration-assignment, of course, for an assignment of an earlier-declared variable I agree that a cast to the explicit type is more readable.)",
      "parentUuid": "48ab5855_228ad385",
      "range": {
        "startLine": 166,
        "startChar": 5,
        "endLine": 166,
        "endChar": 13
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31431068_a57fe14c",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 166,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-20T21:39:46Z",
      "side": 1,
      "message": "I like this expression. I hope this is more widely accepted and used.\n\nIt\u0027s redundant to repeat the struct x* twice. This doesn\u0027t leave confusion for the readers yet saves lots of characters. So, I believe it overall improves the readability.",
      "parentUuid": "87d73c61_2eecb6fd",
      "range": {
        "startLine": 166,
        "startChar": 5,
        "endLine": 166,
        "endChar": 13
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f1f93c0_5b93c2e1",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 213,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Is there any good reason for this not to be in the \"case\" block?\nThen we could make the ptr variable local to that block to make its purpose clearer.",
      "range": {
        "startLine": 213,
        "startChar": 1,
        "endLine": 213,
        "endChar": 14
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ecf6b12_d6dedced",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 213,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-19T02:34:00Z",
      "side": 1,
      "message": "This is for adding more fields later.",
      "parentUuid": "5f1f93c0_5b93c2e1",
      "range": {
        "startLine": 213,
        "startChar": 1,
        "endLine": 213,
        "endChar": 14
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d847916_989f308e",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 213,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-20T21:39:46Z",
      "side": 1,
      "message": "\u003e This is for adding more fields later.\n\nThat\u0027s the intention.",
      "parentUuid": "1ecf6b12_d6dedced",
      "range": {
        "startLine": 213,
        "startChar": 1,
        "endLine": 213,
        "endChar": 14
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "347690a5_a94c7ff1",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 234,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "I don\u0027t think we have any error formatting this fancy.. probably just sufficient to write \"Error: blah blah blah\", or even leave the \"Error:\" out.\n\nIt\u0027s either going to DIE on this line, or it will print \"IGNORING ABORT IN RECOVERY MODE!!!\" right after it -- so it\u0027s pretty clear already.",
      "range": {
        "startLine": 234,
        "startChar": 11,
        "endLine": 234,
        "endChar": 18
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15b3edd0_51a606f6",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 246,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Is there even a point in including this argument, if the only valid value is sizeof(sec-\u003eec_hash)?  We can specify in the function documentation that the *in pointer must have this size.",
      "range": {
        "startLine": 246,
        "startChar": 27,
        "endLine": 246,
        "endChar": 41
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3d0f01d_52113fa9",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 246,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-20T21:39:46Z",
      "side": 1,
      "message": "I think it\u0027s better for the API not to assume the passed data size is correct. This makes the API a little bit more robust. This forces the callers to be aware of the data size.\n\nIf it\u0027s a local function, it can be omitted.",
      "parentUuid": "15b3edd0_51a606f6",
      "range": {
        "startLine": 246,
        "startChar": 27,
        "endLine": 246,
        "endChar": 41
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15491b33_7db6621f",
        "filename": "firmware/2lib/2secdata_kernel.c",
        "patchSetId": 10
      },
      "lineNbr": 246,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-21T05:57:57Z",
      "side": 1,
      "message": "I don\u0027t think we should have this inconsistency between get() and set(). If get() expects the caller to know the size, set() should too. Since we have now decided anyway that this field will always implicitly be a SHA256, I think making the size implicit for both get and set is fine. (You could declare the parameter as \u0027const uint8_t in[VB2_SHA256_DIGEST_SIZE]\u0027 if you want to make that a little clearer in the API, although using array types as parameters is pretty uncommon in C.)\n\nIn fact, we should maybe also rename the field (and by extension these functions) from ec_hash to ec_sha256 to make that implied algorithm perfectly clear?",
      "parentUuid": "d3d0f01d_52113fa9",
      "range": {
        "startLine": 246,
        "startChar": 27,
        "endLine": 246,
        "endChar": 41
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "315761b3_9ba5ce34",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 10
      },
      "lineNbr": 257,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Shouldn\u0027t these two values be the same?",
      "range": {
        "startLine": 257,
        "startChar": 16,
        "endLine": 257,
        "endChar": 43
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "41644a1c_2678f545",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 10
      },
      "lineNbr": 257,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-20T21:39:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "315761b3_9ba5ce34",
      "range": {
        "startLine": 257,
        "startChar": 16,
        "endLine": 257,
        "endChar": 43
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a363d809_8036ebcb",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 10
      },
      "lineNbr": 499,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "We can probably split this into v0 and v1, and explain what it does for each.\n\nJust copy something like the vb2api_secdata_fwmp_check documentation for the v1 part.",
      "range": {
        "startLine": 499,
        "startChar": 3,
        "endLine": 499,
        "endChar": 32
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7b5f991_cd6e22fd",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 10
      },
      "lineNbr": 499,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-19T02:34:00Z",
      "side": 1,
      "message": "Or just not go into detail that much... the UID field was an internal implementation detail of the v0 structure that users of the API really don\u0027t need to know about.",
      "parentUuid": "a363d809_8036ebcb",
      "range": {
        "startLine": 499,
        "startChar": 3,
        "endLine": 499,
        "endChar": 32
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7336bb90_f4d83def",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 10
      },
      "lineNbr": 499,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-20T21:39:46Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f7b5f991_cd6e22fd",
      "range": {
        "startLine": 499,
        "startChar": 3,
        "endLine": 499,
        "endChar": 32
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e628fa16_59a6c40d",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 10
      },
      "lineNbr": 502,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Maybe \"read so far\"?",
      "range": {
        "startLine": 502,
        "startChar": 34,
        "endLine": 502,
        "endChar": 46
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ddd929b_5211f0a2",
        "filename": "firmware/2lib/include/2return_codes.h",
        "patchSetId": 10
      },
      "lineNbr": 199,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Needs to go at the *end* of error section to keep error values stable.",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 199,
        "endChar": 37
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "149eb2c6_2272c99e",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 10
      },
      "lineNbr": 118,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Call it \"kernel secure storage\" to be consistent with the other functions.",
      "range": {
        "startLine": 118,
        "startChar": 21,
        "endLine": 118,
        "endChar": 35
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b60b488e_2f916892",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 10
      },
      "lineNbr": 121,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Just a space.",
      "range": {
        "startLine": 121,
        "startChar": 10,
        "endLine": 121,
        "endChar": 12
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e009c3c_f308446c",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 10
      },
      "lineNbr": 129,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Just a space.",
      "range": {
        "startLine": 129,
        "startChar": 10,
        "endLine": 129,
        "endChar": 12
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7446e79f_c6d96df3",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 10
      },
      "lineNbr": 137,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Maybe just call this \"hash\" or \"in_hash\"?",
      "range": {
        "startLine": 137,
        "startChar": 10,
        "endLine": 137,
        "endChar": 12
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c04492e2_c0715c0c",
        "filename": "firmware/2lib/include/2secdata.h",
        "patchSetId": 10
      },
      "lineNbr": 138,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "As I mentioned in the other comment, I think we can get rid of this.",
      "range": {
        "startLine": 138,
        "startChar": 0,
        "endLine": 138,
        "endChar": 30
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43dab84e_405fc5b5",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 14,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Alphabetical order.",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 14,
        "endChar": 17
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b1c275a_68ecf7ad",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 41,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Just use a space here, same for MINOR.\n\nCan we add a comment above this specifying it should only be used for a uint8_t major/minor combined field?\n\nAlso, let\u0027s add the prefix VB2_ to prevent any future namespace collisions.",
      "range": {
        "startLine": 41,
        "startChar": 20,
        "endLine": 41,
        "endChar": 21
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e04b85d_94a1eaac",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 41,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-20T21:39:46Z",
      "side": 1,
      "message": "I moved it back to 2secdata_kernel.c. I think it\u0027s too bold to suffix it with VB2_.",
      "parentUuid": "7b1c275a_68ecf7ad",
      "range": {
        "startLine": 41,
        "startChar": 20,
        "endLine": 41,
        "endChar": 21
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18bc323d_fd5fd84a",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 50,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "This comment might fit better up at \"Kernel secure storage space\".",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 50,
        "endChar": 2
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74325a7c_723cfe39",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 51,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "*?",
      "range": {
        "startLine": 51,
        "startChar": 65,
        "endLine": 51,
        "endChar": 66
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d6585d4_3e4feaea",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 52,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "Probably can note how the TPM is able to handle this.\n\nDo we have any story for using a non-Cr50 backed TPM?  Or will that officially be impossible for the (1)(2)(3) cases?",
      "range": {
        "startLine": 52,
        "startChar": 56,
        "endLine": 52,
        "endChar": 57
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab8e5f60_fb45f1c1",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 52,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-20T21:39:46Z",
      "side": 1,
      "message": "We\u0027ll not have a third party TPM on new devices (as it can\u0027t communicate with EC).",
      "parentUuid": "3d6585d4_3e4feaea",
      "range": {
        "startLine": 52,
        "startChar": 56,
        "endLine": 52,
        "endChar": 57
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eed3f8e9_8088e168",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 52,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-21T05:09:17Z",
      "side": 1,
      "message": "Does that mean it\u0027s impossible to build Chromium for a device without Cr50 now?",
      "parentUuid": "ab8e5f60_fb45f1c1",
      "range": {
        "startLine": 52,
        "startChar": 56,
        "endLine": 52,
        "endChar": 57
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b9faa44_a42e42f7",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 52,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-21T05:57:57Z",
      "side": 1,
      "message": "Upstream coreboot developers are definitely still using vboot with TPM 1.2. They\u0027re not really using EC software sync so this shouldn\u0027t really bother them. Basically, when running TPM 1.2 it will still allocate this space in the secdata_kernel NVRAM space but it won\u0027t use it for anything.",
      "parentUuid": "ab8e5f60_fb45f1c1",
      "range": {
        "startLine": 52,
        "startChar": 56,
        "endLine": 52,
        "endChar": 57
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7c4e4d1_3a9ac020",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 56,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "3?",
      "range": {
        "startLine": 56,
        "startChar": 3,
        "endLine": 56,
        "endChar": 4
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c527349_0f2205ea",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 59,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "So is EFS2 disabled if a v0.2 data structure is encountered?  Or will Cr50 prevent the system from booting?",
      "range": {
        "startLine": 59,
        "startChar": 3,
        "endLine": 59,
        "endChar": 34
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c232e10_e2939569",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 59,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-02-19T02:34:00Z",
      "side": 1,
      "message": "I think it makes sense to disable EFS2 (i.e. allow booting and don\u0027t set NO_BOOT flag) when the struct isn\u0027t valid, unless someone has a security concern about that. During the first boot in the factory TPM NVRAM will be uninitialized, so we need to at least allow the AP to boot (to initialize it), and if NO_BOOT was set we\u0027d also need to awkwardly reboot again after that to clear it.\n\nI think we can still be pretty confident that this cannot open security holes since vboot makes sure it has a valid kernel TPM space (for the rollback stuff) during normal boots, and if the Cr50 parsing side was permanently broken we\u0027d notice that EC software sync doesn\u0027t work during testing.",
      "parentUuid": "2c527349_0f2205ea",
      "range": {
        "startLine": 59,
        "startChar": 3,
        "endLine": 59,
        "endChar": 34
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4cf21eb9_8457afac",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 59,
      "author": {
        "id": 1106949
      },
      "writtenOn": "2020-02-20T21:39:46Z",
      "side": 1,
      "message": "If the struct is old, Cr50 will return error to the EC when hashes are being matched. That\u0027ll make EC not to set NO_BOOT flag.\n\nI think such a system can continue to operate on the legacy model (and that\u0027s how I\u0027m going to implement EFS2). There is no security breach.\n\nEFS2 is more like a feature, which works only if all the components \u0026 data are installed as required. If not, the system (should) fallback to the legacy boot model.",
      "parentUuid": "4c232e10_e2939569",
      "range": {
        "startLine": 59,
        "startChar": 3,
        "endLine": 59,
        "endChar": 34
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9dc2e5d0_ba318d10",
        "filename": "firmware/2lib/include/2secdata_struct.h",
        "patchSetId": 10
      },
      "lineNbr": 61,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-02-17T16:39:11Z",
      "side": 1,
      "message": "How about linking to the design doc or the umbrella bug here?",
      "range": {
        "startLine": 61,
        "startChar": 1,
        "endLine": 61,
        "endChar": 3
      },
      "revId": "e7598372b9cecd5fd37c4c2234f41f296c609fb0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}