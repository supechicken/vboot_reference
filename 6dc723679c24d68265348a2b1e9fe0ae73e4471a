{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7dd8f10b_284443ca",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-10-26T07:41:40Z",
      "side": 1,
      "message": "No period at the end.",
      "range": {
        "startLine": 7,
        "startChar": 58,
        "endLine": 7,
        "endChar": 59
      },
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d8fb358_555ac99a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-10-26T10:17:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7dd8f10b_284443ca",
      "range": {
        "startLine": 7,
        "startChar": 58,
        "endLine": 7,
        "endChar": 59
      },
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58530d19_0f443ccf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 8,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-10-26T07:41:40Z",
      "side": 1,
      "message": "Could you explain more about the purpose of the change (and maybe how this relates to b/253966060)? If `--emulate` and the dummy programmer are equivalent, why do we prefer one over the other?",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "68c2655e_040ae7c4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 8,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2022-10-26T08:53:32Z",
      "side": 1,
      "message": "I\u0027d ask the same questions. All the special cases and quirks were made for using special programmers, but these are all not needed if we do --emulate. So why change to the dummy programmer that has more special cases? Why can\u0027t we stay with --emulate?\n\nOr, if you really prefer to call the dummy programmer, I think another approach is to modify the emulation layer so it\u0027ll choose the dummy programmer when needed. Isn\u0027t that better than handling the special cases everywhere?",
      "parentUuid": "58530d19_0f443ccf",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "da4b1ee3_d1a1ecc6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 8,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-10-26T10:17:55Z",
      "side": 1,
      "message": "It avoids duplication and the dummy programmer covers the full API surface rather than requiring special-casing for every interaction with flashrom so adding new interactions with flashrom are implicitly covered by a fake implementation in testing rather than needing special handling.\n\nI think go/tott/528 covers good reasons for dummy programmer being a better choice of fake implementation.",
      "parentUuid": "58530d19_0f443ccf",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "554ef775_4bd5f8ef",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 8,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-11-02T06:55:13Z",
      "side": 1,
      "message": "Thanks. I think PS8 makes much better sense right now.",
      "parentUuid": "da4b1ee3_d1a1ecc6",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9eb5d152_31c36b83",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 16,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-10-26T07:41:40Z",
      "side": 1,
      "message": "How\u0027s this related to the `--emulate` change? Would any test fail without the extra size mismatch check?",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df5a6b77_117ad4e4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 16,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-10-26T10:17:55Z",
      "side": 1,
      "message": "Yes. There was a test that checks for the error message emitted by the emulate codepath, but I guess the specifics of the error message don\u0027t matter too much so removed.",
      "parentUuid": "9eb5d152_31c36b83",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad447e1c_21933e97",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-10-25T08:51:17Z",
      "side": 1,
      "message": "Hungte could you take a look at the chain? I don\u0027t quite understand the modified code here.",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4672e6d3_0ceff9bd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2022-10-26T08:02:01Z",
      "side": 1,
      "message": "I remember one advantage of --emulate is that we don\u0027t need root permission, while flashrom dummy programmer used to rely on root. Is that already changed?",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "205b3e82_2c9afe88",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2022-10-26T08:27:29Z",
      "side": 1,
      "message": "never mind, I just recalled that we\u0027re using libflashrom now.",
      "parentUuid": "4672e6d3_0ceff9bd",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7f8d65c_e170a720",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2022-10-27T00:06:15Z",
      "side": 1,
      "message": "dummy should not need root for the cli or lib entry-points. the cli now is simply a caller of the lib API apart from the case of parallel programmers which we don\u0027t use.",
      "parentUuid": "205b3e82_2c9afe88",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e2ca94bb_b4b1f9be",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-10-27T01:39:07Z",
      "side": 1,
      "message": "I think the usual problem running flashrom as not root is it\u0027s installed to /usr/sbin so it isn\u0027t found by $PATH-based lookups.",
      "parentUuid": "a7f8d65c_e170a720",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eaf2b5f3_7e8e293f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2022-11-02T02:19:59Z",
      "side": 1,
      "message": "Not just that. I remember at least it\u0027ll create the lock file which needs root permission.",
      "parentUuid": "e2ca94bb_b4b1f9be",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0bbf1fbe_df1cfb0a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2022-11-07T22:20:37Z",
      "side": 1,
      "message": "No not for dummy, see here https://chromium.googlesource.com/chromiumos/third_party/flashrom/+/refs/heads/master/flashrom.c#153",
      "parentUuid": "eaf2b5f3_7e8e293f",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87d44914_0f22ff0d",
        "filename": "futility/updater.h",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2022-10-26T07:41:40Z",
      "side": 1,
      "message": "I think it should be fine to move this to right below `QUIRK_PRESERVE_ME`?",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1dc51ea5_2e51d741",
        "filename": "futility/updater.h",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-10-26T10:17:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "87d44914_0f22ff0d",
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d6deea8_fd39e79c",
        "filename": "futility/updater_utils.c",
        "patchSetId": 4
      },
      "lineNbr": 801,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2022-10-26T08:53:32Z",
      "side": 1,
      "message": "this used to be handled by the underlying engine (libflashrom). Why we need to fail here?",
      "range": {
        "startLine": 796,
        "startChar": 0,
        "endLine": 801,
        "endChar": 2
      },
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8ec810cd_07731efe",
        "filename": "futility/updater_utils.c",
        "patchSetId": 4
      },
      "lineNbr": 801,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-10-26T10:17:55Z",
      "side": 1,
      "message": "In tests `emulate_write_firmware()` performed this check, and the test expects the output to contain \"Image size is different\". libflashrom will handle this, but error message output is just the generic \"Failed writing firmware.\"",
      "parentUuid": "4d6deea8_fd39e79c",
      "range": {
        "startLine": 796,
        "startChar": 0,
        "endLine": 801,
        "endChar": 2
      },
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "471b0b78_99407753",
        "filename": "futility/updater_utils.c",
        "patchSetId": 4
      },
      "lineNbr": 801,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2022-10-27T00:06:15Z",
      "side": 1,
      "message": "Can you add a comment Sam and do you believe this is actually something that should be fixed in the API to give back better telemetry to the call site?",
      "parentUuid": "8ec810cd_07731efe",
      "range": {
        "startLine": 796,
        "startChar": 0,
        "endLine": 801,
        "endChar": 2
      },
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4fb37b28_82181aae",
        "filename": "futility/updater_utils.c",
        "patchSetId": 4
      },
      "lineNbr": 801,
      "author": {
        "id": 1116026
      },
      "writtenOn": "2022-10-27T01:39:07Z",
      "side": 1,
      "message": "`flashrom_image_write()` in libflashrom.h does document returning \"4 if buffer_len doesn\u0027t match the size of the flash chip\" so we can check for that to detect this case. It isn\u0027t currently specifically checked for outside one test though so it\u0027s probably fine as is.",
      "parentUuid": "471b0b78_99407753",
      "range": {
        "startLine": 796,
        "startChar": 0,
        "endLine": 801,
        "endChar": 2
      },
      "revId": "6dc723679c24d68265348a2b1e9fe0ae73e4471a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}