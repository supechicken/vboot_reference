{
  "comments": [
    {
      "key": {
        "uuid": "8c21e85f_5e4a5c64",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2017-02-21T07:18:32Z",
      "side": 1,
      "message": "if the private key is mandatory, what is the public key used for ?\nthe public key can always be derived from the private one ?\n(as done in the  \u0027futility create\u0027 code for example)",
      "range": {
        "startLine": 495,
        "startChar": 0,
        "endLine": 496,
        "endChar": 81
      },
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91bef385_c57f5bc2",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1129199
      },
      "writtenOn": "2017-02-21T09:38:35Z",
      "side": 1,
      "message": "Right, the RSA public key can be derived from the private key.\n\nI tried to implement, but one thing that is missing is the key version field (that is present in vbpubk2, not in vbprik2, usually set to 1, AFAICT). Any idea what the version field is used for?",
      "parentUuid": "8c21e85f_5e4a5c64",
      "range": {
        "startLine": 495,
        "startChar": 0,
        "endLine": 496,
        "endChar": 81
      },
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f23a085d_94a38546",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2017-02-21T10:41:00Z",
      "side": 1,
      "message": "AFAICT that\u0027s the version for rollback protection when we are rotating keys (as used by the kernel and the firmware, eg mp-v2)\n\nI\u0027m not the expert but:\nYou might just want to use --version flag if it exists or the default value.\nOverall it doesn\u0027t mean much for this case.",
      "parentUuid": "91bef385_c57f5bc2",
      "range": {
        "startLine": 495,
        "startChar": 0,
        "endLine": 496,
        "endChar": 81
      },
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0288d001_a5660588",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1129199
      },
      "writtenOn": "2017-02-21T11:21:07Z",
      "side": 1,
      "message": "I\u0027m pretty sure we\u0027ll want to change keys for hammer (dev-\u003epremp-\u003emp), and have support for even later rotations (since we\u0027ll implement rollback protection), and it would be hacky to pass that version to the required script (../vboot_reference/scripts/image_signing/sign_official_build.sh)...\n\nMaybe the vbpuk2 file is a better option after all?",
      "parentUuid": "f23a085d_94a38546",
      "range": {
        "startLine": 495,
        "startChar": 0,
        "endLine": 496,
        "endChar": 81
      },
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ae72a6f_f72712dc",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2017-02-21T12:31:41Z",
      "side": 1,
      "message": "\u003e it would be hacky to pass that version to the required script \n\u003e (../vboot_reference/scripts/image_signing/sign_official_build.sh)...\n\nActually I think sign_official_build.sh is already using an external version file for this (the last optional parameter of the script invocation) which something like firmware_version\u003d2 or kernel_version\u003d3 inside.\nAnd all the official keysets we are generating for our signing servers already contain the key.versions file with those parameters (and are passed by the signer python script to the sign_official.build.sh script).\nSo to roll your keys on Hammer, this might still be the easiest path.\n\nBut you can probably find people who know this better than me.",
      "parentUuid": "0288d001_a5660588",
      "range": {
        "startLine": 495,
        "startChar": 0,
        "endLine": 496,
        "endChar": 81
      },
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef9bb46b_6dbc5001",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1129199
      },
      "writtenOn": "2017-02-22T06:14:24Z",
      "side": 1,
      "message": "Thanks, this is making a lot of sense now. Replaced --pubkey with --version.",
      "parentUuid": "1ae72a6f_f72712dc",
      "range": {
        "startLine": 495,
        "startChar": 0,
        "endLine": 496,
        "endChar": 81
      },
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02a89a79_344c3509",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 501,
      "author": {
        "id": 1129199
      },
      "writtenOn": "2017-02-21T06:46:20Z",
      "side": 1,
      "message": "Yes, these exceed 80 characters, but it\u0027s for a good cause...",
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe0895ec_ee668151",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 501,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2017-02-21T07:18:32Z",
      "side": 1,
      "message": "Is this better than the previous style with more splitted strings ?",
      "parentUuid": "02a89a79_344c3509",
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3227230c_7692aa6f",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 501,
      "author": {
        "id": 1129199
      },
      "writtenOn": "2017-02-21T09:38:35Z",
      "side": 1,
      "message": "I mean, at least I can read and understand the help string, and align it to some fixed width a bit more easily.",
      "parentUuid": "fe0895ec_ee668151",
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9abd33d0_30add85a",
        "filename": "futility/cmd_sign.c",
        "patchSetId": 1
      },
      "lineNbr": 501,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2017-02-21T12:31:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3227230c_7692aa6f",
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d3d10ca_ca6456af",
        "filename": "futility/file_type_rwsig.c",
        "patchSetId": 1
      },
      "lineNbr": 335,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2017-02-21T07:18:32Z",
      "side": 1,
      "message": "we releasing here memory allocated by the caller ?\na bit weird",
      "range": {
        "startLine": 332,
        "startChar": 0,
        "endLine": 335,
        "endChar": 27
      },
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1a6b801_8a9cbda3",
        "filename": "futility/file_type_rwsig.c",
        "patchSetId": 1
      },
      "lineNbr": 335,
      "author": {
        "id": 1129199
      },
      "writtenOn": "2017-02-22T06:14:24Z",
      "side": 1,
      "message": "I\u0027ll address that in another patch.",
      "parentUuid": "5d3d10ca_ca6456af",
      "range": {
        "startLine": 332,
        "startChar": 0,
        "endLine": 335,
        "endChar": 27
      },
      "revId": "e0806bd9aa2a1c2811b8e3eb561259d874389c7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}