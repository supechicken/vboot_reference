{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "25ba3f37_0b98d05d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2021-12-15T06:27:26Z",
      "side": 1,
      "message": "\u003e \"visable\" is a possible misspelling of \"visible\".\n\nPlease fix.",
      "parentUuid": "4ec0ab63_5c53da3a",
      "range": {
        "startLine": 7,
        "startChar": 53,
        "endLine": 7,
        "endChar": 60
      },
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c259340_55fa391c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2021-12-15T06:27:26Z",
      "side": 1,
      "message": "Do you mean vboot_fw.a?",
      "range": {
        "startLine": 9,
        "startChar": 24,
        "endLine": 9,
        "endChar": 31
      },
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8aa9941_cbffa2e7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2021-12-15T06:27:26Z",
      "side": 1,
      "message": "I\u0027m fine with this change, but I don\u0027t see how this fixes b/209702505.",
      "range": {
        "startLine": 12,
        "startChar": 4,
        "endLine": 12,
        "endChar": 15
      },
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f0e1acd_200140e6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1165921
      },
      "writtenOn": "2021-12-15T16:24:34Z",
      "side": 1,
      "message": "It fixes part of this...there is a coreboot fix needed also",
      "parentUuid": "b8aa9941_cbffa2e7",
      "range": {
        "startLine": 12,
        "startChar": 4,
        "endLine": 12,
        "endChar": 15
      },
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "416c9773_718e7fb3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2021-12-15T04:59:27Z",
      "side": 1,
      "message": "i don\u0027t know if the underlying reasons make sense, but the CL as-is seems fine.  defer to the vboot maintainers though.",
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d5e72b84_c3b31c1f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-12-15T20:30:53Z",
      "side": 1,
      "message": "Sorry, I don\u0027t understand the point of this patch and I don\u0027t think it\u0027s actually doing anything. The coreboot firmware build always builds only the fwlib target and always sets the FIRMWARE_ARCH variable, so this patch should change absolutely nothing about it.\n\nI think this seems to be a misunderstanding about the failure in b/209702505. That\u0027s not caused by the coreboot firmware build (i.e. what\u0027s chained from coreboot/src/security/vboot/Makefile.inc) -- it\u0027s caused by the coreboot build system also building futility (see coreboot/util/futility/Makefile.inc). vboot is now considered a core coreboot feature (no longer specific to just Chrome OS), and futility is the userspace utility you need to manage vboot keys in a coreboot image -- that\u0027s why it\u0027s considered part of the supporting userspace toolset for coreboot.",
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68db7a3f_0343db0a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1165921
      },
      "writtenOn": "2021-12-15T21:01:08Z",
      "side": 1,
      "message": "To test the failure that *this* CL fixes, try this out of the chroot:\n\ncd /tmp/somewhere\nmake -C /path/to/cosarm/src/platform/vboot_reference fwlib\n\nOf course, the root cause is the change to using the flashrom library, but we are trying to \u0027fix forward\u0027 rather than revert loads of patches.",
      "parentUuid": "d5e72b84_c3b31c1f",
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad2f1aac_447c9ffe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-12-15T21:10:15Z",
      "side": 1,
      "message": "What am I supposed to see there? I get\n\n\u003e make: Entering directory \u0027/usr/local/google/home/jwerner/chromiumos/src/platform/vboot_reference\u0027\n\u003e Package flashrom was not found in the pkg-config search path.\n\u003e Perhaps you should add the directory containing `flashrom.pc\u0027\n\u003e to the PKG_CONFIG_PATH environment variable\n\u003e No package \u0027flashrom\u0027 found\n\u003e vboot SHA256 built with tight loops (slower, smaller code size)\n\u003e make: Nothing to be done for \u0027fwlib\u0027.\n\u003e make: Leaving directory \u0027/usr/local/google/home/jwerner/chromiumos/src/platform/vboot_reference\u0027\n\nand that\u0027s basically WAI. This is not a flashrom problem... the flashrom part is a red herring because of the `FLASHROM_LIBS :\u003d $(shell ${PKG_CONFIG} --libs flashrom)` line, it just says that it can\u0027t find that, but that\u0027s okay because the target I\u0027m trying to build doesn\u0027t depend on FLASHROM_LIBS anyway. The actual output here is `make: Nothing to be done for \u0027fwlib\u0027.`, which is not surprising because you\u0027re not supposed to call the `fwlib` without passing FIRMWARE_ARCH. If you call it as `make -C /path/to/cosarm/src/platform/vboot_reference fwlib FIRMWARE_ARCH\u003dx86` it will actually start to build (and then fail because you also need to make sure you have the right cross-compiler and correct flags and whatever... but nothing related to flashrom).\n\nIf you want to remove the red herring message, it\u0027s probably enough to just change FLASHROM_LIBS from eager to lazy evaluation (i.e. assign with \u003d, not :\u003d ).",
      "parentUuid": "68db7a3f_0343db0a",
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d63c619b_56be8218",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2021-12-16T04:36:22Z",
      "side": 1,
      "message": "\u003e If you want to remove the red herring message, it\u0027s probably enough to just change FLASHROM_LIBS from eager to lazy evaluation (i.e. assign with \u003d, not :\u003d ).\n\nuse of :\u003d with $(shell ...) is deliberate.  otherwise every place that gets expanded turns into a shell fork+exec.  in LIBS is not super noticeable (as long as you don\u0027t link a lot of things), but it\u0027s noticeable when it\u0027s CFLAGS and you compile a lot of files.\n\nusually the answer is to protect the call entirely with whatever dynamic logic the system has (e.g. something like a USE_FLASHROM knob).",
      "parentUuid": "ad2f1aac_447c9ffe",
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d96a12d2_01f125ad",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1165921
      },
      "writtenOn": "2021-12-16T18:21:46Z",
      "side": 1,
      "message": "Without this CL:\n\nPackage flashrom was not found in the pkg-config search path.\nPerhaps you should add the directory containing `flashrom.pc\u0027\nto the PKG_CONFIG_PATH environment variable\nNo package \u0027flashrom\u0027 found\nvboot SHA256 built with tight loops (slower, smaller code size)\n    CC            futility/updater_utils.o\nfutility/updater_utils.c:18:10: fatal error: libflashrom.h: No such file or directory\n   18 | #include \u003clibflashrom.h\u003e\n      |          ^~~~~~~~~~~~~~~\ncompilation terminated.",
      "parentUuid": "ad2f1aac_447c9ffe",
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5beec9dc_d8eacb48",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1165921
      },
      "writtenOn": "2021-12-16T18:21:46Z",
      "side": 1,
      "message": "sorry, didn\u0027t send this. I blame gerrit",
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "41409334_b5beb322",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-12-16T18:34:06Z",
      "side": 1,
      "message": "\u003e usually the answer is to protect the call entirely with whatever dynamic logic the system has (e.g. something like a USE_FLASHROM knob).\n\nWell, at the moment it\u0027s just target-dependent for us, not controlled by a variable, so I don\u0027t think that\u0027s possible. But again, the error output doesn\u0027t actually harm anything so I don\u0027t think it\u0027s a big deal to just leave it.\n\n@Simon, I still don\u0027t understand, are you saying you get that output from explicitly building only the fwlib target? You really shouldn\u0027t -- I don\u0027t. Are you using a different version of the Makefile?",
      "parentUuid": "d96a12d2_01f125ad",
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b3f7ee3d_73f631db",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1165921
      },
      "writtenOn": "2022-08-04T13:56:02Z",
      "side": 1,
      "message": "It has been a while and I have forgotten about this.\n\nYes it is the fwlib target, as above:\n\ncd /tmp/somewhere\nmake -C /path/to/cosarm/src/platform/vboot_reference fwlib\n\nWhy can we not use the fwlib target?\n\nBut how do people build the library from another project, if we get errors?",
      "parentUuid": "41409334_b5beb322",
      "revId": "047f9f25aea58cff4af3b6587d5465b7db590649",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}