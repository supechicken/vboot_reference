{
  "comments": [
    {
      "key": {
        "uuid": "6685aef8_c58e89ce",
        "filename": "firmware/2lib/include/2struct.h",
        "patchSetId": 14
      },
      "lineNbr": 224,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-05-10T23:27:20Z",
      "side": 1,
      "message": "I still don\u0027t think these offsets need to be stored in shared data, they\u0027re only used once.",
      "revId": "71b32bc8ed44bb1cd7bc51c6c53ce3dbc318d3ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24d472f9_7b7cb166",
        "filename": "firmware/lib/region-init.c",
        "patchSetId": 14
      },
      "lineNbr": 45,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-05-10T23:27:20Z",
      "side": 1,
      "message": "I think it would be good to move this one into a shared file (e.g. lib20/misc.c or packed_key.c) and also use it in vb2_load_fw_keyblock()). I would suggest an API of\n\n // Loads key data onto the provided workbuf state, figuring out the right\n // size and only loading as much as necessary. \n vb2_read_gbb_key(ctx, offset, size, \u0026wb)\n\nThen you don\u0027t really malloc anything anymore, the functions using root and recovery key can just load, use and discard the key directly on the workbuf. All this is probably too much for one CL, but we should try to move in that direction (i.e. don\u0027t persist anything on the workbuf permanently and just always memcpy() to malloc() for now until we can get rid of that too).",
      "revId": "71b32bc8ed44bb1cd7bc51c6c53ce3dbc318d3ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47c029fc_29998fb2",
        "filename": "firmware/lib/region-init.c",
        "patchSetId": 14
      },
      "lineNbr": 53,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-05-10T23:27:20Z",
      "side": 1,
      "message": "No need to cache these anywhere, each key is only needed once (in normal mode).",
      "revId": "71b32bc8ed44bb1cd7bc51c6c53ce3dbc318d3ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "baf91b9e_b82cfb21",
        "filename": "firmware/lib/region-init.c",
        "patchSetId": 14
      },
      "lineNbr": 99,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-05-10T23:27:20Z",
      "side": 1,
      "message": "Just load it directly into the provided buffer. Not used in any critical path.",
      "revId": "71b32bc8ed44bb1cd7bc51c6c53ce3dbc318d3ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb3445aa_9c6aa7fd",
        "filename": "firmware/lib/region-init.c",
        "patchSetId": 14
      },
      "lineNbr": 120,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-05-10T23:27:20Z",
      "side": 1,
      "message": "Can this just be a return?",
      "revId": "71b32bc8ed44bb1cd7bc51c6c53ce3dbc318d3ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fbf9d546_22063165",
        "filename": "firmware/lib/region-init.c",
        "patchSetId": 14
      },
      "lineNbr": 136,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-05-10T23:27:20Z",
      "side": 1,
      "message": "I don\u0027t think there\u0027s any way this can be NULL? If you want to allow for that possibility, you\u0027ll need to make vb2_get_gbb() explicitly check if the offset is 0 and then return NULL.",
      "revId": "71b32bc8ed44bb1cd7bc51c6c53ce3dbc318d3ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab40d30b_23b3c24a",
        "filename": "tests/vb2_misc_tests.c",
        "patchSetId": 14
      },
      "lineNbr": 22,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-05-10T23:27:20Z",
      "side": 1,
      "message": "You\u0027re not overriding vb2_get_gbb() in this one?",
      "revId": "71b32bc8ed44bb1cd7bc51c6c53ce3dbc318d3ac",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}