{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b8e622a7_ab649308",
        "filename": "firmware/2lib/2ui_screens.c",
        "patchSetId": 17
      },
      "lineNbr": 1156,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-02-25T07:21:48Z",
      "side": 1,
      "message": "I\u0027m not sure I understand what this is accomplishing, and why only some of the vb2_ui_screen_back calls are changed.  Could you explain?",
      "range": {
        "startLine": 1155,
        "startChar": 0,
        "endLine": 1156,
        "endChar": 33
      },
      "revId": "8e10425811c8cb0ec27f88d27ef99c36724d9005",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "918f1f07_475705a9",
        "filename": "firmware/2lib/2ui_screens.c",
        "patchSetId": 17
      },
      "lineNbr": 1156,
      "author": {
        "id": 1240396
      },
      "writtenOn": "2021-02-25T08:04:00Z",
      "side": 1,
      "message": "For those functions which are called directly from ui loop, there is no different between returning SUCCESS and REQUEST_UI_CONTINUE.\n\nBut this function is like this: \nUI_Loop -\u003e diagnostics_memory_init_quick -\u003e diagnostics_memory_update_screen\n\nIf we return VB2_SUCCESS, then we cannot just use VB2_TRY in `diagnostics_memory_init_quick` because it will catch it, and then perform `log_page_reset_to_top`, which is now calling `log_page_update`, and cause error.\n\nThis issue actually has happened before this CL. log_page_init will perform on the screen which is changed by `vb2_ui_screen_back`.",
      "parentUuid": "b8e622a7_ab649308",
      "range": {
        "startLine": 1155,
        "startChar": 0,
        "endLine": 1156,
        "endChar": 33
      },
      "revId": "8e10425811c8cb0ec27f88d27ef99c36724d9005",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0463d359_55e4abd7",
        "filename": "firmware/2lib/2ui_screens.c",
        "patchSetId": 17
      },
      "lineNbr": 1156,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-02-26T07:22:52Z",
      "side": 1,
      "message": "A few points here:\n\n(1) The bug you are describing is introduced by CL:2714502.  It should be fixed there, rather than patching it in another CL stacked on top.  I\u0027ve uploaded a CL which adds unit test coverage around this issue at CL:2721377.  Please stack CL:2714502 on top of this one -- it fails the unit test.\n\n(2) This applies not only to this particular call to vb2_ui_screen_back, but to vb2_ui_screen_change and vb2_ui_menu_select as well.  So the solution here should apply to all calls to these three functions.\n\n(3) Rather than requiring the caller of these three functions to always use the sequence here (VB2_TRY + return UI_CONTINUE), I\u0027d recommend just returning the VB2_REQUEST value from these three functions directly.  That way, the caller doesn\u0027t need the extra return statement after VB2_TRY.",
      "parentUuid": "918f1f07_475705a9",
      "range": {
        "startLine": 1155,
        "startChar": 0,
        "endLine": 1156,
        "endChar": 33
      },
      "revId": "8e10425811c8cb0ec27f88d27ef99c36724d9005",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}