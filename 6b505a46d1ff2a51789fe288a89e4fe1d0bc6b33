{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ed22d385_68b120a9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-12-05T09:13:41Z",
      "side": 1,
      "message": "remove this",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 39
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89ddf921_2662bad3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:25:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ed22d385_68b120a9",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 39
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92956190_1e8ff042",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1515687
      },
      "writtenOn": "2024-12-03T08:21:56Z",
      "side": 1,
      "message": "Friendly ping for review of v3. ;)",
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4279efc1_51682e05",
        "filename": "firmware/include/gpt_misc.h",
        "patchSetId": 3
      },
      "lineNbr": 117,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-12-05T09:13:08Z",
      "side": 1,
      "message": "In CL:6030619 this is set in `vb2_load_android_kernel` in 2load_android_kernel.c. For consistency\u0027s sake (with `current_kernel`), as in another [comment](https://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/6030620/comment/fcfe7c7e_10f9953d/) the plan is to add a new GPT partition type for Android kernels, we may set `current_ab_slot` in `GptNextKernelEntry` (when seeing Android kernels), so that `GptData` isn\u0027t modified outside the cgpt code. We may also rename this to `current_android_slot_suffix`. WDYT?",
      "range": {
        "startLine": 117,
        "startChar": 13,
        "endLine": 117,
        "endChar": 28
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21501764_23ff1a87",
        "filename": "firmware/include/gpt_misc.h",
        "patchSetId": 3
      },
      "lineNbr": 117,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-12-05T22:25:01Z",
      "side": 1,
      "message": "I don\u0027t really like the redundancy between having both `current_kernel` and this in here to be honest. Do we really need it?\n\nAs far as I can tell, this is only used in two places: in `vb2_load_android_kernel()`, it is determined from `current_kernel` and then immediately used, so it could just be a local variable there. And in `vb2_load_{pvmfw,android_ramdisks}()`, it looks like the initial `vboot_avb_get_preloaded_partition()` receives the full partition name (including suffix) anyway, but then you throw the suffix away and take it from here instead? That seems wrong anyway. When AVB instructs us to load a specific partition (name and suffix), we should be loading exactly that partition.",
      "parentUuid": "4279efc1_51682e05",
      "range": {
        "startLine": 117,
        "startChar": 13,
        "endLine": 117,
        "endChar": 28
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20a11502_c80ce171",
        "filename": "firmware/include/gpt_misc.h",
        "patchSetId": 3
      },
      "lineNbr": 117,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:25:02Z",
      "side": 1,
      "message": "AVB choose the suffix based on the one we pass to avb_slot_verify(). So I thought it would be easier and cleaner to keep it GptData structure instead of passing it throuh the chain of functions. But I am fine with extracting it in vboot_avb_get_preloaded_partition() and use it for preloading all the other partitions.",
      "parentUuid": "21501764_23ff1a87",
      "range": {
        "startLine": 117,
        "startChar": 13,
        "endLine": 117,
        "endChar": 28
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76eb30fa_88e85667",
        "filename": "firmware/include/gpt_misc.h",
        "patchSetId": 3
      },
      "lineNbr": 117,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-12-07T01:45:38Z",
      "side": 1,
      "message": "Yes, I think `vboot_avb_get_preloaded_partition()` should only work on the partition name passed in and not try to rely on existing state set up elsewhere so much. Added more comments on that patch now, hope that makes things clearer.",
      "parentUuid": "20a11502_c80ce171",
      "range": {
        "startLine": 117,
        "startChar": 13,
        "endLine": 117,
        "endChar": 28
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e774a69_7c21e401",
        "filename": "firmware/include/gpt_misc.h",
        "patchSetId": 3
      },
      "lineNbr": 117,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-10T09:12:33Z",
      "side": 1,
      "message": "What about comment https://chromium-review.googlesource.com/c/chromiumos/platform/depthcharge/+/6030716/comment/e9847e3d_98ab8eb9/ ? I really like Yu-Ping\u0027s idea of getting rid of partition number macros and using slot suffix field instead.",
      "parentUuid": "76eb30fa_88e85667",
      "range": {
        "startLine": 117,
        "startChar": 13,
        "endLine": 117,
        "endChar": 28
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ffcc70f_f976e99d",
        "filename": "firmware/include/gpt_misc.h",
        "patchSetId": 3
      },
      "lineNbr": 117,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-12-11T01:12:12Z",
      "side": 1,
      "message": "I totally agree that you shouldn\u0027t hardcode partition numbers, but I don\u0027t think you need to put the suffix into kparams instead? Can\u0027t you just parse the suffix out of the partition table entry pointed to by current_kernel in that function (I think that\u0027s the only one that needs this)?",
      "parentUuid": "3e774a69_7c21e401",
      "range": {
        "startLine": 117,
        "startChar": 13,
        "endLine": 117,
        "endChar": 28
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "016f439f_80866b94",
        "filename": "firmware/include/gpt_misc.h",
        "patchSetId": 3
      },
      "lineNbr": 117,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-11T13:27:41Z",
      "side": 1,
      "message": "Can I do that from depthcharge/",
      "parentUuid": "6ffcc70f_f976e99d",
      "range": {
        "startLine": 117,
        "startChar": 13,
        "endLine": 117,
        "endChar": 28
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4c76a19_a15a8bbf",
        "filename": "firmware/lib/cgptlib/cgptlib.c",
        "patchSetId": 3
      },
      "lineNbr": 262,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-12-05T22:25:01Z",
      "side": 1,
      "message": "nit: let\u0027s also call this `opt_suffix` for consistency (and to make it easier to see when just reading the function signature that it\u0027s valid to leave it NULL).",
      "range": {
        "startLine": 262,
        "startChar": 73,
        "endLine": 262,
        "endChar": 79
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0657650c_086d35e5",
        "filename": "firmware/lib/cgptlib/cgptlib.c",
        "patchSetId": 3
      },
      "lineNbr": 262,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:25:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c4c76a19_a15a8bbf",
      "range": {
        "startLine": 262,
        "startChar": 73,
        "endLine": 262,
        "endChar": 79
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be1a3d52_629cd09b",
        "filename": "firmware/lib/cgptlib/cgptlib.c",
        "patchSetId": 3
      },
      "lineNbr": 271,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-12-05T22:25:01Z",
      "side": 1,
      "message": "This can just be `return e`",
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c04f9078_e3b802eb",
        "filename": "firmware/lib/cgptlib/cgptlib.c",
        "patchSetId": 3
      },
      "lineNbr": 271,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:25:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "be1a3d52_629cd09b",
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da2b2853_e723939e",
        "filename": "firmware/lib/cgptlib/include/cgptlib.h",
        "patchSetId": 3
      },
      "lineNbr": 36,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-12-05T09:13:08Z",
      "side": 1,
      "message": "if",
      "range": {
        "startLine": 36,
        "startChar": 10,
        "endLine": 36,
        "endChar": 12
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c0a3bc4a_50201ba1",
        "filename": "firmware/lib/cgptlib/include/cgptlib.h",
        "patchSetId": 3
      },
      "lineNbr": 36,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:25:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "da2b2853_e723939e",
      "range": {
        "startLine": 36,
        "startChar": 10,
        "endLine": 36,
        "endChar": 12
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bad39daa_1c917c0e",
        "filename": "firmware/lib/cgptlib/include/cgptlib.h",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-12-05T09:13:08Z",
      "side": 1,
      "message": "`suffix` for consistency with the function below.",
      "range": {
        "startLine": 40,
        "startChar": 69,
        "endLine": 40,
        "endChar": 79
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95bb019a_dd14d096",
        "filename": "firmware/lib/cgptlib/include/cgptlib.h",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:25:02Z",
      "side": 1,
      "message": "I changed the function below to `opt_suffix`. Julius pointed out that this parameter is optional so the opt prefix makes sense.",
      "parentUuid": "bad39daa_1c917c0e",
      "range": {
        "startLine": 40,
        "startChar": 69,
        "endLine": 40,
        "endChar": 79
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba6550ea_2965ddcb",
        "filename": "firmware/lib/cgptlib/include/cgptlib.h",
        "patchSetId": 3
      },
      "lineNbr": 43,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-12-05T09:13:08Z",
      "side": 1,
      "message": "Gets",
      "range": {
        "startLine": 43,
        "startChar": 3,
        "endLine": 43,
        "endChar": 6
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ca207f8_048a608b",
        "filename": "firmware/lib/cgptlib/include/cgptlib.h",
        "patchSetId": 3
      },
      "lineNbr": 43,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:25:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ba6550ea_2965ddcb",
      "range": {
        "startLine": 43,
        "startChar": 3,
        "endLine": 43,
        "endChar": 6
      },
      "revId": "6b505a46d1ff2a51789fe288a89e4fe1d0bc6b33",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}