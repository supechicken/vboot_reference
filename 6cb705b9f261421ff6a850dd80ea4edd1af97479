{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "34eab5f0_effcfd29",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-10-26T17:00:18Z",
      "side": 1,
      "message": "the root \u0026 recovery root keys are still 8k ...\n\nwe\u0027ll want to update utility/vbutil_what_keys too",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d0a9d9b_caa43611",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1524007
      },
      "writtenOn": "2023-10-26T19:28:22Z",
      "side": 1,
      "message": "my thought was to leave those keys as is because the new signing flow doesn\u0027t require them to live in Cloud KMS. would you prefer that I migrate these too?",
      "parentUuid": "34eab5f0_effcfd29",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc9586eb_ae402efe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-10-26T23:57:19Z",
      "side": 1,
      "message": "Sorry, why do you want to do this? What do our dev keys have to do with prod signing?\n\nChanging dev keys would be a big disruption to developers who\u0027d suddenly have the images they build not match the older firmware flashed to their devices anymore. We should not touch them unless we have a _really_ good reason that would warrant a lot of wasted developer time.",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c0d1360_b24a044b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1524007
      },
      "writtenOn": "2023-10-27T15:19:19Z",
      "side": 1,
      "message": "As part of the ChromeOS signing scaling project, we\u0027re migrating to Cloud KMS, which does not support 8K RSA (see go/cros-signing:8k24k). It is my intention to place a set of dev keys in a Cloud KMS key ring so that there is a local development story for the new signing flow, and @vapier@chromium.org suggested that I use the known dev keys for consistency. This requires migration from 8K to 4K RSA so that they can be stored in Cloud KMS.\n\nI started a thread about this (https://groups.google.com/a/google.com/g/chromeos-chatty-firmware/c/c-1FHIVmzio/m/onHeIwOmBAAJ) as well, hopefully this provides enough context.\n\nOpen to any other suggestions on how to proceed here",
      "parentUuid": "cc9586eb_ae402efe",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3591bb8a_8efcd8f7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-10-27T18:55:05Z",
      "side": 1,
      "message": "for this CL specifically, these are only the recovery \u0026 factory/rma kernel keys.  if someone is booting a dev keyed device, the root \u0026 recovery root keys will match, so it\u0027ll still be accepted.  so i don\u0027t think there will be any disruption at all.",
      "parentUuid": "3c0d1360_b24a044b",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1858bbb4_3624742e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-10-27T18:55:05Z",
      "side": 1,
      "message": "if we wanted to test firmware or recovery kernel rotation, we\u0027d need them in cloud kms right ?  but maybe that step is getting too far ahead of ourselves.\n\ni still think we should regen the root keys to step from 8k to 4k to match.  but i\u0027m ok with waiting on that as it wouldn\u0027t require regenerating any of the \"downstream\" keys (just refreshing the keyblocks).",
      "parentUuid": "3d0a9d9b_caa43611",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bc2fdd5_649a143e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-10-27T21:49:14Z",
      "side": 1,
      "message": "Well, what is the point of using the existing dev keys \"for consistency\" if you then change the existing dev keys? Then nothing is consistent with anything anymore!\n\n\u003e if someone is booting a dev keyed device, the root \u0026 recovery root keys will match, so it\u0027ll still be accepted. so i don\u0027t think there will be any disruption at all.\n\nIf they\u0027re booting on a device that they has been previously flashed with firmware containing the old keys it will not match, that is the problem. Booting a test image in recovery mode is a common use case to reset TPM values, it\u0027s done by everyone running FAFT (including partners) as well as a bunch of lab tests and repair flows (and AFAIK they still don\u0027t regularly update firmware in the lab). We would spend months getting bugs from confused people all over who have their tests break and the flows in their playbooks not work anymore, including partners who only have a specific SIE or TAM to talk to, so all those teams would need to be briefed extensively to recognize all expected and unexpected manifestations of this key mismatch. It would cause an enormous disruption and I still don\u0027t even see a clear benefit on the other side (nobody other than a handful of signing specialists would ever deal with Cloud KMS to test anything anyway, it shouldn\u0027t be that much to ask for them to point at a separate keyset for that).\n\nThis is a terrible idea and we should not do it. If you want a separate set of test keys for Cloud KMS, feel free to add them here to a new directory or something. Please don\u0027t touch the keys that are essential to the work of thousands of developers, most of which don\u0027t really understand how they work or how to recognize problems with them.",
      "parentUuid": "3591bb8a_8efcd8f7",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e37abd64_03e4e269",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-10-30T05:41:59Z",
      "side": 1,
      "message": "\u003e Well, what is the point of using the existing dev keys \"for consistency\" if you then change the existing dev keys? Then nothing is consistent with anything anymore!\n\nwe want the keysize to be consistent across keysets.  we aren\u0027t using 8k rsa anywhere anymore.  which means our devkeys that we test against are not consistent with our actual released devices.\n\nand the systems we\u0027re transitioning to don\u0027t support 8k.  so we can\u0027t use or verify those flows work with devkeys, only with release keys.  which is the exact opposite we want out of a CQ.\n\n\u003e If they\u0027re booting on a device that they has been previously flashed with firmware containing the old keys it will not match, that is the problem.\n\nagain, please look at the actual keys being changed here -- these are the installer kernel key \u0026 recovery kernel key.  the root \u0026 recovery root keys aren\u0027t changed here.  that means devices flashed with the existing root keys will trust these new keys just fine because they use the unchanged root keys to verify them.\n\n\u003e Booting a test image in recovery mode is a common use case to reset TPM values, it\u0027s done by everyone running FAFT (including partners) as well as a bunch of lab tests and repair flows (and AFAIK they still don\u0027t regularly update firmware in the lab). We would spend months getting bugs from confused people all over who have their tests break and the flows in their playbooks not work anymore, including partners who only have a specific SIE or TAM to talk to, so all those teams would need to be briefed extensively to recognize all expected and unexpected manifestations of this key mismatch. It would cause an enormous disruption and I still don\u0027t even see a clear benefit on the other side (nobody other than a handful of signing specialists would ever deal with Cloud KMS to test anything anyway, it shouldn\u0027t be that much to ask for them to point at a separate keyset for that).\n\ni doubt this is as much of a problem as you make it out.  but please post to the existing e-mail thread that already has a number of people/teams looped in, and/or the design doc that Benjamin wrote.",
      "parentUuid": "1bc2fdd5_649a143e",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9433fbe_77661420",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-10-30T22:29:18Z",
      "side": 1,
      "message": "\u003e we want the keysize to be consistent across keysets. we aren\u0027t using 8k rsa anywhere anymore. which means our devkeys that we test against are not consistent with our actual released devices.\n\nLike you\u0027re saying yourself you are not actually changing the root keys here, so this doesn\u0027t actually get you to full parity between dev and MP keys anyway. I understand that it\u0027s a minor inconvenience that algorithms differ between those keysets, but I also understand that it would cause a major clusterf*** for all our developers to try to align them, so I think leaving the situation as is is the best we can do.\n\nBesides, we\u0027ve already been using 4K root keys for ~8 years, and already had other algorithm differences before that. We\u0027re planning to switch to PQ-crypto \"soon\" anyway. It seems dumb that after all those years of not caring about this discrepancy, we would suddenly now be willing to deal with all the fallout of making a one-time change while RSA is on the way out in the next few years anyway.\n\n\u003e and the systems we\u0027re transitioning to don\u0027t support 8k. so we can\u0027t use or verify those flows work with devkeys, only with release keys. which is the exact opposite we want out of a CQ.\n\nLike I said you\u0027re welcome to create an extra set of \"cloud developer keys\" and check it in to another directory here. I just don\u0027t want you to disrupt the keys that are used by thousands of developers for a different thing for this just because you feel that it\u0027s \"cleaner\" to only have one set of developer keys. The very real practical problems that would be caused by this far outweigh aesthetical concerns here.\n\n\u003e i doubt this is as much of a problem as you make it out. but please post to the existing e-mail thread that already has a number of people/teams looped in, and/or the design doc that Benjamin wrote.\n\nI don\u0027t really see the point in duplicating my argument there, but if you insist...",
      "parentUuid": "e37abd64_03e4e269",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89762ddd_6cb00011",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-10-31T09:24:28Z",
      "side": 1,
      "message": "the only objection you\u0027ve raised in this CL (it will cause disruption for people) has been shown to be incorrect.  changing these specific keys unblocks the ability to use devkeys in cloud kms and causes no problems for anyone.\n\nwhether we also do root keys is a related question, but ultimately irrelevant to this CL.  so what objections do you have to this CL ?",
      "parentUuid": "d9433fbe_77661420",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c696797e_309aa92a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-10-31T23:07:47Z",
      "side": 1,
      "message": "\u003e the only objection you\u0027ve raised in this CL (it will cause disruption for people) has been shown to be incorrect.\n\nUhh what? Where have you shown anything? I have told you from the start that this will screw up everyone booting in recovery mode (which means everyone running FAFT, among other cases), and that is exactly what would happen.",
      "parentUuid": "89762ddd_6cb00011",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "07820239_203fe794",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2023-12-28T16:13:02Z",
      "side": 1,
      "message": "What was the resolution here?",
      "revId": "6cb705b9f261421ff6a850dd80ea4edd1af97479",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}