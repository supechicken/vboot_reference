{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "68319526_7ab8ca27",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 2
      },
      "lineNbr": 630,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2025-09-30T15:44:55Z",
      "side": 1,
      "message": "Sorry, but I\u0027m not quite convinced of this renaming. I think here \"cmdline\" refers to the space-separated format, and in `bootconfig_append_cmdline()` that cmdline-formatted string is converted to bootconfig-formatted string. \n\nI\u0027d explain the original naming this way. Vboot\u0027s `vb2api_load_kernel` API is responsible for filling in all `vb2_kernel_params` fields including `vboot_cmdline_buffer`. How `vboot_cmdline_buffer` is used is entirely up to the caller (depthcharge). The caller can either append it to the real cmdline, or convert it to bootconfig (and append \"bootconfig\" to cmdline). Either way, the decision is in the caller, and should be irrelevant to the field naming here.",
      "revId": "63a013e694f92fc961c50b4f1b4c7ddbcaf01ca1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a13219e_6b147c50",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 2
      },
      "lineNbr": 630,
      "author": {
        "id": 1544412
      },
      "writtenOn": "2025-10-01T03:34:04Z",
      "side": 1,
      "message": "I support Julius\u0027s proposal due to the following reasons:\nThe `vboot_cmdline_buffer` must adhere to the bootconfig format, as outlined in [1] and [2]. When the bootconfig cmdline arguments are appended to conventional kernel cmdline, any `kernel.*` prefixes must be removed if the string is retrieved from the bootconfig buffer. Additionally, Android properties must be converted from `androidboot.*` to `ro.boot.*` to ensure proper recognition by the OS.\n\nUnless we implement a parser/converter in depthcharge, bootconfig cmdline string and kernel cmdline string can not be used interchangeably.\n\n[1]: https://source.android.com/docs/core/architecture/bootloader/implementing-bootconfig\n[2]: https://docs.kernel.org/admin-guide/bootconfig.html",
      "parentUuid": "68319526_7ab8ca27",
      "revId": "63a013e694f92fc961c50b4f1b4c7ddbcaf01ca1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ebdd6de9_f4aeadea",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 2
      },
      "lineNbr": 630,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2025-10-02T15:31:37Z",
      "side": 1,
      "message": "I\u0027m resolving this because this naming is not a big deal.\n\n\u003e The `vboot_cmdline_buffer` must adhere to the bootconfig format\n\nThat\u0027s exactly my point, because we\u0027re not doing that. Bootconfig doesn\u0027t support space-separated entries, but we\u0027re forming a space-separated string in `vb2_load_android()`. So, from the `vboot_cmdline_buffer` format itself, it\u0027s a cmdline instead of a bootconfig string. I think both `verify_data-\u003ecmdline` and the `cmdline_string` argument of `bootconfig_append_cmdline()` are called \"cmdline\" for the same reason. Are you going to also rename the argument of `bootconfig_append_cmdline()` in depthcharge?\n\nTherefore, I still think \"cmdline\" is more appropriate than \"bootconfig\" here. At least we can name it something like \"androidboot_cmdline_buffer\" to make it clear that it doesn\u0027t contain those `kernel.*` parameters.",
      "parentUuid": "4a13219e_6b147c50",
      "revId": "63a013e694f92fc961c50b4f1b4c7ddbcaf01ca1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e16c650d_db0efde5",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 2
      },
      "lineNbr": 630,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-10-03T22:31:31Z",
      "side": 1,
      "message": "I understand where the name came from (because AVB calls it that), but that doesn\u0027t help the fact that it\u0027s incredibly confusing. We have exactly two pointers in kparams that pass kernel parameters back to depthcharge, one goes into the actual command line and one into bootconfig, and they\u0027re both called \"cmdline\". That is just going to throw off anyone trying to follow this stuff.\n\nIf you want to emphasize the fact that it is not formatted like a true bootconfig yet at this point we can find another name, but the name should make the difference clear between the actual command line and the fake command line that later becomes bootconfig. Maybe `real_cmdline_ptr` and `bootconfig_cmdline_buffer`/`bootconfig_cmdline_size`?",
      "parentUuid": "ebdd6de9_f4aeadea",
      "revId": "63a013e694f92fc961c50b4f1b4c7ddbcaf01ca1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0f92e77d_a19612ea",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 2
      },
      "lineNbr": 630,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2025-10-04T03:07:44Z",
      "side": 1,
      "message": "bootconfig_cmdline_buffer sounds good to me, but I\u0027ll defer that to Yidi.",
      "parentUuid": "e16c650d_db0efde5",
      "revId": "63a013e694f92fc961c50b4f1b4c7ddbcaf01ca1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "05a1caa0_83a293b4",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 2
      },
      "lineNbr": 630,
      "author": {
        "id": 1544412
      },
      "writtenOn": "2025-10-04T05:25:09Z",
      "side": 1,
      "message": "I updated the naming.\n\nLet\u0027s get following patches merged first.\n- vboot\nCL:6979704\nCL:6979706\n- depthcharge\nCL:6979174\nCL:6887991",
      "parentUuid": "0f92e77d_a19612ea",
      "revId": "63a013e694f92fc961c50b4f1b4c7ddbcaf01ca1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}