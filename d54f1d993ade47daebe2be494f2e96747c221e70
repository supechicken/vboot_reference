{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e48a1c6b_61e5301b",
        "filename": "firmware/2lib/include/2sysincludes.h",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-11-22T00:27:47Z",
      "side": 1,
      "message": "The CGPT code has never been endianness-safe, and there are many more serious issues in there than just printing GUIDs correctly. I think it\u0027s better to use an all-or-nothing approach for these kinds of things, because if you only use correct endinanness-accessors in a few places, people seeing them might erroneously believe that you\u0027ve done it everywhere.\n\nSo it would be good if all our GPT code was endianness-safe, and if you want to go through all the code and add the accessors wherever appropriate that would be great. But if you don\u0027t have time for that right now, I think it would be better to not add this and the few `le32toh()` in this patch, and instead leave that for a future cleanup over the whole code base. (vboot is also generally not endianness-safe elsewhere, e.g. in serialization and deserialization of runtime-persistent firmware data structures. It would be better if it was but it also just never really has been an important enough issue to address, seeing as big-endian CPUs are all but dead anyway.)",
      "fixSuggestions": [
        {
          "fixId": "cf206381_14f52103",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "firmware/2lib/include/2sysincludes.h",
              "range": {
                "startLine": 17,
                "startChar": 0,
                "endLine": 18,
                "endChar": 0
              },
              "replacement": ""
            }
          ]
        }
      ],
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4f456a3_d5d06d3c",
        "filename": "firmware/2lib/include/2sysincludes.h",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:38:33Z",
      "side": 1,
      "message": "I will try to add correct accessors to GPT related code, but this will be done at the end of my work, when all other comment are already resolved.",
      "parentUuid": "e48a1c6b_61e5301b",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f32ea18_9dfccde3",
        "filename": "firmware/2lib/include/2sysincludes.h",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-12-20T08:46:53Z",
      "side": 1,
      "message": "I\u0027d say, let\u0027s remove those `le32toh` calls for now and move on. The endianness-safe problem is unrelated to Android development anyway, which could be left as future work.",
      "parentUuid": "f4f456a3_d5d06d3c",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f92f890e_419cc66e",
        "filename": "firmware/2lib/include/2sysincludes.h",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-12-20T18:28:31Z",
      "side": 1,
      "message": "Well, the other thing (which I didn\u0027t realize yet when I wrote that other comment) is that we do need some be32-helpers for the RSA key transformation in a later patch, so I think we\u0027ll need to include \u003cendian.h\u003e anyway. In that case I guess we might as well use it for the UUID too.",
      "parentUuid": "7f32ea18_9dfccde3",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f4795f8_fb9a0d7d",
        "filename": "firmware/avb/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Address comment:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/c8eaa1f4_51130c78/",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e8b89b1_236ad041",
        "filename": "firmware/avb/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:38:33Z",
      "side": 1,
      "message": "Original comment from @jwerner@chromium.org\n\"I think it would be better to pull in AVB as a submodule or a pre-built library or something like that, and build it using its own official build system. [..]\"\n\nAs above, I will try to do that when all other comments are resolved.",
      "parentUuid": "5f4795f8_fb9a0d7d",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ca2fdf2_de8dbf56",
        "filename": "firmware/avb/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-12-20T08:46:53Z",
      "side": 1,
      "message": "\u003e For our depthcharge build we could either create a separate ebuild that builds libavb.a using Soong and then passes that file in for vboot to link, or we could have the vboot Makefile invoke the Soong build as a recipe.\n\nTo confirm, you meant building libavb using Soong *within CrOS SDK* right? I can see [aosp/build](https://source.corp.google.com/h/chrome-internal/chromeos/superproject/+/main:src/aosp/build/) already existing in the chromiumos manifest (with \"notdefault\" group though). However I\u0027m not sure how difficult it would be to build libavb using Soong.\n\nAnyway, for now I think it\u0027s good enough to file a bug and add a TODO comment linking to the bug in Makefile.",
      "parentUuid": "4e8b89b1_236ad041",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65cc193c_9dc88e81",
        "filename": "firmware/avb/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-12-20T18:28:31Z",
      "side": 1,
      "message": "Yes, as long as we\u0027re building firmware in CrOS SDK we\u0027d have to pull Soong in there somehow. I also don\u0027t know how complicated it is to set up in practice.",
      "parentUuid": "9ca2fdf2_de8dbf56",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d54270b_4970beae",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 30,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Address comment:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/4fdb0249_5d75bc95/",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "028b4c4a_7eded706",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 30,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:38:33Z",
      "side": 1,
      "message": "Original comment from @korneld@google.com:\n\"From what I can see the logic here is very similar to what is done in need_valid_keyblock.\nIMO it\u0027d be better to call that function from here instead, and set out_is_unlocked based on the result.\"\n\nDone.",
      "parentUuid": "7d54270b_4970beae",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76e777a1_ab6601fb",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Adress comment:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/c5383555_080c5e83/",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a5a9e47e_65d35f3e",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 32,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:38:33Z",
      "side": 1,
      "message": "Name `ctx` changed to `avbctx` for each occurence.",
      "parentUuid": "76e777a1_ab6601fb",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "409b353e_1dd993ff",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Address comment:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/a785d411_fc4ac2c8/",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5ffefb0_a19a5723",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Address comment:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/383637e9_7d474246/",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7fad4477_092d3fc3",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:38:33Z",
      "side": 1,
      "message": "Comment related to removed code.",
      "parentUuid": "f5ffefb0_a19a5723",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "02d7ef90_6215c36d",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:38:33Z",
      "side": 1,
      "message": "Comment related to removed code.",
      "parentUuid": "409b353e_1dd993ff",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d182360_0ad23fbe",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Address comment:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/785e35ee_0bb38f28/",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18088c0b_46d53595",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:38:33Z",
      "side": 1,
      "message": "Comment from @jwerner@chromium.org:\n\"The FWMP_DEV_USE_KEY_HASH flag would put us into \"yellow\" boot mode, which I think is technically still supposed to count as \"locked\" for Android. So maybe that should be checked here as well?\"\n\nYes, you\u0027re right, I will add it in next version.",
      "parentUuid": "7d182360_0ad23fbe",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f1e0ab3d_e823a177",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-11T14:57:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "18088c0b_46d53595",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1fa0e277_53af732b",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Address comment from:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/d560c4c4_70cce53d/",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef18cb0e_dedb78c5",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:38:33Z",
      "side": 1,
      "message": "Comment related to removed function.",
      "parentUuid": "1fa0e277_53af732b",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "159b09ab_24220a94",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 120,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Address comment:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/3be308b9_7f369273/",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d695bf6_f91e00d3",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 120,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-06T14:38:33Z",
      "side": 1,
      "message": "Original comment:\n\"Why is this using avb_calloc() rather than vboot\u0027s normal malloc()? This isn\u0027t really part of AVB.\n\nIn fact, does this need to be dynamically allocated at all? Why not just define a static global with a static initializer?\n\"\n\nI changed it to malloc(). I am still allocating it, cause other comments before I assumed that we do not want to put to much unnecessary bytes in the binary. But I am fine with make it static.",
      "parentUuid": "159b09ab_24220a94",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "988cb550_9b1dc180",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 120,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-12-07T02:10:00Z",
      "side": 1,
      "message": "Eh... it\u0027s a couple of function pointers. The code to initialize them all here probably takes up more space than the struct would with static initialization. Yeah, make it static.",
      "parentUuid": "2d695bf6_f91e00d3",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "30e201ef_bf5ba429",
        "filename": "firmware/avb/vboot_avb_ops.c",
        "patchSetId": 1
      },
      "lineNbr": 120,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-12-11T14:57:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "988cb550_9b1dc180",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef3d262d_ef3a90ac",
        "filename": "firmware/avb/vboot_avb_ops.h",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Address comment:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/799124d6_8b0deeed/",
      "fixSuggestions": [
        {
          "fixId": "0c1b8c1c_9c28da39",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "firmware/avb/vboot_avb_ops.h",
              "range": {
                "startLine": 1,
                "startChar": 0,
                "endLine": 2,
                "endChar": 0
              },
              "replacement": "/* Copyright 2024 The Chromium OS Authors\n"
            }
          ]
        }
      ],
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9650d7d9_2d05d49a",
        "filename": "firmware/avb/vboot_avb_sysdeps.c",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-18T16:04:18Z",
      "side": 1,
      "message": "Address comment:\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/5650815/comment/23f639e7_94524787/",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "871f20cd_1c61d441",
        "filename": "firmware/avb/vboot_avb_sysdeps.c",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1562687
      },
      "writtenOn": "2024-11-29T12:23:39Z",
      "side": 1,
      "message": "Original comment was about using alias attribute. \n`void *avb_memcpy(void *dest, const void *src, size_t n) __attribute__((alias(\"memcpy\"))`\n\nUnfortunally, it seems that aliases must be defined in the same translation unit as the original variable.",
      "parentUuid": "9650d7d9_2d05d49a",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb62cb11_b20bfad8",
        "filename": "firmware/avb/vboot_avb_sysdeps.c",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-12-04T22:40:36Z",
      "side": 1,
      "message": "Hmm... too bad. Could also `objcopy --redefine-sym` `libavb.a` in the Makefile. Maybe that\u0027s a bit too obscure to be worth it, though.",
      "parentUuid": "871f20cd_1c61d441",
      "revId": "d54f1d993ade47daebe2be494f2e96747c221e70",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}