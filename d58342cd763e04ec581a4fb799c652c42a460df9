{
  "comments": [
    {
      "key": {
        "uuid": "ff9b72a5_04911c89",
        "filename": "firmware/2lib/include/2return_codes.h",
        "patchSetId": 1
      },
      "lineNbr": 616,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-01-30T21:21:24Z",
      "side": 1,
      "message": "What\u0027s the difference between these three? Wouldn\u0027t a TPM that doesn\u0027t implement this return \"no such command\"?",
      "revId": "d58342cd763e04ec581a4fb799c652c42a460df9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "887b8b64_0cf9c800",
        "filename": "firmware/2lib/include/2return_codes.h",
        "patchSetId": 1
      },
      "lineNbr": 616,
      "author": {
        "id": 1308749
      },
      "writtenOn": "2019-01-30T22:12:42Z",
      "side": 1,
      "message": "TPM_GET/SET_MODE_UNIMPLEMENTED is returned if depthcharge (or other library) fails to provide an implementation of vb2ex_tpm_get/set_mode().\n\nTPM_NO_SUCH_COMMAND is returned by depthcharge when the TPM command is sent to the Cr50, but the command is rejected by the Cr50.  This can happen on the first boot of a Chromebook at the factory before the Cr50 firmware is updated.",
      "parentUuid": "ff9b72a5_04911c89",
      "revId": "d58342cd763e04ec581a4fb799c652c42a460df9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1493ef22_7f8b2173",
        "filename": "firmware/2lib/include/2return_codes.h",
        "patchSetId": 1
      },
      "lineNbr": 616,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-01-30T22:32:44Z",
      "side": 1,
      "message": "Okay... still not sure why those other two are needed? I think we generally expect callers to implement all vboot callbacks, not sure why we should need to provision for that here (especially since it doesn\u0027t seem we really need a case to do that). If a caller doesn\u0027t want to implement this they can still just return NO_SUCH_COMMAND to achieve that.\n\nThe stubs are only used by tests and should just return whatever makes the tests proceed correctly in this case... so either SUCCESS (with TPM_ENABLED_TENTATIVE) or NO_SUCH_COMMAND should be fine. They don\u0027t need to (and in fact ideally shouldn\u0027t) have their own special code path.\n\nAlso, while we\u0027re at it, please remember that all new functionality in vboot should be covered by unit tests.",
      "parentUuid": "887b8b64_0cf9c800",
      "revId": "d58342cd763e04ec581a4fb799c652c42a460df9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd9f6bfb_e66f095d",
        "filename": "firmware/2lib/include/2return_codes.h",
        "patchSetId": 1
      },
      "lineNbr": 616,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-02-03T04:32:43Z",
      "side": 1,
      "message": "Hi Julius,\n\nI made an attempt at removing the command-specific return codes for unimplemented external functions here:\n\nhttps://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/1358032\n\nPerhaps we can move the discussion over there, and I can move that CL over to ToT if we decide to move forward with the change?",
      "parentUuid": "1493ef22_7f8b2173",
      "revId": "d58342cd763e04ec581a4fb799c652c42a460df9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}