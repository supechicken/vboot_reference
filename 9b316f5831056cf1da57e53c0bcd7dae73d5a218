{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "380b1037_b82ae3d9",
        "filename": "tests/swap_ec_rw_tests.sh",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-04-02T01:41:03Z",
      "side": 1,
      "message": "Would be nicer if we also checked in the modified image so we can confirm it\u0027s byte-for-byte identical? (I guess that can break in the same rare cases as we discussed with that hash, but maybe it\u0027s better to become aware of those and fix them manually than to have barely any coverage at all?)",
      "revId": "9b316f5831056cf1da57e53c0bcd7dae73d5a218",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ed433086_e52a87aa",
        "filename": "tests/swap_ec_rw_tests.sh",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-04-02T08:27:26Z",
      "side": 1,
      "message": "Done.\n\nNote that this adds another 8MB file to git. There are different ways to make the binary file smaller.\n\n1. Store only the \"expected FW_MAIN_A\", and then check that\n\n  - The FMAP layout remains the same\n  - All the sections remain the same (after calling swap_ec_rw) except for FW_MAIN_A and FW_MAIN_B\n  - The modified FW_MAIN_A and FW_MAIN_B become the same as the \"expected FW_MAIN_A\"\n\n2. Use bsdiff to store only the diff, which is only 190KB.",
      "parentUuid": "380b1037_b82ae3d9",
      "revId": "9b316f5831056cf1da57e53c0bcd7dae73d5a218",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9a9f7fdc_46a149d9",
        "filename": "tests/swap_ec_rw_tests.sh",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-04-03T01:46:52Z",
      "side": 1,
      "message": "Yeah, I mean we already have 146MB of futility test data anyway... I think we should try to reuse test blobs where it makes sense but we also shouldn\u0027t shy away from adding more when it\u0027s necessary to provide important coverage.\n\nChecking in FW_MAIN_A sounds like a good compromise, although I think checking in the whole image would also be okay. Adding a dependency on bsdiff seems a bit excessive.\n\n(Not sure why this comment didn\u0027t come out last time already, I wrote it back then.)",
      "parentUuid": "ed433086_e52a87aa",
      "revId": "9b316f5831056cf1da57e53c0bcd7dae73d5a218",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e0ae7961_ba619cf8",
        "filename": "tests/swap_ec_rw_tests.sh",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-04-11T07:58:03Z",
      "side": 1,
      "message": "\u003e Adding a dependency on bsdiff seems a bit excessive.\n\nJust to clarify your point, is that because we\u0027d need to build bsdiff for all the boards (because vboot tests are run via platform2_test.py)? hungte@ and I are having a similar discussion about platform/firmware tests in CL:5442995. I think using only SDK\u0027s bsdiff should be fine, because the package is already a dependency of target-chromium-os-sdk.",
      "parentUuid": "9a9f7fdc_46a149d9",
      "revId": "9b316f5831056cf1da57e53c0bcd7dae73d5a218",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc851562_f973ceca",
        "filename": "tests/swap_ec_rw_tests.sh",
        "patchSetId": 2
      },
      "lineNbr": 32,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-04-11T23:23:12Z",
      "side": 1,
      "message": "No, it was just the general idea of limiting dependencies where possible. If you think this is an important enough problem then I\u0027m not hard against doing it either (although it sounds like overkill for this one case, and I don\u0027t think we have many more cases where different test blobs are close enough to each other that bsdiff would be useful?).\n\nI would be more concerned about normal build or runtime dependencies because then we have the whole headache again about making sure other users (like upstream coreboot) can deal with them. But I guess as long as it only affects `make runtests`, we don\u0027t need to care that much.",
      "parentUuid": "e0ae7961_ba619cf8",
      "revId": "9b316f5831056cf1da57e53c0bcd7dae73d5a218",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}