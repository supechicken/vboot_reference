{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1ce33b50_cb6c0029",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-06-29T00:40:29Z",
      "side": 1,
      "message": "But does this actually still work for youâ€”I mean, can crdyboot boot an image built with this? Because like you said, bootloader_size will still be 4K aligned, and there is no way to tell that the actual bootstub image was smaller. So your original reven kernel looks like\n\n\u003c3.5K EFI stub\u003e\u003c32-bit kernel\u003e\n\nand then futility will turn that into this kernel partition body\n\n\u003c32-bit kernel\u003e\u003c4K command line\u003e\u003c3.5K EFI stub\u003e\u003c0.5K padding\u003e\n\nand then when crdyboot tries to copy things back into place it ends up with\n\n\u003c3.5K EFI stub\u003e\u003c0.5K padding\u003e\u003c32-bit kernel\u003e\n\nSo I assume that wouldn\u0027t work anymore? How does the EFI stub know that the 32-bit kernel starts 512 bytes later than it thought?",
      "revId": "442560f58f53aacd2d2978305650058d743f19eb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8376455e_eb2b60c3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1481202
      },
      "writtenOn": "2023-06-29T20:10:53Z",
      "side": 1,
      "message": "You are correct, additional work is needed to make it actually work when the crdyboot USE flag is enabled. Here\u0027s the CL: https://chromium-review.googlesource.com/c/chromiumos/platform/crdyboot/+/4657577",
      "parentUuid": "1ce33b50_cb6c0029",
      "revId": "442560f58f53aacd2d2978305650058d743f19eb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3697ac44_509bed0a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-06-29T22:07:12Z",
      "side": 1,
      "message": "Hmm... okay, guess that works. It would really make more sense to get rid of the alignment entirely if we can, but I\u0027m not really sure if I may be overlooking a good reason for why it exists, and I don\u0027t really want to dig into that right now. I guess we can do this for now and then we could still get rid of the alignment later if we ever wanted to, your crdyboot code would keep working either way.",
      "parentUuid": "8376455e_eb2b60c3",
      "revId": "442560f58f53aacd2d2978305650058d743f19eb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1b28ef56_31e3eadd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1481202
      },
      "writtenOn": "2023-06-29T22:15:34Z",
      "side": 1,
      "message": "Agreed, getting rid of the extra padding in the future would be good.",
      "parentUuid": "3697ac44_509bed0a",
      "revId": "442560f58f53aacd2d2978305650058d743f19eb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6757727e_e272284d",
        "filename": "futility/vb1_helper.c",
        "patchSetId": 1
      },
      "lineNbr": 741,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-06-29T22:07:12Z",
      "side": 1,
      "message": "```suggestion\n\tmemcpy(g_bootloader_data, bootloader_data, bootloader_size);\n\tmemset(g_bootloader_data + bootloader_size, \u0027\\0\u0027,\n\t       g_bootloader_size - bootloader_size);\n```\nWe don\u0027t want to sign random undefined bytes.",
      "revId": "442560f58f53aacd2d2978305650058d743f19eb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "81a3d5ec_d54b08ee",
        "filename": "futility/vb1_helper.c",
        "patchSetId": 1
      },
      "lineNbr": 741,
      "author": {
        "id": 1481202
      },
      "writtenOn": "2023-06-29T22:15:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6757727e_e272284d",
      "revId": "442560f58f53aacd2d2978305650058d743f19eb",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}