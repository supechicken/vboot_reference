{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a351c7da_c7c2b7d9",
        "filename": "futility/cmd_show.c",
        "patchSetId": 32
      },
      "lineNbr": 457,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2023-07-08T15:38:37Z",
      "side": 1,
      "message": "Should expose Macros to set/clear these to be less error prone to accidental set/unsent mistakes.",
      "range": {
        "startLine": 456,
        "startChar": 1,
        "endLine": 457,
        "endChar": 31
      },
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc30df48_ac5f813a",
        "filename": "futility/cmd_show.c",
        "patchSetId": 32
      },
      "lineNbr": 457,
      "author": {
        "id": 1570422
      },
      "writtenOn": "2023-07-09T22:19:48Z",
      "side": 1,
      "message": "We discussed this here: https://chromium-review.googlesource.com/c/chromiumos/platform/vboot_reference/+/4624937/comment/06589ca5_f3821c4c/\nWe decided to not go the route of macros since setting const strings is simple and the use cases here are simple clis",
      "parentUuid": "a351c7da_c7c2b7d9",
      "range": {
        "startLine": 456,
        "startChar": 1,
        "endLine": 457,
        "endChar": 31
      },
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d40ebd9_a46e9201",
        "filename": "futility/cmd_show.c",
        "patchSetId": 32
      },
      "lineNbr": 457,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2023-07-09T22:46:54Z",
      "side": 1,
      "message": "Hi Saketh, there are header1 and header2 right now, so if owners don\u0027t want a macro with the current # of variables that SG.\n(Missed the discussion / comment from older PS)\n\nMight be worth considering an array of headers to manage as it seems easier manage behind macros or not in the longer term. (Rather than using header1, header2, ...)\nIf more gets added, that seems like it\u0027ll fall back to using an array eventually anyways.\n\nHappy to ack for now :)",
      "parentUuid": "bc30df48_ac5f813a",
      "range": {
        "startLine": 456,
        "startChar": 1,
        "endLine": 457,
        "endChar": 31
      },
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d705712b_ec1c6215",
        "filename": "futility/file_type_bios.c",
        "patchSetId": 32
      },
      "lineNbr": 118,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2023-07-08T15:38:37Z",
      "side": 1,
      "message": "Setting `ft_print_header2` should somewhat check that `ft_print_header` is set with a macro condition +/- be set when `ft_print_header2` is `NULL` so we know the explicit set is proper / not accidentally being overridden.",
      "range": {
        "startLine": 118,
        "startChar": 1,
        "endLine": 118,
        "endChar": 17
      },
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "181eae23_53285ab9",
        "filename": "futility/file_type_bios.c",
        "patchSetId": 32
      },
      "lineNbr": 118,
      "author": {
        "id": 1570422
      },
      "writtenOn": "2023-07-09T22:19:48Z",
      "side": 1,
      "message": "I\u0027m not sure which cases these checks would protect us from. Any incorrect prefixes should get caught in the unit tests, and since these are all const stings there shouldn\u0027t be any memory errors.",
      "parentUuid": "d705712b_ec1c6215",
      "range": {
        "startLine": 118,
        "startChar": 1,
        "endLine": 118,
        "endChar": 17
      },
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5d284f7_9976c212",
        "filename": "futility/file_type_bios.c",
        "patchSetId": 32
      },
      "lineNbr": 118,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2023-07-09T22:46:54Z",
      "side": 1,
      "message": "Hi Saketh, parseable printouts are the only ones atm, but will that be the case going forward? There will be no newer printouts / options ever? Maybe not.\n\nIt seems using `ft_` in the first place rather than just explicitly pass in the header prefixes is for a reason.\nTo help with easing printouts, but while doing so I\u0027m trying to point out the issue in clearing/setting the values during more complicated printouts.\n\nMemory error not being an issue ;)\n\nSo, if your printouts remain the same, but any new printout additions leverage `FT_`  without correctly using `ft_` values, one (other devs/clumsy folks like me) could easily misuse it.",
      "parentUuid": "181eae23_53285ab9",
      "range": {
        "startLine": 118,
        "startChar": 1,
        "endLine": 118,
        "endChar": 17
      },
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fce0231_46d8839c",
        "filename": "futility/file_type_bios.c",
        "patchSetId": 32
      },
      "lineNbr": 118,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2023-07-10T03:51:12Z",
      "side": 1,
      "message": "That looks like a valid concern to me. Let me define\n\n- L1 functions: functions that change ft_print_header\n- L2 functions: functions that change ft_print_header2\n\nThe current code works as expected only because there\u0027s no L2 function calling another L2 function. That\u0027s also the reason why we cannot simply set `ft_print_header2 \u003d ah_name` in `ft_show_bios()`, which would be much more convenient (than using `asprintf`).\n\nInstead of checking `ft_print_header2` everywhere before setting it, I think the correct way to solve this once and for all is to have macros `FT_HEADER_PUSH` and `FT_HEADER_POP` (just like Saketh suggested before), and hide the pointers within the macros. With the macros, we only need to make sure *each function doesn\u0027t change the header status by the time it returns*. Then both the `ft_print_header2` overriding and `ft_print_header` clearance (see @kimjae\u0027s comment below) problems can be solved. Note that for `ft_print_header2 \u003d ah_name` to work, the we\u0027ll need `header3` in the macro implementation.\n\nI\u0027m not sure if that will make things over-complicated. @kimjae, @jwerner opinions?",
      "parentUuid": "f5d284f7_9976c212",
      "range": {
        "startLine": 118,
        "startChar": 1,
        "endLine": 118,
        "endChar": 17
      },
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13686787_9e974780",
        "filename": "futility/file_type_bios.c",
        "patchSetId": 32
      },
      "lineNbr": 118,
      "author": {
        "id": 1570422
      },
      "writtenOn": "2023-07-10T16:37:11Z",
      "side": 1,
      "message": "Right, one of the advantages of the macros would be that we can add in an arbitrary number of prefixes (bound to a limit) and those could be interacted with `PUSH` `POP` as you suggested.\nBut I\u0027ll defer to the owners if the added complexity/flexibility is useful and helpful to have for both the current impl, and for future growth of this tool",
      "parentUuid": "5fce0231_46d8839c",
      "range": {
        "startLine": 118,
        "startChar": 1,
        "endLine": 118,
        "endChar": 17
      },
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8e9451b_9e201daa",
        "filename": "futility/file_type_bios.c",
        "patchSetId": 32
      },
      "lineNbr": 155,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2023-07-08T15:38:37Z",
      "side": 1,
      "message": "Forgetting to clear `ft_print_header`.",
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a59b7ef_0e5dc16e",
        "filename": "futility/file_type_bios.c",
        "patchSetId": 32
      },
      "lineNbr": 155,
      "author": {
        "id": 1570422
      },
      "writtenOn": "2023-07-09T22:19:48Z",
      "side": 1,
      "message": "iiuc, all `ft_` methods are called at the top level and exit the application when returning, so `ft_print_header` wouldn\u0027t be used in the program lifetime after `show_gbb_buf`",
      "parentUuid": "d8e9451b_9e201daa",
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6f45d65_d147dbb4",
        "filename": "futility/file_type_bios.c",
        "patchSetId": 32
      },
      "lineNbr": 155,
      "author": {
        "id": 1351160
      },
      "writtenOn": "2023-07-09T22:46:54Z",
      "side": 1,
      "message": "Hi Saketh, assuming future changes to follow a pattern that has no strong checks feel a bit scary.\n\nIMO, that leaves room for future errors to happen easily.\nSeems more hermetic to scope by helping clear values so it doesn\u0027t slip into other \"upper level\" calls.",
      "parentUuid": "8a59b7ef_0e5dc16e",
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba8a70af_47e71f72",
        "filename": "futility/file_type_bios.c",
        "patchSetId": 32
      },
      "lineNbr": 155,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2023-07-10T03:51:12Z",
      "side": 1,
      "message": "Also see my comment above.",
      "parentUuid": "d6f45d65_d147dbb4",
      "revId": "6b23ce965a2614f7778f1076c5f7f9895a153a10",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}