{
  "comments": [
    {
      "key": {
        "uuid": "6eebc7b1_59304dd3",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "This is not needed.  See the comment on devid0 assignment below.",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 37,
        "endChar": 1
      },
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ab2e867_9ac025c1",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "I think it still is needed, as bash integer math is not 32 bit.",
      "parentUuid": "6eebc7b1_59304dd3",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 37,
        "endChar": 1
      },
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de7ca6fe_e1a4417d",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "This needs to check that INSN_TARGET \u003d \"NodeLocked\".  In fairness, INSN_DEVICE_ID will only be set for NodeLocked images, because the quorum configuration will reject DeviceID specifics on any other type of image.\n\n(Not part of this CL, but the other target-transitions need to be validated: if INSN_TARGET \u003d \"GeneralRelease\", it needs to check that the input image is \"ReleaseCandidate\", etc.)",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f833e14_a09f9138",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "de7ca6fe_e1a4417d",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "91d69647_3a39299b",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "This could be done with \"local -i devid0\" above and:\ndevid0\u003d\"0x${INSN_DEVICE_ID/-*}\"\n\nNo need to create the to_int32 function. Similar comment for all the other to_int32 usage below.",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fac0b2f_4d6904f6",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "this does not work, as technically json expects a 32 bit integer here and croaks on values exceeding 2147483647:\n\n# bashint() { local -i x; x\u003d0xffffffff; echo $x; }\n# bashint\n4294967295\n#\n\nand json expects -1 in this case.",
      "parentUuid": "91d69647_3a39299b",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81b379a1_35b71e3f",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-29T15:25:02Z",
      "side": 1,
      "message": "It looks like the current bash uses 64-bit signed ints.  In any case, this will do the trick.\ndevid0\u003d\"0x${INSN_DEVICE_ID/-*}\"; (( devid0 \u003c\u003d 0x7fffffff )) || devid0\u003ddevid0-0x100000000",
      "parentUuid": "2fac0b2f_4d6904f6",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73102e29_72a9af66",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-29T15:44:10Z",
      "side": 1,
      "message": "how is this better than a clean Python one liner?",
      "parentUuid": "81b379a1_35b71e3f",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b34bd85_a3b4ba75",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "sed has an add command that could do this nicely.",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14fe4332_a55c7936",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "ah, let me take a look.",
      "parentUuid": "0b34bd85_a3b4ba75",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dfb31e96_bc1676c4",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T20:45:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "14fe4332_a55c7936",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23c982ad_220f1364",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "local -i config1\u003d0x\"${config1}\"+0x80000000",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed0b003a_6dc5e2b8",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "json does not accept hex values for integers.",
      "parentUuid": "23c982ad_220f1364",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a45b8a1_745ae64b",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-29T15:25:02Z",
      "side": 1,
      "message": "local -i config1\u003d0x\"${config1}\"-0x80000000\n\nIf we want to unconditionally set it, instead of toggling it:\nlocal -i config1\u003d0x\"${config1}\"\\\u00260x7fffffff-0x80000000",
      "parentUuid": "ed0b003a_6dc5e2b8",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}