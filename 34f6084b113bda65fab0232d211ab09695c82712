{
  "comments": [
    {
      "key": {
        "uuid": "6eebc7b1_59304dd3",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "This is not needed.  See the comment on devid0 assignment below.",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 37,
        "endChar": 1
      },
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ab2e867_9ac025c1",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "I think it still is needed, as bash integer math is not 32 bit.",
      "parentUuid": "6eebc7b1_59304dd3",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 37,
        "endChar": 1
      },
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb3ec0c1_a337fff4",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2019-10-29T20:32:01Z",
      "side": 1,
      "message": "One concern is that we won\u0027t be python3 compat if we ever flip the default. So let\u0027s get ()\u0027s around the print. Otherwise I\u0027m ok calling python here personally.",
      "parentUuid": "0ab2e867_9ac025c1",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 37,
        "endChar": 1
      },
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2386ace7_4b2bbc92",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1128435
      },
      "writtenOn": "2019-10-29T20:47:41Z",
      "side": 1,
      "message": "+1 for python3 compat concern. Would be even better if we can refactor this to a small runnable python3 script \"unsigned_to_signed.py\" \u0026 add unittest for it.",
      "parentUuid": "cb3ec0c1_a337fff4",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 37,
        "endChar": 1
      },
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc242349_36a42daa",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-29T21:21:30Z",
      "side": 1,
      "message": "just added the parens. Frankly, I don\u0027t feel it\u0027s necessary to make it a separate Python script, this can wait til this entire bash script is converted to Python.",
      "parentUuid": "2386ace7_4b2bbc92",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 37,
        "endChar": 1
      },
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e03c513_a154e9b0",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2019-10-29T20:32:01Z",
      "side": 1,
      "message": "I\u0027m struggling to figure out what config1 does, can we go with a better variable name (or a comment)?",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4cbe4639_6abcd249",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-29T21:21:30Z",
      "side": 1,
      "message": "config1 is the name of the field in the manifest, and a s such it is fixed. Let me add a comment to this respect.",
      "parentUuid": "8e03c513_a154e9b0",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de7ca6fe_e1a4417d",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "This needs to check that INSN_TARGET \u003d \"NodeLocked\".  In fairness, INSN_DEVICE_ID will only be set for NodeLocked images, because the quorum configuration will reject DeviceID specifics on any other type of image.\n\n(Not part of this CL, but the other target-transitions need to be validated: if INSN_TARGET \u003d \"GeneralRelease\", it needs to check that the input image is \"ReleaseCandidate\", etc.)",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f833e14_a09f9138",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "de7ca6fe_e1a4417d",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "91d69647_3a39299b",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "This could be done with \"local -i devid0\" above and:\ndevid0\u003d\"0x${INSN_DEVICE_ID/-*}\"\n\nNo need to create the to_int32 function. Similar comment for all the other to_int32 usage below.",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fac0b2f_4d6904f6",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "this does not work, as technically json expects a 32 bit integer here and croaks on values exceeding 2147483647:\n\n# bashint() { local -i x; x\u003d0xffffffff; echo $x; }\n# bashint\n4294967295\n#\n\nand json expects -1 in this case.",
      "parentUuid": "91d69647_3a39299b",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81b379a1_35b71e3f",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-29T15:25:02Z",
      "side": 1,
      "message": "It looks like the current bash uses 64-bit signed ints.  In any case, this will do the trick.\ndevid0\u003d\"0x${INSN_DEVICE_ID/-*}\"; (( devid0 \u003c\u003d 0x7fffffff )) || devid0\u003ddevid0-0x100000000",
      "parentUuid": "2fac0b2f_4d6904f6",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73102e29_72a9af66",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-29T15:44:10Z",
      "side": 1,
      "message": "how is this better than a clean Python one liner?",
      "parentUuid": "81b379a1_35b71e3f",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46469a23_d8c24088",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2019-10-29T20:32:01Z",
      "side": 1,
      "message": "Let\u0027s fix up the python for 3 compat and stick with that.",
      "parentUuid": "73102e29_72a9af66",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7a49209_dea75ecd",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-29T21:21:30Z",
      "side": 1,
      "message": "this is addressed in patchset 3",
      "parentUuid": "46469a23_d8c24088",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b34bd85_a3b4ba75",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "sed has an add command that could do this nicely.",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14fe4332_a55c7936",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "ah, let me take a look.",
      "parentUuid": "0b34bd85_a3b4ba75",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dfb31e96_bc1676c4",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T20:45:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "14fe4332_a55c7936",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dadfd955_ffd259f5",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2019-10-29T20:32:01Z",
      "side": 1,
      "message": "Let\u0027s get the sed simplified in the next rev.",
      "parentUuid": "dfb31e96_bc1676c4",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23c982ad_220f1364",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-28T15:06:31Z",
      "side": 1,
      "message": "local -i config1\u003d0x\"${config1}\"+0x80000000",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed0b003a_6dc5e2b8",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-28T15:55:25Z",
      "side": 1,
      "message": "json does not accept hex values for integers.",
      "parentUuid": "23c982ad_220f1364",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a45b8a1_745ae64b",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1308774
      },
      "writtenOn": "2019-10-29T15:25:02Z",
      "side": 1,
      "message": "local -i config1\u003d0x\"${config1}\"-0x80000000\n\nIf we want to unconditionally set it, instead of toggling it:\nlocal -i config1\u003d0x\"${config1}\"\\\u00260x7fffffff-0x80000000",
      "parentUuid": "ed0b003a_6dc5e2b8",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91b704af_d17270a9",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2019-10-29T20:32:01Z",
      "side": 1,
      "message": "Nothing is going to make this pretty, let\u0027s just stick with the python.",
      "parentUuid": "6a45b8a1_745ae64b",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9bfdc03d_3f26f1dd",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 344,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2019-10-29T20:32:01Z",
      "side": 1,
      "message": "This also counts as validation (i.e. it has to parse) and we should have the die message reflect that.",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "42d3dead_1a695bb4",
        "filename": "scripts/image_signing/sign_cr50_firmware.sh",
        "patchSetId": 1
      },
      "lineNbr": 344,
      "author": {
        "id": 1000039
      },
      "writtenOn": "2019-10-29T21:21:30Z",
      "side": 1,
      "message": "changed the message.",
      "parentUuid": "9bfdc03d_3f26f1dd",
      "revId": "34f6084b113bda65fab0232d211ab09695c82712",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}