{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d33b32a7_022bce28",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-03-09T02:20:52Z",
      "side": 1,
      "message": "Most of us who develop the C library don\u0027t really know how any of this works, so we\u0027ll probably not remember to keep that allowlist updated when any APIs change. Can\u0027t you instead just somehow tell it to expose all the symbols from the library itself, but not any further dependencies (e.g. kinda allowlist what `nm -jUg libvboot_host.a` would show)?",
      "revId": "6c1ecf12a3d983179118475361577441095727f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "59068fa7_40d776a5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1297374
      },
      "writtenOn": "2024-03-09T05:37:03Z",
      "side": 1,
      "message": "`bindgen` operates on the C headers (after preprocessing, so including all of the stuff that is transitively included like `stdlib.h`, which ends up pulling in all of those math functions with `long double` referred to by the comment and blocklist replaced in this change), not the .so/.a, so it isn\u0027t possible to use link-time knowledge of symbol visibility.\n\nI think the ideal situation to use a a common prefix for all of the names that are intended to be publicly exported (like the `Vb.*` used for crossystem), but I understand if it\u0027s not desirable to add a bunch of churn to rename existing functions.\n\nI can drop this patch if you prefer to keep the existing blocklist approach, as it doesn\u0027t really cause any problems (I just noticed this while attempting to get it to build outside of the SDK, which is fixed by the other commit in this series).",
      "parentUuid": "d33b32a7_022bce28",
      "revId": "6c1ecf12a3d983179118475361577441095727f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4dbe9b24_b1163d0a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2024-03-11T21:36:03Z",
      "side": 1,
      "message": "FWIW I don\u0027t think we\u0027d be opposed to someone cleaning up and standardizing our function names if you wanted to. A lot of this stuff is very old and should be ported to the newer coding style anyway (i.e. away from CamelCase), but we never really have the time.\n\nI don\u0027t care either way what you do here, just a fair warning that by the time someone next renames those functions for some reason we\u0027ll almost certainly have forgotten that there\u0027s a list here that needs to be updated.",
      "parentUuid": "59068fa7_40d776a5",
      "revId": "6c1ecf12a3d983179118475361577441095727f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c0ffee8_d160ca37",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1543127
      },
      "writtenOn": "2024-03-11T22:26:04Z",
      "side": 1,
      "message": "To chime in here: If someone renames a function that anyone depends on (I would assume the enire allowlist is a \"hard\" dependency of some lib), we probably brake the build (e.g. Flexor calls CgptAdd, this would break in case we rename it and not allowlist it here. So sounds like a good approach?",
      "parentUuid": "4dbe9b24_b1163d0a",
      "revId": "6c1ecf12a3d983179118475361577441095727f3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}