{
  "comments": [
    {
      "key": {
        "uuid": "b7d4c4c0_c2305576",
        "filename": "firmware/2lib/2ec_sync.c",
        "patchSetId": 2
      },
      "lineNbr": 193,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-03-25T09:23:28Z",
      "side": 1,
      "message": "Hmm.. it\u0027d be really nice if we could do something here like:\n\n  if (vb2_reboot_needed(rv))\n    return rv;\n\nOr maybe even merge that into our VB2_TRY logic...\n\n  /* Doesn\u0027t call vb2api_fail when VB2_ERROR_REBOOT_* returned. */\n  VB2_TRY(vb2ex_ec_update_image(select), ctx, VB2_RECOVERY_EC_UPDATE);\n\nWhat do you think?\n\nAt the same time, we could move VBERROR_*_REBOOT_*_REQUIRED over to vboot2 namespace, ensuring they\u0027re all contiguous.",
      "range": {
        "startLine": 192,
        "startChar": 0,
        "endLine": 193,
        "endChar": 45
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27caff45_1a4a52a9",
        "filename": "firmware/2lib/2ec_sync.c",
        "patchSetId": 2
      },
      "lineNbr": 194,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-03-25T09:23:28Z",
      "side": 1,
      "message": "Can we just call vb2api_fail here instead, and get rid of the helper function?",
      "range": {
        "startLine": 194,
        "startChar": 3,
        "endLine": 194,
        "endChar": 19
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "951a544c_7a2227d0",
        "filename": "firmware/2lib/2misc.c",
        "patchSetId": 2
      },
      "lineNbr": 459,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-03-25T09:23:28Z",
      "side": 1,
      "message": "Maybe we should start calling this locale_id... or locale_index.",
      "range": {
        "startLine": 459,
        "startChar": 9,
        "endLine": 459,
        "endChar": 26
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f842212_e329e9fd",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 2
      },
      "lineNbr": 805,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-03-25T09:23:28Z",
      "side": 1,
      "message": "the current locale",
      "range": {
        "startLine": 805,
        "startChar": 7,
        "endLine": 805,
        "endChar": 13
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "976a28bb_7d45eabb",
        "filename": "firmware/2lib/include/2api.h",
        "patchSetId": 2
      },
      "lineNbr": 808,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-03-25T09:23:28Z",
      "side": 1,
      "message": "@return?",
      "range": {
        "startLine": 808,
        "startChar": 2,
        "endLine": 808,
        "endChar": 3
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58099719_b0071fbd",
        "filename": "tests/vb2_auxfw_sync_tests.c",
        "patchSetId": 2
      },
      "lineNbr": 72,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-03-25T09:23:28Z",
      "side": 1,
      "message": "Probably better to use a separate mock variable to make it clear that this has nothing to do with the vboot internal state.",
      "range": {
        "startLine": 71,
        "startChar": 0,
        "endLine": 72,
        "endChar": 34
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "450f07d2_3d208f5a",
        "filename": "tests/vb2_ec_sync_tests.c",
        "patchSetId": 2
      },
      "lineNbr": 181,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-03-25T09:23:28Z",
      "side": 1,
      "message": "Probably better to use a separate mock variable to make it clear that this has nothing to do with the vboot internal state.",
      "range": {
        "startLine": 179,
        "startChar": 0,
        "endLine": 181,
        "endChar": 0
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "def6652e_3f075ca4",
        "filename": "tests/vb2_ec_sync_tests.c",
        "patchSetId": 2
      },
      "lineNbr": 471,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-03-25T09:23:28Z",
      "side": 1,
      "message": "Might want to repeat this comment for both test cases (or add \" - RW\" and \" - RO\" to it).",
      "range": {
        "startLine": 471,
        "startChar": 0,
        "endLine": 471,
        "endChar": 28
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba98521f_4e27b673",
        "filename": "tests/vb2_ec_sync_tests.c",
        "patchSetId": 2
      },
      "lineNbr": 493,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-03-24T10:24:01Z",
      "side": 1,
      "message": "I think this should be 0 (RO) instead, but I\u0027m not sure how to correct it from this patch.\n\nThe original logic in sync_ec() is:\n 1. update_ec(RW) if needed\n 2. vb2ex_ec_jump_to_rw() if needed\n 3. update_ec(RO) if needed\n\nConsider the case where only steps #2 and #3 will be performed. Then, with this patchset, when display is not avaiable, VBERROR_REBOOT_REQUIRED will be returned in #3 (from vb2ex_ec_update_image()), but EC will have jumped to RW in #2 before warn reboot.",
      "range": {
        "startLine": 493,
        "startChar": 23,
        "endLine": 493,
        "endChar": 24
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0e33774a_bab1349f",
        "filename": "tests/vb2_ec_sync_tests.c",
        "patchSetId": 2
      },
      "lineNbr": 493,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-03-25T09:23:28Z",
      "side": 1,
      "message": "If the logic is to jump to RW before updating RO, then ec_run_image will be set to 1?  Unless you\u0027re proposing to change the logic to check for potential RO updates before jumping to RW?",
      "parentUuid": "ba98521f_4e27b673",
      "range": {
        "startLine": 493,
        "startChar": 23,
        "endLine": 493,
        "endChar": 24
      },
      "revId": "a9e2af6c2cb50d27df1146387b03b53ed3e0f192",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}