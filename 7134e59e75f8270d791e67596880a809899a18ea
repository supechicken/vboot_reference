{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fa6b66ba_f3493b60",
        "filename": "firmware/lib/gpt_misc.c",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 1490127
      },
      "writtenOn": "2025-03-28T16:54:19Z",
      "side": 1,
      "message": "Should this be included in 2sysincludes.h? 2sysincludes.h has a comment https://chromium.googlesource.com/chromiumos/platform/vboot_reference/+/refs/heads/main/firmware/2lib/include/2sysincludes.h#7 mentioning to include system headers there.",
      "fixSuggestions": [
        {
          "fixId": "c7d709a9_e7811f90",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "firmware/lib/gpt_misc.c",
              "range": {
                "startLine": 13,
                "startChar": 0,
                "endLine": 18,
                "endChar": 0
              },
              "replacement": ""
            }
          ]
        }
      ],
      "revId": "7134e59e75f8270d791e67596880a809899a18ea",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53e67265_b45718b8",
        "filename": "firmware/lib/gpt_misc.c",
        "patchSetId": 6
      },
      "lineNbr": 14,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-03-28T22:18:39Z",
      "side": 1,
      "message": "Yes, actually, that\u0027s a good point. Grzegorz, can you please move this into `2sysincludes.h`?",
      "parentUuid": "fa6b66ba_f3493b60",
      "revId": "7134e59e75f8270d791e67596880a809899a18ea",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b33a7f2_4bbf4ecf",
        "filename": "firmware/lib/gpt_misc.c",
        "patchSetId": 6
      },
      "lineNbr": 16,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2025-03-26T16:49:19Z",
      "side": 1,
      "message": "sys-boot/crdyboot-1.0.5-r749 build failed on reven-cq: [build](https://ci.chromium.org/ui/p/chromeos/builders/cq/reven-cq/b8719413600094516817/overview).\n\n```\nfirmware/lib/gpt_misc.c:16:10: fatal error: \u0027endian.h\u0027 file not found\n```",
      "revId": "7134e59e75f8270d791e67596880a809899a18ea",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "155c4e3b_4a3658c1",
        "filename": "firmware/lib/gpt_misc.c",
        "patchSetId": 6
      },
      "lineNbr": 16,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-03-27T00:09:32Z",
      "side": 1,
      "message": "+nicholasbishop, can we add an `endian.h` (and `le32toh()`/`le16toh()`) in crdyboot? I assume we just need to drop it in here to work: https://source.corp.google.com/h/chrome-internal/chromeos/superproject/+/main:src/platform/crdyboot/vboot/src/libc/\n\nI don\u0027t know how to get the host endianness in that environment, but since crdyboot only supports x86 at the moment anyway(?) we could just hardcode to little endian if necessary.",
      "parentUuid": "7b33a7f2_4bbf4ecf",
      "revId": "7134e59e75f8270d791e67596880a809899a18ea",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59f5b7a6_7f9fe00e",
        "filename": "firmware/lib/gpt_misc.c",
        "patchSetId": 6
      },
      "lineNbr": 16,
      "author": {
        "id": 1490127
      },
      "writtenOn": "2025-03-28T16:54:19Z",
      "side": 1,
      "message": "It is only supported on x86 but it can be compiled for arm64 targets.\nIt would be possible to add endian.h to that location and have crdyboot implement the swapping. An example at crrev.com/c/6403913\n\nIs it possible to implement the swapping in vboot without requiring endian.h (libavb does this)?\n\nDo you expect there will be quite a few more interface changes and additional libc  dependencies in this chain?",
      "parentUuid": "155c4e3b_4a3658c1",
      "revId": "7134e59e75f8270d791e67596880a809899a18ea",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47ba6def_a466c7ed",
        "filename": "firmware/lib/gpt_misc.c",
        "patchSetId": 6
      },
      "lineNbr": 16,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2025-03-28T22:18:39Z",
      "side": 1,
      "message": "Thanks for providing the fix!\n\nWe generally prefer not to duplicate stuff in vboot that is so standard across most C firmware environments that we should be able to expect all our callers to already have it or be able to provide it easily. I\u0027d count byte swap helpers as part of that. (Also this gives callers the opportunity to use architecture-specific optimizations if they want â€” e.g. the AVB method doesn\u0027t seem to be auto-folded into a `rev` instruction on arm32 by GCC.)\n\nIIRC this was the only new dependency added by this series, and we only decided to add it because it\u0027s so minor we thought it shouldn\u0027t cause much of a hassle. (I did, admittedly, forget that crdyboot is also a dependency for us now, I was more thinking of things like upstream u-boot, but it seems like it\u0027s not a problem to add it to crdyboot either.)",
      "parentUuid": "59f5b7a6_7f9fe00e",
      "revId": "7134e59e75f8270d791e67596880a809899a18ea",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}