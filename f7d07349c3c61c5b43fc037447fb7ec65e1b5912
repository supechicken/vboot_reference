{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "729850d0_9bd422b2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2021-12-09T07:33:25Z",
      "side": 1,
      "message": "was there something specific you wanted from me ?  i\u0027m not a vboot maintainer, so i\u0027d expect most reviews to go to OWNERS instead.",
      "revId": "f7d07349c3c61c5b43fc037447fb7ec65e1b5912",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4d037048_8033cd06",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2021-12-09T12:04:33Z",
      "side": 1,
      "message": "Only that you had context from b/203715651 Mike but feel free to drop back to CC or drop yourself.\n\nI probably should have put you on CC I know you usually provide a decent review [which I like] so I leaned towards putting you on the review line.\n\nThanks for making the time.",
      "parentUuid": "729850d0_9bd422b2",
      "revId": "f7d07349c3c61c5b43fc037447fb7ec65e1b5912",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05909eae_9e6a55b8",
        "filename": "Makefile",
        "patchSetId": 1
      },
      "lineNbr": 880,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2021-12-09T07:33:25Z",
      "side": 1,
      "message": "this doesn\u0027t look right.  there\u0027s already conditional $FWLIB usage here, so why isn\u0027t that working ?",
      "revId": "f7d07349c3c61c5b43fc037447fb7ec65e1b5912",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "430ad5b4_8eab9e6e",
        "filename": "Makefile",
        "patchSetId": 1
      },
      "lineNbr": 880,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2021-12-09T12:04:33Z",
      "side": 1,
      "message": "Well `$ FIRMWARE_ARCH\u003d\u0027whatever\u0027 make fwlib` does work however I have the feeling there is some rot between the Makefile coupling of coreboot and this? I guess this was just a \u0027maybe\u0027 fix for Simon.\n\nCoreboot does make the variable in the env or at least seems to https://github.com/coreboot/coreboot/blob/b2287718ef2ab8051d917702185f91c33cb61aa3/src/security/vboot/Makefile.inc#L27 and so I wasn\u0027t sure what this build failure precisely looks like that was highlighted in the bug?\n\nI guess Simon can perhaps point out the precise problem exhibited in the out-of-tree build work flow he highlighted. I am sort of reading in between the lines here of the problem.\n\nIn any case, I am hopeful either here or coreboot is the right place to be looking to fix the general problem so we can move the discussion away from needing CLI or extra dependencies.",
      "parentUuid": "05909eae_9e6a55b8",
      "revId": "f7d07349c3c61c5b43fc037447fb7ec65e1b5912",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15fb39dc_18ddfb86",
        "filename": "Makefile",
        "patchSetId": 1
      },
      "lineNbr": 880,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2021-12-10T21:59:22Z",
      "side": 1,
      "message": "sorry, but i\u0027m not familiar with how coreboot integrates vboot_reference to provide guidance.  but focusing on the vboot side, this specific line change doesn\u0027t make sense.\n\ni don\u0027t know whether vboot_reference makes guarantees as to the modules going into fwlib being usable regardless of the FIRMWARE_ARCH setting, or if eliding the dep was to cater to specific build modes.  i\u0027ll note that the \"all\" target depends on \"fwlib\", so if we were just building utilities and not FIRMWARE_ARCH, this would cause extra stuff to be built.\n\nif you\u0027re trying to make the fwlib alias always be available, then maybe you want to do:\n\n -all: fwlib futil utillib hostlib cgpt tlcl \\\n +all: futil utillib hostlib cgpt tlcl \\\n ...\n -fwlib: $(if ${FIRMWARE_ARCH},${FWLIB},)\n +fwlib: ${FWLIB}\n +all: $(if ${FIRMWARE_ARCH},fwlib)\n\nbut this would be for the vboot maintainers to comment.",
      "parentUuid": "430ad5b4_8eab9e6e",
      "revId": "f7d07349c3c61c5b43fc037447fb7ec65e1b5912",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "281c6485_8cfcde86",
        "filename": "Makefile",
        "patchSetId": 1
      },
      "lineNbr": 880,
      "author": {
        "id": 1165921
      },
      "writtenOn": "2021-12-14T23:23:25Z",
      "side": 1,
      "message": "I\u0027ll have a crack at setting up something in gitlab so we can see any failures. It doesn\u0027t seem possible to do that in our CI.\n\nb/209799513\n\nBut for this line I agree it looks odd. If we have FWLIB always, we don\u0027t need it conditionally as well.\n\nTo test the failure, try this out of the chroot:\n\ncd /tmp/somewhere\nmake -C /path/to/cosarm/src/platform/vboot_reference fwlib",
      "parentUuid": "430ad5b4_8eab9e6e",
      "revId": "f7d07349c3c61c5b43fc037447fb7ec65e1b5912",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fca39a59_a9cff6fc",
        "filename": "Makefile",
        "patchSetId": 1
      },
      "lineNbr": 880,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2021-12-15T03:19:17Z",
      "side": 1,
      "message": "I updated the commit to include Mike\u0027s suggestion so this isn\u0027t a complete hack. I left the conditional in the all top-level target so behavior there isn\u0027t changed.\n\nre Simon,\n```\n(cr) (fix_coreboot_outoftree_build) quasisec@quasisec2 ~/trunk/src/platform/vboot_reference $ cd /tmp/\n(cr) quasisec@quasisec2 /tmp $ mkdir foo\n(cr) quasisec@quasisec2 /tmp $ cd foo/\n(cr) quasisec@quasisec2 /tmp/foo $ make -C ~/trunk/src/platform/vboot_reference fwlib\nmake: Entering directory \u0027/mnt/host/source/src/platform/vboot_reference\u0027\nvboot SHA256 built with tight loops (slower, smaller code size)\n    CC            firmware/2lib/2api.o\n\u003csnip\u003e\n    RM            vboot_fw.a\n    AR            vboot_fw.a\nmake: Leaving directory \u0027/mnt/host/source/src/platform/vboot_reference\u0027\n```\nalthough /tmp/foo would be empty unless you set `BUILD\u003d/tmp/foo` which does seem to happen on https://github.com/coreboot/coreboot/blob/b2287718ef2ab8051d917702185f91c33cb61aa3/src/security/vboot/Makefile.inc#L33",
      "parentUuid": "281c6485_8cfcde86",
      "revId": "f7d07349c3c61c5b43fc037447fb7ec65e1b5912",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}