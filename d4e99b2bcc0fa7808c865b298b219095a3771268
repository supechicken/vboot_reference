{
  "comments": [
    {
      "key": {
        "uuid": "4ed7871b_d7ee0b41",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 58,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-21T22:29:54Z",
      "side": 1,
      "message": "I\u0027m not quite sure what the addition of an explicit count is doing that the previous code (by memsetting the array to 0) didn\u0027t already do? In both cases, calls beyond the end return 0.",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa2b579d_58ab706e",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 58,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-10-22T09:45:56Z",
      "side": 1,
      "message": "My original intention was to require the test case to specify explicitly what the GPIO should be set to at the very end.  Seems like there is a mix of some tests relying on the GPIO value of the last MockGpioAfter call, and some relying on 0 being returned at the very end.  (My understanding is that this would indicate that power button has been released in most cases.)  I guess I got halfway there and just got exhausted from the difficulty in determining how many times VbTryLoadKernel is ran for each test case based on the count set for each GpioState.  Not sure if I should just reverse all of the mock_gpio changes or keep on trucking on.",
      "parentUuid": "4ed7871b_d7ee0b41",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "520c8032_1106c1cf",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 58,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-23T23:12:15Z",
      "side": 1,
      "message": "I think the \"GPIOs pressed at the very end\" problem is already solved by setting count to ~0 for a specific setting. That seems to work for everything we need so I don\u0027t really see a reason to change anything in the infrastructure here. I don\u0027t really see what the stuff you changed achieves other than making things more complicated to be honest. Unless you need to do that to support a new test case, I\u0027d suggest just leaving things as they are.",
      "parentUuid": "aa2b579d_58ab706e",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf4d1f80_d4a95a6f",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 79,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-21T22:29:54Z",
      "side": 1,
      "message": "Why did you remove the -1 here?",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e27927d_bf311c42",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 79,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-10-22T09:45:56Z",
      "side": 1,
      "message": "Because I changed the semantics of mock_gpio.  Before, when count \u003d\u003d 0, that means there is one tick left.  Now, when count \u003d\u003d 0, there are no more ticks left.",
      "parentUuid": "cf4d1f80_d4a95a6f",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "457bf52f_df5ddb61",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 152,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-21T22:29:54Z",
      "side": 1,
      "message": "Did this need to move for a reason? Leaving stuff in place makes reviews easier...",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa5cee38_fb08beb7",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 152,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-10-22T09:45:56Z",
      "side": 1,
      "message": "It was awkward to modify the two functions when they lived in separate locations.  But I agree about reviewing -- I\u0027ll move it back.",
      "parentUuid": "457bf52f_df5ddb61",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d2241fa_d8baf9b7",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 265,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-21T22:29:54Z",
      "side": 1,
      "message": "If you want semantics like this, wouldn\u0027t it be easier to have a vbtlk_expect_info that directly contains the expected flags, and check for non-zero after a simple bitwise AND?",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb5e94ce_97999319",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 265,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-10-22T09:45:56Z",
      "side": 1,
      "message": "But this gets complicated for the cases when VbTryLoadKernel should be called with FIXED at first, and then REMOVABLE afterwards.  Still not totally sure what to do about that.  Maybe I should create an enum with three options?  FIXED_ONLY, REMOVABLE_ONLY, FIXED_THEN_REMOVABLE?",
      "parentUuid": "2d2241fa_d8baf9b7",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29e33887_1160eaf8",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 265,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-23T23:12:15Z",
      "side": 1,
      "message": "Well, do we have that case? What you implemented here now doesn\u0027t solve that any better either, right? Like you mentioned in the comment on the earlier patch set, it\u0027s probably not worth testing it that specifically (otherwise you\u0027d have to make a mock_tlk_expect_info array or something like that).",
      "parentUuid": "fb5e94ce_97999319",
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18c5c7dc_beca4af0",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 268,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2019-10-21T22:29:54Z",
      "side": 1,
      "message": "TEST_EQ?",
      "range": {
        "startLine": 268,
        "startChar": 32,
        "endLine": 268,
        "endChar": 34
      },
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "846ff185_53e43123",
        "filename": "tests/vboot_api_kernel2_tests.c",
        "patchSetId": 16
      },
      "lineNbr": 268,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2019-10-22T09:45:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "18c5c7dc_beca4af0",
      "range": {
        "startLine": 268,
        "startChar": 32,
        "endLine": 268,
        "endChar": 34
      },
      "revId": "d4e99b2bcc0fa7808c865b298b219095a3771268",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}