{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8b59106b_89450354",
        "filename": "firmware/2lib/2ui.c",
        "patchSetId": 12
      },
      "lineNbr": 482,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "nit: is this change intentional? (FWIW vboot is built with std\u003dc11 so I don\u0027t think there\u0027s anything wrong with inline variable definitions.)",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "601cbad4_74ea69c6",
        "filename": "firmware/2lib/2ui.c",
        "patchSetId": 12
      },
      "lineNbr": 482,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "Usually I try to move the definition to the top of the function if it\u0027s being used in multiple locations.  What do you think?",
      "parentUuid": "8b59106b_89450354",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a484e78_252445b5",
        "filename": "firmware/2lib/2ui.c",
        "patchSetId": 12
      },
      "lineNbr": 482,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-24T01:40:42Z",
      "side": 1,
      "message": "I prefer to define things at the point of use but it\u0027s a personal preference thing. It just looks odd that you\u0027re changing this here since it has no relation to this patch.",
      "parentUuid": "601cbad4_74ea69c6",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "922d270c_58cf0dca",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 259,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "...done? I don\u0027t see any comments anymore.",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dadef9c0_05028d0a",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 259,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "Sorry, I meant \"Comment this out\".",
      "parentUuid": "922d270c_58cf0dca",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2489a57_4240886f",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 328,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "Just as a reminder, when adding the sign_official_build support you\u0027ll need to make sure you initialize this correctly, too.",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7041d77_16028a03",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 328,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "Seems like sign_official_board just uses KERNEL_VERSION\u003d1 to set this, regardless of the type of kernel -- I think that should be sufficient?",
      "parentUuid": "e2489a57_4240886f",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4fae379_8db8b2bc",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 328,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-24T01:40:42Z",
      "side": 1,
      "message": "No, sign_official_build.sh can take a VERSION_FILE, which I believe is what the signer does (we definitely sign versions other than 1 sometimes). But either way, KERNEL_VERSION ends up being the correct variable, but my point is that you need to extract the top bit from that and make sure it\u0027s passed to vbutil_kernel when you resign the minios kernel partition (so you\u0027ll actually put that thing into the preamble that the code here is trying to get out of it).",
      "parentUuid": "e7041d77_16028a03",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a480cae_19a81aeb",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 332,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "\"MiniOS kernel version\"",
      "range": {
        "startLine": 332,
        "startChar": 15,
        "endLine": 332,
        "endChar": 18
      },
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "10479c4a_ef9de4fb",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 332,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a480cae_19a81aeb",
      "range": {
        "startLine": 332,
        "startChar": 15,
        "endLine": 332,
        "endChar": 18
      },
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6befa2d_91a84399",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 336,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "0xff?",
      "range": {
        "startLine": 336,
        "startChar": 33,
        "endLine": 336,
        "endChar": 36
      },
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbab0366_f919b9b3",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 336,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b6befa2d_91a84399",
      "range": {
        "startLine": 336,
        "startChar": 33,
        "endLine": 336,
        "endChar": 36
      },
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4de0508_a29d03ab",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 338,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "This stuff also needs to be updated to match what you\u0027re implementing now.",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52e25aa2_0ada1fa2",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 338,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d4de0508_a29d03ab",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35e625fe_ee9d7656",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 495,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "nit: maybe better to call this try_minios() or something, to make it clear that it has nothing to do with the other kernel loading stuff that\u0027s also implemented somewhere in this file.",
      "range": {
        "startLine": 495,
        "startChar": 19,
        "endLine": 495,
        "endChar": 29
      },
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "71ea5284_bbccb686",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 495,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "Sure -- changed to the \"try_minios_\" prefix for the whole family of functions.",
      "parentUuid": "35e625fe_ee9d7656",
      "range": {
        "startLine": 495,
        "startChar": 19,
        "endLine": 495,
        "endChar": 29
      },
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4dc2ae23_bf18866c",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 571,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "nit: wonder if 16KB is actually enough (that\u0027s only 32 sectors at most)? Have you tried playing around with it to see if higher values can make this faster? (How long does it take for a whole scan, anyway? Depends on the board too, of course...)\n\nmalloc() is cheap so maybe it\u0027s better to just do this a megabyte at a time right away?",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2055283_e64f3601",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 571,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "It doesn\u0027t seem to make a huge difference, once over a certain threshold.  16 KB and 1 MB both take around 1 second with AP console enabled (using puff), and 1 MB seemed 50ms+ faster.  I\u0027ll just leave it at 1 MB for now, and we can look at optimizations later on if necessary.",
      "parentUuid": "4dc2ae23_bf18866c",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7acdf3d3_a8e6f3c0",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 571,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-24T01:40:42Z",
      "side": 1,
      "message": "Wait, it takes 1 second to boot or one second for only the sector scanning pass? That sounds really long (I guess for UX purposes 1 second here is not a big deal... but still). AP console totally skews results though, so please try it without (either disabling the whole thing or just making sure no prints are happening between the two points you measure... the latter is probably easier).",
      "parentUuid": "b2055283_e64f3601",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd5e4149_5333df18",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 619,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "When you say \"uncomment\" do you mean \"comment out\"? Usually when someone says \"uncomment\" that sounds to me like taking something that is already commented out and \"un-comment out\" it (i.e. make it visible to the compiler again).\n\nAnyway, comment probably doesn\u0027t belong here for the final version of this patch?",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b114b3a4_2641c9ee",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 619,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "Yeah -- I definitely wrote \"uncomment\" meaning \"comment out\".  And yes, this doesn\u0027t belong in the final version of this patch, but since NBR folks are cherry-picking this patch and testing it out, I thought it\u0027d be nice to have some helpful comments.  When the patch is ready to commit, I will remove the comments.",
      "parentUuid": "cd5e4149_5333df18",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d17a7d0_62e0b1f6",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 625,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2021-06-18T00:57:54Z",
      "side": 1,
      "message": "Is there a point setting a recovery reason here? We are already in recovery mode. If we don\u0027t set a recovery reason for other LoadKernel failures when already in recovery mode, it seems weird to do this here.",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "87df37b0_229db10c",
        "filename": "firmware/lib/vboot_kernel.c",
        "patchSetId": 12
      },
      "lineNbr": 625,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2021-06-22T20:03:24Z",
      "side": 1,
      "message": "Ah... good point.  Removed.",
      "parentUuid": "6d17a7d0_62e0b1f6",
      "revId": "7989ad2681166e5197a23f0860640476ec3f03ce",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}