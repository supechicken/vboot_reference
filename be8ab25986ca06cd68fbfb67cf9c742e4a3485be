{
  "comments": [
    {
      "key": {
        "uuid": "13ec1080_ccc99dd3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 18
      },
      "lineNbr": 0,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-07-28T11:34:06Z",
      "side": 1,
      "message": "@Peter, I\u0027d like to standardize on our use of the word \"diagnostic\".  Could we consistently spell it as follows, both in strings, code, comments, and documentation?\n\nAs a standalone word: \"diagnostics\" with an \"s\"\nAs a compound phrase: \"diagnostic\" without an \"s\", e.g.\n  \"diagnostic tools\"\n  \"diagnostic menu\"\n  \"diagnostic function\"\n  \"diagnostic tests\"\n  \"diagnostic USE flag\"\n  \"diagnostic UI\"",
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ba8830c_5c72cb43",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 18
      },
      "lineNbr": 0,
      "author": {
        "id": 1001197
      },
      "writtenOn": "2020-07-29T07:27:20Z",
      "side": 1,
      "message": "I\u0027m removing the \u0027s\u0027 for VB2_SCREEN_DIAGNOSTICS . Otherwise, it looks a bit strange to have `diagnostic_items` , `diagnostic_screen` (where write it backward will lead to SCREEN_DIAGNOSTICS ) . Let me know if you have a different thought. Thanks.",
      "parentUuid": "13ec1080_ccc99dd3",
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7459a80_7f5d7339",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 18
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-29T10:01:21Z",
      "side": 1,
      "message": "Hmm... it\u0027s hard for me to tell if something is a compound word or not. For example, \"screen_diagnostics\" and \"diagnostic_screen\".",
      "parentUuid": "4ba8830c_5c72cb43",
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c773acd7_cbeaacdf",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 248,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-28T07:57:05Z",
      "side": 1,
      "message": "This is NOT one of flag in enum vb2_context_flags.",
      "range": {
        "startLine": 248,
        "startChar": 16,
        "endLine": 248,
        "endChar": 35
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1faf5779_3a66d03c",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 248,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-07-28T11:34:06Z",
      "side": 1,
      "message": "I don\u0027t think we even need to set this nvdata flag in here?  The place it is read and reset is in VbSelectAndLoadKernel, which is tested in vboot_api_kernel4_tests.c.  You probably want to modify THAT test to ensure that the correct function is called there (VbBootDiagnosticLegacyClamshell vs. vb2_diagnostics_menu).",
      "parentUuid": "c773acd7_cbeaacdf",
      "range": {
        "startLine": 248,
        "startChar": 16,
        "endLine": 248,
        "endChar": 35
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5188021b_90a4a50e",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 248,
      "author": {
        "id": 1001197
      },
      "writtenOn": "2020-07-29T07:27:20Z",
      "side": 1,
      "message": "Will it be suggested to still have FOR_DIAGNOSTICS enum ? It looks like I still need that [Line 228] to properly reset things for my screen.",
      "parentUuid": "1faf5779_3a66d03c",
      "range": {
        "startLine": 248,
        "startChar": 16,
        "endLine": 248,
        "endChar": 35
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db004828_f82d5e8e",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 248,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-29T10:01:21Z",
      "side": 1,
      "message": "I\u0027m fine if we add FOR_DIAGNOSTICS to the enum and not change anything in this function.",
      "parentUuid": "5188021b_90a4a50e",
      "range": {
        "startLine": 248,
        "startChar": 16,
        "endLine": 248,
        "endChar": 35
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "781b0e36_76fb8b14",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1270,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-28T07:57:05Z",
      "side": 1,
      "message": "Can we write\n\n /* #3: Launch diagnostics */\n if (DIAGNOSTIC_UI) {\n     add_mock_keypress(VB_KEY_ESC);\n     add_mock_keypress(VB_KEY_DOWN);\n }\n\nso that the entire section is enclosed with the conditional?",
      "range": {
        "startLine": 1268,
        "startChar": 1,
        "endLine": 1270,
        "endChar": 33
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de3702b7_a77f6353",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1270,
      "author": {
        "id": 1001197
      },
      "writtenOn": "2020-07-29T07:27:20Z",
      "side": 1,
      "message": "I try to follow the convention here that \"add_mock_keypress(VB_KEY_ESC);\" at every section. \nIf we change it to \n\n /* #3: Launch diagnostics */\n if (DIAGNOSTIC_UI) {\n     add_mock_keypress(VB_KEY_ESC);\n     add_mock_keypress(VB_KEY_DOWN);\n }\n\nThen we also need to add another condition under \n /* #4: Advanced options */\n if (!DIAGNOSTIC_UI)\n     add_mock_keypress(VB_KEY_ESC);  /* To leave External disk recovery */\n\nMaybe the better approach is to move the \"add_mock_keypress(VB_KEY_ESC);\" one line up and check  the we are back to VB2_SCREEN_RECOVERY_SELECT under /* #2: External disk recovery */\n\nwdyt ?",
      "parentUuid": "781b0e36_76fb8b14",
      "range": {
        "startLine": 1268,
        "startChar": 1,
        "endLine": 1270,
        "endChar": 33
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "258acb06_e0cf4f20",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1290,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-28T07:57:05Z",
      "side": 1,
      "message": "I think it suffices to check this only for the first time. Maybe we don\u0027t even need to check any disabled_item_mask at all, since we are already testing menu navigation by key presses. If the mask is wrong, the next DISPLAYED_EQ check will fail anyway.",
      "range": {
        "startLine": 1290,
        "startChar": 23,
        "endLine": 1290,
        "endChar": 50
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c18fa1ea_b9a715ac",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1290,
      "author": {
        "id": 1001197
      },
      "writtenOn": "2020-07-29T07:27:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "258acb06_e0cf4f20",
      "range": {
        "startLine": 1290,
        "startChar": 23,
        "endLine": 1290,
        "endChar": 50
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4401cf1e_ce2513a3",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1342,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-28T07:57:05Z",
      "side": 1,
      "message": "Seeing this, I feel like it\u0027s getting more and more difficult to read the testing code. Since we already have diagnostics_tests(), what do you think if we skip the whole manual_recovery_screen_tests() when DIAGNOSTIC_UI?\n\nJoel, what\u0027s your thought about this?",
      "range": {
        "startLine": 1341,
        "startChar": 1,
        "endLine": 1342,
        "endChar": 19
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "09d38146_2405c408",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1342,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-07-28T11:34:06Z",
      "side": 1,
      "message": "Hmm... I\u0027m not totally sure of the current split between xx_tests() and xx_screen_tests(), but IMHO the entry point into diagnostic UI should be checked here in manual_recovery_screen_tests(), and not diagnostics_tests().  Looking at the other xx_tests() functions, seems like diagnostics_tests() should be checking the diagnostics functionality itself, and not the entry functionality.",
      "parentUuid": "4401cf1e_ce2513a3",
      "range": {
        "startLine": 1341,
        "startChar": 1,
        "endLine": 1342,
        "endChar": 19
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4994c268_1dc52b3e",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1342,
      "author": {
        "id": 1383774
      },
      "writtenOn": "2020-07-28T11:54:03Z",
      "side": 1,
      "message": "IMHO we should not skip manual_recovery_screen_tests() while DIAGNOSTIC_UI\u003d1, which implies that we could pass all the test with DIAGNOSTIC_UI\u003d1 even if the whole displaying is broken.\n\nI think we can re-design it in some other CLs, like providing DISPLAYED_EQ_CUR to check if the latest vb2ex_display_ui() matches certain screen and ignore others.\n\n--\n\nBut for current implementation, I am for the current approach which contains many if-clauses in between mock keys/checks.\n\n--\n\n\u003e  I\u0027m not totally sure of the current split between xx_tests() and xx_screen_tests()\n\nIMHO we should avoid testing any screens in xx_tests() unless we need to inspect functionality through it (But we have had lots of these things now ðŸ˜ž)",
      "parentUuid": "09d38146_2405c408",
      "range": {
        "startLine": 1341,
        "startChar": 1,
        "endLine": 1342,
        "endChar": 19
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1aa07672_501ff539",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1342,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-29T03:37:39Z",
      "side": 1,
      "message": "\u003e xx_tests() vs xx_screen_tests()\n\nI think the current design is:\n\n- xx_tests(): Test functionality. This usually doesn\u0027t contain menu navigation.\n- xx_screen_tests(): Test displayed screens. This is full of UP \u0026 DOWN mock key presses.\n\nIf this is the consensus, then\n\n1. The current state of this function looks fine.\n2. The content of diagnostics_tests() might fit better in manual_recovery_tests(), since it\u0027s testing the functionality of recovery UI.\n3. The current diagnostics_screen_tests() also looks fine, since it only checks displayed screens.",
      "parentUuid": "4994c268_1dc52b3e",
      "range": {
        "startLine": 1341,
        "startChar": 1,
        "endLine": 1342,
        "endChar": 19
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df60c20b_a6f90cff",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1390,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-28T07:57:05Z",
      "side": 1,
      "message": "0x0",
      "range": {
        "startLine": 1390,
        "startChar": 23,
        "endLine": 1390,
        "endChar": 24
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f3c235b_20ea318d",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1390,
      "author": {
        "id": 1001197
      },
      "writtenOn": "2020-07-29T07:27:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "df60c20b_a6f90cff",
      "range": {
        "startLine": 1390,
        "startChar": 23,
        "endLine": 1390,
        "endChar": 24
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f6205a8_d61cfb08",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1394,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-07-28T07:57:05Z",
      "side": 1,
      "message": "0x0",
      "range": {
        "startLine": 1394,
        "startChar": 23,
        "endLine": 1394,
        "endChar": 24
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb4c22c0_56503783",
        "filename": "tests/vb2_ui_tests.c",
        "patchSetId": 18
      },
      "lineNbr": 1394,
      "author": {
        "id": 1001197
      },
      "writtenOn": "2020-07-29T07:27:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f6205a8_d61cfb08",
      "range": {
        "startLine": 1394,
        "startChar": 23,
        "endLine": 1394,
        "endChar": 24
      },
      "revId": "be8ab25986ca06cd68fbfb67cf9c742e4a3485be",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}