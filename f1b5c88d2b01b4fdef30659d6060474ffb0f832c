{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7ec8f329_12228785",
        "filename": "tests/futility/link_bios.manifest.json",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2023-10-27T01:07:37Z",
      "side": 0,
      "message": "This is the expected output file for `futility` tests, so it shouldn\u0027t be changed. We\u0027ll need to exclude:\n\n- tests/futility/*.json\n- tests/futility/*.txt\n- tests/futility/data/\n- tests/futility/expect_output/\n\nfrom `cros format` check.",
      "revId": "f1b5c88d2b01b4fdef30659d6060474ffb0f832c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "602ffb01_47087d55",
        "filename": "tests/futility/link_bios.manifest.json",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-10-27T06:09:25Z",
      "side": 0,
      "message": "i\u0027d argue that the exact JSON output should not be asserted.  what matters is the contents of the JSON, not where a space is used.  JSON is for machines, not humans.  i don\u0027t know what tools vboot_reference would accept though in the test suite ... if `jq` is acceptable, that would be easy to filter both to normalize \u0026 then compare.\n\nthe other files already pass.  for .txt files, we enforce no trailing space, and our tools shouldn\u0027t be omitting those.",
      "parentUuid": "7ec8f329_12228785",
      "revId": "f1b5c88d2b01b4fdef30659d6060474ffb0f832c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "426906f0_9f77850a",
        "filename": "tests/futility/link_bios.manifest.json",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2023-10-27T06:47:42Z",
      "side": 0,
      "message": "Yes, I think we can add app-misc/jq as vboot_reference\u0027s a test dependency and use it for verifying the JSON output. I just wanted to point out that some tests will fail with this CL.\n\n\u003e the other files already pass. for .txt files, we enforce no trailing space, and our tools shouldn\u0027t be omitting those.\n\nThe paths listed above are all expected output files. What if an expected output file contains a trailing space? Right now we indeed have some files with trailing spaces (such as tests/futility/expect_output/show.kernel). I don\u0027t like the trailing spaces, but those shouldn\u0027t be considered bugs that must be fixed. Currently `cros format` doesn\u0027t complain about those files only because they are not `.txt`.\n\nSo, the question here is, should `cros format` ignore all expected output files? Or, should we require that the expected output files must not have `.txt`.",
      "parentUuid": "602ffb01_47087d55",
      "revId": "f1b5c88d2b01b4fdef30659d6060474ffb0f832c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7bab2459_23f3005a",
        "filename": "tests/futility/link_bios.manifest.json",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2023-10-27T13:31:42Z",
      "side": 0,
      "message": "the unittests pass now that jq filters both\n\n\u003e The paths listed above are all expected output files. What if an expected output file contains a trailing space?\n\nwe should fix our tools that generate the bad output\n\n\u003e Right now we indeed have some files with trailing spaces (such as tests/futility/expect_output/show.kernel). I don\u0027t like the trailing spaces, but those shouldn\u0027t be considered bugs that must be fixed.\n\nwhy not ?  the tool shouldn\u0027t be doing that in the first place.  it\u0027s a bug, and we should fix it.\n\n\u003e Or, should we require that the expected output files must not have .txt.\n\nfor the broken tests, not using .txt suffix seems like an easy way to avoid the issue until the tools can be fixed.",
      "parentUuid": "426906f0_9f77850a",
      "revId": "f1b5c88d2b01b4fdef30659d6060474ffb0f832c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa7284b5_fc3d29d3",
        "filename": "tests/futility/link_bios.manifest.json",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2023-10-27T21:59:51Z",
      "side": 0,
      "message": "I\u0027m not really sure what Yu-Ping meant (there\u0027s no file exactly called `tests/futility/expect_output/show.kernel` as far as I can tell), but from what I can tell the only file we have that has a trailing space is `tests/futility/expect_output/show.tests_futility_data_kern_preamble.bin`. In that case it\u0027s part of the kernel command line output, and the trailing space is actually part of the embedded command line, so I would argue that this is not a bug. However, since it\u0027s not using the .txt ending I don\u0027t think we need to worry about it (and if our expected output ever clashes with this in the future we can still change the exclusion rules at that point).",
      "parentUuid": "7bab2459_23f3005a",
      "revId": "f1b5c88d2b01b4fdef30659d6060474ffb0f832c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3c6da655_1eba4734",
        "filename": "tests/futility/link_bios.manifest.json",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2023-10-30T03:23:49Z",
      "side": 0,
      "message": "Sorry, by `show.kernel` I actually meant `show.tests_futility_data_kern_preamble.bin`.\n\nAfter some more digging, I found that the trailing space is a consequence replacing newlines with spaces when reading the config file. Uploaded CL:4982049 to fix it. After the fix I believe there will no longer be trailing spaces in any file in the repo.",
      "parentUuid": "fa7284b5_fc3d29d3",
      "revId": "f1b5c88d2b01b4fdef30659d6060474ffb0f832c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}