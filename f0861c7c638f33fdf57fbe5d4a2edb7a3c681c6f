{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0a2a911a_ffcf5e40",
        "filename": "/COMMIT_MSG",
        "patchSetId": 18
      },
      "lineNbr": 10,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-03T10:52:57Z",
      "side": 1,
      "message": "remove",
      "range": {
        "startLine": 10,
        "startChar": 62,
        "endLine": 10,
        "endChar": 63
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad916aef_2fd82e42",
        "filename": "/COMMIT_MSG",
        "patchSetId": 18
      },
      "lineNbr": 10,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-10-05T06:37:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0a2a911a_ffcf5e40",
      "range": {
        "startLine": 10,
        "startChar": 62,
        "endLine": 10,
        "endChar": 63
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "275695f8_23896bee",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1396,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-03T10:52:57Z",
      "side": 1,
      "message": "I\u0027m not sure if I understand this paragraph. If `--mode\u003doutput`, then `--model` should always be specified, right? Do we check it when parsing the options? If we do, then here should be\n\n```\nif (cfg-\u003eoutput_only \u0026\u0026 model-\u003ehas_custom_label) {\n    assert(arg-\u003emodel);\n    ...\n```",
      "range": {
        "startLine": 1394,
        "startChar": 4,
        "endLine": 1396,
        "endChar": 46
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ab0a68e_5b9ea097",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1396,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-10-03T16:09:10Z",
      "side": 1,
      "message": "If you are running this on a DUT, and you want to get \"the expected output for this device\", then you\u0027ll run without `--model`.",
      "parentUuid": "275695f8_23896bee",
      "range": {
        "startLine": 1394,
        "startChar": 4,
        "endLine": 1396,
        "endChar": 46
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58d3da36_725f2771",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1396,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-07T06:43:54Z",
      "side": 1,
      "message": "Right, I missed that case.\n\nThe code looks good to me now, but I\u0027m still confused by the meaning of the paragraph. Do you mean:\n\n```\nThe only exception is `--mode\u003doutput` (cfg-\u003eoutput_only). When that is specified with `--model\u003dBASE_MODEL`, we simply output the image of the base model without reading the VPD.\n```",
      "parentUuid": "8ab0a68e_5b9ea097",
      "range": {
        "startLine": 1394,
        "startChar": 4,
        "endLine": 1396,
        "endChar": 46
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9031515e_462c8ba2",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1396,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-10-07T07:17:28Z",
      "side": 1,
      "message": "updated.",
      "parentUuid": "58d3da36_725f2771",
      "range": {
        "startLine": 1394,
        "startChar": 4,
        "endLine": 1396,
        "endChar": 46
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aeaa6513_1c8b9676",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1403,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-03T10:52:57Z",
      "side": 1,
      "message": "type size_t",
      "range": {
        "startLine": 1403,
        "startChar": 9,
        "endLine": 1403,
        "endChar": 12
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ed5561e5_d27e401e",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1403,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-10-05T06:37:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aeaa6513_1c8b9676",
      "range": {
        "startLine": 1403,
        "startChar": 9,
        "endLine": 1403,
        "endChar": 12
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bdff947a_8c1d15e7",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1406,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-03T10:52:57Z",
      "side": 1,
      "message": "const",
      "range": {
        "startLine": 1406,
        "startChar": 3,
        "endLine": 1406,
        "endChar": 9
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e0f92b2b_2940bc4a",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1406,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-10-05T06:37:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bdff947a_8c1d15e7",
      "range": {
        "startLine": 1406,
        "startChar": 3,
        "endLine": 1406,
        "endChar": 9
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41b6d613_0e3fc0be",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1419,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-03T10:52:57Z",
      "side": 1,
      "message": "Check the return value of `load_system_firmware` instead of the data?",
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cbc09033_1950b78c",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1419,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-10-05T06:37:22Z",
      "side": 1,
      "message": "But it is possible we successfully loaded system firmware (flashrom_read) and just not able to parse. So it\u0027s more correct to only look at image_current.data.",
      "parentUuid": "41b6d613_0e3fc0be",
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4617168e_3a7cefc3",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1419,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-07T06:43:54Z",
      "side": 1,
      "message": "But it\u0027s also possible that, after `image-\u003edata` is successfully allocated, `flashrom_image_read` fails, so that `image-\u003edata` contains non-null invalid data. Therefore I think it\u0027s better to err on the side of caution (i.e., by checking the return value, which is more rigorous) in this case.\n\nAlternatively, `flashrom_read_image` can be called directly here to skip parsing the image. A side effect is that there won\u0027t be retries. If we really want to do this in the most correct way, we\u0027ll need to add another function to the updater_utils API, which does \"`flashrom_read_image` with retries\", or equivalently \"`load_system_firmware` without parsing the image\".\n\nThat said, the original code doesn\u0027t even check for `cfg-\u003eimage_current.data \u003d\u003d NULL` after `load_system_firmware`. So, maybe keep it that way (i.e., removing lines #1422-1425 of PS19) in this patch, and then fix that in a follow-up patch?",
      "parentUuid": "cbc09033_1950b78c",
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3d8410b2_80d60189",
        "filename": "futility/updater.c",
        "patchSetId": 18
      },
      "lineNbr": 1419,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-10-07T07:17:28Z",
      "side": 1,
      "message": "Hmmm. I thought the underlying implementation would leave image-\u003edata as empty when flashrom read failed. I think that should be fixed.\n\nAgree let\u0027s move this to a follow up change.",
      "parentUuid": "4617168e_3a7cefc3",
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fd42ab3_ada22d19",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 18
      },
      "lineNbr": 463,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2024-10-03T10:52:57Z",
      "side": 1,
      "message": "b",
      "range": {
        "startLine": 463,
        "startChar": 17,
        "endLine": 463,
        "endChar": 25
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fc8a1829_e0228873",
        "filename": "futility/updater_quirks.c",
        "patchSetId": 18
      },
      "lineNbr": 463,
      "author": {
        "id": 1000239
      },
      "writtenOn": "2024-10-05T06:37:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3fd42ab3_ada22d19",
      "range": {
        "startLine": 463,
        "startChar": 17,
        "endLine": 463,
        "endChar": 25
      },
      "revId": "f0861c7c638f33fdf57fbe5d4a2edb7a3c681c6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}