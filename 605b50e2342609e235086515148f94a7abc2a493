{
  "comments": [
    {
      "key": {
        "uuid": "e65a9730_24cd2cb1",
        "filename": "firmware/lib/ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 449,
      "author": {
        "id": 1119124
      },
      "writtenOn": "2018-08-31T01:52:41Z",
      "side": 1,
      "message": "is TCPC update actually getting triggered?\n\nthe default in depthcharge (vboot_aux_fw[])\nis VB_AUX_FW_NO_UPDATE unless a mismatch\nwas detected.\n\nso, if we\u0027re already not calling VbExCheckAuxFw\nbecause of DISABLE_PD_SOFTWARE_SYNC in \nec_sync_check_aux_fw(), the state should\nbe \"don\u0027t do anything\".",
      "range": {
        "startLine": 449,
        "startChar": 16,
        "endLine": 449,
        "endChar": 31
      },
      "revId": "605b50e2342609e235086515148f94a7abc2a493",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eeb25e73_f26bd42b",
        "filename": "firmware/lib/ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 449,
      "author": {
        "id": 1125984
      },
      "writtenOn": "2018-08-31T02:28:16Z",
      "side": 1,
      "message": "The update doesn\u0027t get triggered, but it tries to \"protect\" the parts anyways. When that fails, it leads to recovery below.",
      "parentUuid": "e65a9730_24cd2cb1",
      "range": {
        "startLine": 449,
        "startChar": 16,
        "endLine": 449,
        "endChar": 31
      },
      "revId": "605b50e2342609e235086515148f94a7abc2a493",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "927af24b_f9bcf250",
        "filename": "firmware/lib/ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 449,
      "author": {
        "id": 1003000
      },
      "writtenOn": "2018-08-31T02:43:57Z",
      "side": 1,
      "message": "The underlying issue is that ec_sync_all calls ec_sync_check_aux_fw() to decide if AUX FW update is required/allowed. If not, then it sets severity to VB_AUX_FW_NO_UPDATE and returns success. Thus, ec_sync_all eventually ends up calling VbExUpdateAuxFw() anyways irrespective of VB_AUX_FW_NO_UPDATE is set or not.\n\nAseda -- Shouldn\u0027t we have a check in ec_sync_all instead:\n\nif (fw_update !\u003d VB_AUX_FW_NO_UPDATE) {\n     rv \u003d ec_sync_update_aux_fw(ctx);\n     ...\n}\n\nThat way if there is any other reason to skip AUX FW update, that will get handled too. Thoughts?",
      "parentUuid": "eeb25e73_f26bd42b",
      "range": {
        "startLine": 449,
        "startChar": 16,
        "endLine": 449,
        "endChar": 31
      },
      "revId": "605b50e2342609e235086515148f94a7abc2a493",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c95bd580_8c3b7c84",
        "filename": "firmware/lib/ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 449,
      "author": {
        "id": 1119124
      },
      "writtenOn": "2018-08-31T02:53:01Z",
      "side": 1,
      "message": "the \"protect\" just tells the EC to lock down the i2c tunnels;\nthat part should happen unconditionally.  why is it failing?",
      "parentUuid": "eeb25e73_f26bd42b",
      "range": {
        "startLine": 449,
        "startChar": 16,
        "endLine": 449,
        "endChar": 31
      },
      "revId": "605b50e2342609e235086515148f94a7abc2a493",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}