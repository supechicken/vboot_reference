{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "bd4c7754_48c66341",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2022-06-09T22:22:41Z",
      "side": 1,
      "message": "I mean, we can do it this way if you want to... but with this you\u0027re achieving your goal of decoupling elogtool from vboot\u0027s flashrom-shell-out library, but still keeping a dependency to vboot\u0027s subprocess library. Are you really gaining anything here for your code duplication in elogtool? Seems like a dependency is still a dependency to me so I think you could just as well remove flashrom.c from USE_FLASHROM too and keep using that.\n\n(USE_FLASHROM should really be renamed into USE_LIBFLASHROM because the only reason for its existence is to avoid the libflashrom dependency, it doesn\u0027t need to cover any more code than what\u0027s strictly needed to achieve that.)",
      "revId": "361b4c4bb59eac38ffc9e9f0691f4f744c0b0cef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d6f4d9a5_4d664f0c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2022-06-10T01:00:27Z",
      "side": 1,
      "message": "Rather than duplicate the discussion in too many places I mostly replied in CB:65055\n\nActually that was the original name however a choice was made to call it just flashrom as it covers two cases of library and exec. The rename to `USE_LIBFLASHROM` would be slightly premature as it covers both the case of subprocess logic as well as libflashrom logic. Furthermore it is orthogonal to the direct issue at hand here that requires changes in a number of places simultaneously [ebuild, vboot_ref Makefile, coreboot Makefile, coreboot buildbot config]. I rather we handle that as its own problem when flashrom shell out logic is finally EOL\u0027ed.",
      "parentUuid": "bd4c7754_48c66341",
      "revId": "361b4c4bb59eac38ffc9e9f0691f4f744c0b0cef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d46afb2_a473c707",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2022-06-10T04:29:47Z",
      "side": 1,
      "message": "Well, I\u0027m saying there should be no need to guard flashrom.c with it. The only point of having it is to decouple coreboot from libflashrom. It doesn\u0027t need to do anything more than that. (But I\u0027m not asking you to change it in this patch, I just mentioned that as an aside. I agree that it may not be worth the effort to change at this point.)",
      "parentUuid": "d6f4d9a5_4d664f0c",
      "revId": "361b4c4bb59eac38ffc9e9f0691f4f744c0b0cef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5da2ebed_62ce095c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2022-06-10T04:42:56Z",
      "side": 1,
      "message": "Understood. Well the other case in the story and that was futility within vboot_reference getting built on the upstream coreboot buildbot that is why. Just another part of the web of things that are getting un-catch22\u0027ed.",
      "parentUuid": "8d46afb2_a473c707",
      "revId": "361b4c4bb59eac38ffc9e9f0691f4f744c0b0cef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d80343eb_471d19e2",
        "filename": "Makefile",
        "patchSetId": 1
      },
      "lineNbr": 453,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2022-06-09T22:22:41Z",
      "side": 1,
      "message": "Don\u0027t call this a FIXME, we want to keep it that way long-term anyway. See CL:3575325.",
      "revId": "361b4c4bb59eac38ffc9e9f0691f4f744c0b0cef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d912e888_f4b6d69f",
        "filename": "Makefile",
        "patchSetId": 1
      },
      "lineNbr": 453,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2022-06-10T01:00:27Z",
      "side": 1,
      "message": "Oh :| .. Well I can delete this comment then and update the commit message accordingly. Looks like CL:3575325 should perhaps be calling a few functions instead of doing this imho though.",
      "parentUuid": "d80343eb_471d19e2",
      "revId": "361b4c4bb59eac38ffc9e9f0691f4f744c0b0cef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "50e10dd3_d8a33870",
        "filename": "Makefile",
        "patchSetId": 1
      },
      "lineNbr": 453,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2022-06-10T04:29:47Z",
      "side": 1,
      "message": "Not sure what you mean by \"calling a few functions\"? That CL is introducing new code that needs to rely on a subprocess (in that case, cbfstool), so of course it should be using the subprocess API for that. That API was always meant to be a generic provider for all of vboot\u0027s subprocess needs (IIRC it was originally introduced for mosys), and never meant to be tied to flashrom. Putting it under USE_FLASHROM here was just incorrect to start with.",
      "parentUuid": "d912e888_f4b6d69f",
      "revId": "361b4c4bb59eac38ffc9e9f0691f4f744c0b0cef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ccc71c23_84b98346",
        "filename": "Makefile",
        "patchSetId": 1
      },
      "lineNbr": 453,
      "author": {
        "id": 1314079
      },
      "writtenOn": "2022-06-10T04:42:56Z",
      "side": 1,
      "message": "Right, mosys also use to sub-process flashrom too and the subprocess seemed to be mainly around that use-case on my last greping if I recall correctly. However you are correct it is generic so you are correct, probably didn\u0027t need the guard and just let the linker do its job and gc the symbols when not required.\n\nRegarding the cbfstool, sorry I totally wasn\u0027t clear. My idea was to link with cbfstool-image functions. The CLI frontend looks independent, could we be building a libcfstool target and entering that way? Must we have these subprocesses if we have source control at both ends? It would seem logical to have a library level interface to make accessible coreboot structures too, with corresponding unit-tests rather than these disjoint opaque boxes stacked upon one another. Here is a opportunity to extend coreboot unit-tests too. This is what happened with flashrom in many ways and it historically lead to bad coverage and lots of tech debt. Just my feels that is all.",
      "parentUuid": "50e10dd3_d8a33870",
      "revId": "361b4c4bb59eac38ffc9e9f0691f4f744c0b0cef",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}