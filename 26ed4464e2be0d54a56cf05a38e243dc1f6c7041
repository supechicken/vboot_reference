{
  "comments": [
    {
      "key": {
        "uuid": "3a5e3919_26b71fc2",
        "filename": "firmware/2lib/2ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 1353551
      },
      "writtenOn": "2020-01-16T09:09:08Z",
      "side": 1,
      "message": "Since this is already checked at the beginning of vb2api_ec_sync(), why do we need to check again in both ec_sync_phase1() and ec_sync_phase2()? Is there a chance that the flags/recovery_reason would change between the calls? Or is it just for safety?",
      "revId": "26ed4464e2be0d54a56cf05a38e243dc1f6c7041",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c233f6c_70bb9bb5",
        "filename": "firmware/2lib/2ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 435,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-01-16T19:24:57Z",
      "side": 1,
      "message": "Agree with Yu-Ping that we can take all these out now if we return immediately from the check up front.",
      "revId": "26ed4464e2be0d54a56cf05a38e243dc1f6c7041",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54ab20c2_f272765c",
        "filename": "firmware/2lib/2ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 454,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-01-16T19:24:57Z",
      "side": 1,
      "message": "Should merge this into ec_sync_allowed().",
      "revId": "26ed4464e2be0d54a56cf05a38e243dc1f6c7041",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1dbf0333_0248cad2",
        "filename": "firmware/2lib/2ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 478,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-01-16T19:24:57Z",
      "side": 1,
      "message": "I think our current code still calls this when EC sync was disabled, so we probably want to keep doing that. One problem is that we only want it called once, even when both coreboot and depthcharge run the sync code. So I think we may need to set the SYNC_COMPLETE flag for that reason after all.",
      "revId": "26ed4464e2be0d54a56cf05a38e243dc1f6c7041",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99057d48_6878f367",
        "filename": "firmware/2lib/2ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 478,
      "author": {
        "id": 1126709
      },
      "writtenOn": "2020-01-17T05:12:10Z",
      "side": 1,
      "message": "It looks like all this function is doing is ensuring that EC is ready to continue with the boot process (specifically that it has enough power).\n\nCould we extricate it from the EC sync and just call it separately -- perhaps right after EC sync in depthcharge?  This could potentially also speed up boot time on EC-sync-in-coreboot machines, unless I\u0027m mistaken.\n\nIs there any requirement for this call to be before or after EC sync (when EC sync is enabled)?",
      "parentUuid": "1dbf0333_0248cad2",
      "revId": "26ed4464e2be0d54a56cf05a38e243dc1f6c7041",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0639dfd_73205267",
        "filename": "firmware/2lib/2ec_sync.c",
        "patchSetId": 1
      },
      "lineNbr": 478,
      "author": {
        "id": 1002133
      },
      "writtenOn": "2020-01-22T00:33:34Z",
      "side": 1,
      "message": "Well, it needs to be called immediately after software sync, so when that happens in coreboot it should be called in coreboot (because the point of doing software sync in coreboot was that the system may not have enough power to boot further, and this call is used to determine that there).",
      "parentUuid": "99057d48_6878f367",
      "revId": "26ed4464e2be0d54a56cf05a38e243dc1f6c7041",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}